<app-breadcrumb [urlBreadCrumb]="urlBreadCrumb"></app-breadcrumb>
<p-confirmDialog header="Confirmation" icon="pi pi-exclamation-triangle"></p-confirmDialog>

<!-- Dialog loading -->
<p-dialog header="Cargando" [(visible)]="displayModal" [modal]="true" [style]="{width: '50vw'}" [draggable]="false" [resizable]="false">
    <p class="m-0">
    </p>
    <div class="field col">
        <p-progressBar mode="indeterminate" [style]="{'height': '6px'}"></p-progressBar>
    </div>
</p-dialog>
<!--Fin Dialog loading-->

<!-- Tabla de dependencias -->
<div class="grid">
	<div class="col-12">
		<div class="card">
            <p-table #dt1 
					 [value]="dataTable" 
					 dataKey="Code" 
					 [rows]="10" 
					 [loading]="loading" 
					 [rowHover]="true" 
					 styleClass="p-datatable-gridlines p-datatable-sm" 
					 [paginator]="true" 
					 [globalFilterFields]="['Code','Name','U_NF_CUENTA','U_NF_NOMCUENTA']" 
					 selectionMode="multiple" 
					 [(selection)]="selectedLine" 
					 responsiveLayout="scroll">
                     <ng-template pTemplate="caption">
                        <div class="flex justify-content-between flex-column sm:flex-row">
                            <div>
                                <button pButton 
									    pTooltip="Limpiar" tooltipPosition="bottom" placeholder="Bottom"  
									    class="p-button-outlined mb-2 mr-2 p-button-sm" 
									    icon="pi pi-filter-slash"
									    (click)="clear(dt1)">
							    </button>

                                <button pButton
                                        *ngIf="permisosUsuarioPagina[0].create_accion" 
                                        pTooltip="Nuevo" tooltipPosition="bottom" placeholder="Bottom"  
                                        class="p-button-outlined mb-2 mr-2 p-button-success p-button-sm" 
                                        icon="pi pi-plus"
                                        [disabled]="!permisosUsuarioPagina[0].create_accion"
                                        (click)="newCuentaDependencia()">
							    </button>

                                <button pButton 
                                        pTooltip="Exportar a excel" tooltipPosition="bottom" placeholder="Bottom"   
                                        class="p-button-outlined mb-2 mr-2 p-button-success p-button-sm" 
                                        icon="pi pi-file-excel" 
                                        (click)="exportExcel()">
                                </button>

                            </div>
                            <span class="p-input-icon-left mb-2">
                                <i class="pi pi-search"></i>
                                <input pInputText type="text" #filter (input)="onGlobalFilter(dt1, $event)" placeholder="Buscar por palabra clave" class="w-full p-inputtext-sm"/>
                            </span>
                        </div>

                     </ng-template>

                     <ng-template pTemplate="header">
                        <tr>
                            <th>
                                <div class="flex justify-content-between align-items-center">
                                    C贸digo
                                    <p-columnFilter type="text" field="Code" display="menu" placeholder="Buscar por C贸digo"></p-columnFilter>
                                </div>
                            </th>

                            <th>
                                <div class="flex justify-content-between align-items-center">
                                    Nombre
                                    <p-columnFilter type="text" field="Name" display="menu" placeholder="Buscar por Nombre"></p-columnFilter>
                                </div>
                            </th>

                            <th>
                                <div class="flex justify-content-between align-items-center">
                                    C贸digo cuenta
                                    <p-columnFilter type="text" field="U_NF_CUENTA" display="menu" placeholder="Buscar por C贸digo"></p-columnFilter>
                                </div>
                            </th>

                            <th>
                                <div class="flex justify-content-between align-items-center">
                                    Nombre cuenta
                                    <p-columnFilter type="text" field="U_NF_NOMCUENTA" display="menu" placeholder="Buscar por Nombre cuenta"></p-columnFilter>
                                </div>
                            </th>
                        </tr>
                     </ng-template>


                     <ng-template pTemplate="body" let-dataLine>
                        <tr>
                            <td style="min-width: 12rem;">
                                {{ dataLine.Code }}
                            </td>

                            <td style="min-width: 12rem;">
                                {{ dataLine.Name }}
                            </td>

                            <td style="min-width: 12rem;">
                                {{ dataLine.U_NF_CUENTA }}
                            </td>

                            <td style="min-width: 12rem;">
                                {{ dataLine.U_NF_NOMCUENTA }}
                            </td>
                        </tr>
                     </ng-template>

                     <ng-template pTemplate="emptymessage">
                        <tr>
                            <td colspan="11" class="text-center">No se econtraron cuentas x dependencia.</td>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="loadingbody">
                        <tr>
                            <td colspan="11" class="text-center">Cargando cuentas x dependencia. Por favor espere</td>
                        </tr>
                    </ng-template>

            </p-table>
        </div>
    </div>
</div>