"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[792],{6792:(G,g,a)=>{a.r(g),a.d(g,{PermisosModule:()=>p});var f=a(6895),d=a(4006),_=a(9335),u=a(805),e=a(4650),h=a(9701),x=a(1562),P=a(5593),v=a(1740),M=a(5362),C=a(99);const T=["filter"];function Z(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",10)(1,"button",11),e.NdJ("click",function(){e.CHM(t);const r=e.oxw(),n=e.MAs(4);return e.KtG(r.clear(n))}),e.qZA(),e.TgZ(2,"span",12),e._UZ(3,"i",13),e.TgZ(4,"input",14,15),e.NdJ("input",function(r){e.CHM(t);const n=e.oxw(),s=e.MAs(4);return e.KtG(n.onGlobalFilter(s,r))}),e.qZA()()()}}function y(l,o){1&l&&(e.TgZ(0,"tr")(1,"th")(2,"div",16),e._uU(3," Perfil "),e._UZ(4,"p-columnFilter",17),e.qZA()(),e.TgZ(5,"th")(6,"div",16),e._uU(7," Opci\xf3n men\xfa "),e._UZ(8,"p-columnFilter",18),e.qZA()(),e.TgZ(9,"th")(10,"div",16),e._uU(11," Permiso de lectura "),e.qZA()(),e.TgZ(12,"th")(13,"div",16),e._uU(14," Permiso de escritura "),e.qZA()(),e.TgZ(15,"th")(16,"div",16),e._uU(17," Permiso de actualizaci\xf3n "),e.qZA()(),e.TgZ(18,"th")(19,"div",16),e._uU(20," Permiso de borrado "),e.qZA()(),e.TgZ(21,"th")(22,"div",16),e._uU(23," Permiso de aprobaci\xf3n "),e.qZA()()())}function A(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"tr")(1,"td",19),e._uU(2),e.qZA(),e.TgZ(3,"td",19),e._uU(4),e.qZA(),e.TgZ(5,"td",19)(6,"p-selectButton",20),e.NdJ("onChange",function(){const n=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.setPermiso(n.idPerfil,n.idMenu,n.read_accion,"read_accion"))})("ngModelChange",function(r){const s=e.CHM(t).$implicit;return e.KtG(s.read_accion=r)}),e.qZA()(),e.TgZ(7,"td",19)(8,"p-selectButton",20),e.NdJ("onChange",function(){const n=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.setPermiso(n.idPerfil,n.idMenu,n.create_accion,"create_accion"))})("ngModelChange",function(r){const s=e.CHM(t).$implicit;return e.KtG(s.create_accion=r)}),e.qZA()(),e.TgZ(9,"td",19)(10,"p-selectButton",20),e.NdJ("onChange",function(){const n=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.setPermiso(n.idPerfil,n.idMenu,n.update_accion,"update_accion"))})("ngModelChange",function(r){const s=e.CHM(t).$implicit;return e.KtG(s.update_accion=r)}),e.qZA()(),e.TgZ(11,"td",19)(12,"p-selectButton",20),e.NdJ("onChange",function(){const n=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.setPermiso(n.idPerfil,n.idMenu,n.delete_accion,"delete_accion"))})("ngModelChange",function(r){const s=e.CHM(t).$implicit;return e.KtG(s.delete_accion=r)}),e.qZA()(),e.TgZ(13,"td",19)(14,"p-selectButton",20),e.NdJ("onChange",function(){const n=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s.setPermiso(n.idPerfil,n.idMenu,n.aproved_accion,"aproved_accion"))})("ngModelChange",function(r){const s=e.CHM(t).$implicit;return e.KtG(s.aproved_accion=r)}),e.qZA()()()}if(2&l){const t=o.$implicit,i=e.oxw();e.xp6(2),e.hij(" ",t.perfil," "),e.xp6(2),e.hij(" ",t.title," "),e.xp6(2),e.Q6J("options",i.estados)("ngModel",t.read_accion),e.xp6(2),e.Q6J("options",i.estados)("ngModel",t.create_accion),e.xp6(2),e.Q6J("options",i.estados)("ngModel",t.update_accion),e.xp6(2),e.Q6J("options",i.estados)("ngModel",t.delete_accion),e.xp6(2),e.Q6J("options",i.estados)("ngModel",t.aproved_accion)}}function b(l,o){1&l&&(e.TgZ(0,"tr")(1,"td",21),e._uU(2,"No se econtraron perfiles."),e.qZA()())}function B(l,o){1&l&&(e.TgZ(0,"tr")(1,"td",21),e._uU(2,"Cargando perfiles. Por favor espere"),e.qZA()())}const F=function(){return["perfil","title"]};class m{constructor(o,t,i){this.adminService=o,this.router=t,this.authService=i,this.permisos=[],this.loading=!0,this.selecetedPermiso=[],this.estado=0,this.estados=[{label:"No",value:0},{label:"Si",value:1}]}ngOnInit(){this.adminService.listPermisos(this.authService.getToken()).subscribe({next:o=>{this.loading=!1,this.permisos=o},error:o=>{console.error(o)}})}setPermiso(o,t,i,r){const n={idMenu:t,idPerfil:o,accion:r,valor:i};console.log(n),this.adminService.setPermiso(this.authService.getToken(),n).subscribe({next:s=>{},error:s=>{console.error(s)}})}formatCurrency(o){return o.toLocaleString("en-US",{style:"currency",currency:"USD"})}onGlobalFilter(o,t){o.filterGlobal(t.target.value,"contains")}clear(o){o.clear(),this.filter.nativeElement.value=""}}m.\u0275fac=function(o){return new(o||m)(e.Y36(h.l),e.Y36(_.F0),e.Y36(x.e))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-permisos"]],viewQuery:function(o,t){if(1&o&&e.Gf(T,5),2&o){let i;e.iGM(i=e.CRH())&&(t.filter=i.first)}},features:[e._Bn([u.ez,u.YP])],decls:10,vars:8,consts:[[1,"grid"],[1,"col-12"],[1,"card"],["dataKey","id","styleClass","p-datatable-gridlines","selectionMode","single","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields","selection","selectionChange"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Limpiar","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar por palabra clave",1,"w-full",3,"input"],["filter",""],[1,"flex","justify-content-between","align-items-center"],["type","text","field","perfil","display","menu","placeholder","Buscar por perfil"],["type","text","field","title","display","menu","placeholder","Buscar por opci\xf3n de men\xfa"],[2,"min-width","12rem"],["optionLabel","label","optionValue","value",3,"options","ngModel","onChange","ngModelChange"],["colspan","7"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3,4),e.NdJ("selectionChange",function(r){return t.selecetedPermiso=r}),e.YNc(5,Z,6,0,"ng-template",5),e.YNc(6,y,24,0,"ng-template",6),e.YNc(7,A,15,12,"ng-template",7),e.YNc(8,b,3,0,"ng-template",8),e.YNc(9,B,3,0,"ng-template",9),e.qZA()()()()),2&o&&(e.xp6(3),e.Q6J("value",t.permisos)("rows",10)("loading",t.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(7,F))("selection",t.selecetedPermiso))},dependencies:[d.JJ,d.On,u.jx,P.Hq,v.o,M.UN,C.iA,C.xl],styles:["[_nghost-%COMP%]     .p-frozen-column{font-weight:700}[_nghost-%COMP%]     .p-datatable-frozen-tbody{font-weight:700}[_nghost-%COMP%]     .p-progressbar{height:.5rem}"]});class c{}c.\u0275fac=function(o){return new(o||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[_.Bz.forChild([{path:"",component:m}]),_.Bz]});var J=a(931);class p{}p.\u0275fac=function(o){return new(o||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[f.ez,d.u5,c,J.W]})}}]);