"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[725],{4725:(k,T,s)=>{s.r(T),s.d(T,{PerfilesModule:()=>d});var g=s(6895),r=s(4006),f=s(9335),a=s(805),e=s(4650),h=s(9701),v=s(1562),_=s(5593),P=s(2210),y=s(7772),b=s(1740);const M=function(n){return{"ng-invalid ng-dirty":n}};class c{constructor(i,t,l){this.rutaActiva=i,this.adminService=t,this.authService=l,this.perfil="",this.description="",this.estado="",this.submitted=!1,this.messageForm=[],this.submitBotton=!1,this.estados=[{name:"Activo",code:"A"},{name:"Inactivo",code:"I"}]}ngOnInit(){this.perfilSelected=this.rutaActiva.snapshot.params,this.adminService.getPerfilById(this.authService.getToken(),this.perfilSelected.perfil).subscribe({next:i=>{this.perfil=i[0].perfil,this.description=i[0].description||"",this.estado=i[0].estado||""},error:i=>{this.submitBotton=!1,console.error(i)}})}savePerfil(){if(this.submitted=!0,this.perfil&&this.estado){this.submitBotton=!0;const i={id:this.perfilSelected.perfil,perfil:this.perfil,description:this.description,estado:this.estado};this.adminService.updatePerfil(this.authService.getToken(),i).subscribe({next:t=>{this.messageForm=[{severity:"success",summary:"!Genial\xa1",detail:`Ha actualizado el perfil ${this.perfil}`,life:3e3}]},error:t=>{this.submitBotton=!1,console.error(t)}})}else this.messageForm=[{severity:"error",summary:"!Opps\xa1",detail:"Debe diligenciar los campos resaltados en rojo",life:3e3}]}clear(){this.submitBotton=!1,this.perfil="",this.description="",this.estado=""}}c.\u0275fac=function(i){return new(i||c)(e.Y36(f.gz),e.Y36(h.l),e.Y36(v.e))},c.\u0275cmp=e.Xpm({type:c,selectors:[["app-editar-perfil"]],features:[e._Bn([a.ez])],decls:21,vars:12,consts:[[1,"grid"],[1,"col-12","md:col-6","col-offset-3"],[1,"card","p-fluid"],[3,"value","valueChange"],[1,"field"],["htmlFor","pefil"],["pInputText","","id","perfil","name","perfil","type","text","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["htmlFor","description"],["pInputText","","id","description","name","description","type","text",3,"ngModel","ngModelChange"],["htmlFor","estado"],["optionLabel","name","optionValue","code","id","estado","name","estado","placeholder","Seleccione el estado",3,"options","ngModel","required","ngClass","ngModelChange"],[1,"col"],["pButton","","label","Guardar","icon","pi pi-save",1,"p-button-outlined","mb-2","p-button-success",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-messages",3),e.NdJ("valueChange",function(o){return t.messageForm=o}),e.qZA(),e.TgZ(4,"h5"),e._uU(5,"Editar perfil"),e.qZA(),e.TgZ(6,"div",4)(7,"label",5),e._uU(8,"Perfil"),e.qZA(),e.TgZ(9,"input",6),e.NdJ("ngModelChange",function(o){return t.perfil=o}),e.qZA()(),e.TgZ(10,"div",4)(11,"label",7),e._uU(12,"Descripci\xf3n"),e.qZA(),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(o){return t.description=o}),e.qZA()(),e.TgZ(14,"div",4)(15,"label",9),e._uU(16,"Estado"),e.qZA(),e.TgZ(17,"p-dropdown",10),e.NdJ("ngModelChange",function(o){return t.estado=o}),e.qZA()(),e.TgZ(18,"div",0)(19,"div",11)(20,"button",12),e.NdJ("click",function(){return t.savePerfil()}),e.qZA()()()()()()),2&i&&(e.xp6(3),e.Q6J("value",t.messageForm),e.xp6(6),e.Q6J("ngModel",t.perfil)("ngClass",e.VKq(8,M,t.submitted&&!t.perfil)),e.xp6(4),e.Q6J("ngModel",t.description),e.xp6(4),e.Q6J("options",t.estados)("ngModel",t.estado)("required",!0)("ngClass",e.VKq(10,M,t.submitted&&!t.estado)))},dependencies:[g.mk,r.Fj,r.JJ,r.Q7,r.On,_.Hq,P.Lt,y.V,b.o]});const A=function(n){return{"ng-invalid ng-dirty":n}};class u{constructor(i,t,l){this.messageService=i,this.adminService=t,this.authService=l,this.perfil="",this.description="",this.estado="",this.submitted=!1,this.messageForm=[],this.submitBotton=!1,this.estados=[{name:"Activo",code:"A"},{name:"Inactivo",code:"I"}]}ngOnInit(){}savePerfil(){if(this.submitted=!0,this.perfil&&this.estado){this.submitBotton=!0;const i={perfil:this.perfil,description:this.description,estado:this.estado};this.adminService.savePerfil(this.authService.getToken(),i).subscribe({next:t=>{this.messageForm=[{severity:"success",summary:"!Genial\xa1",detail:`Ha registrado en el perfil ${this.perfil}`,life:3e3}]},error:t=>{this.submitBotton=!1,console.error(t)}})}else this.messageForm=[{severity:"error",summary:"!Opps\xa1",detail:"Debe diligenciar los campos resaltados en rojo",life:3e3}]}clear(){this.submitBotton=!1,this.submitted=!1,this.perfil="",this.description="",this.estado=""}}u.\u0275fac=function(i){return new(i||u)(e.Y36(a.ez),e.Y36(h.l),e.Y36(v.e))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-nuevo-perfil"]],features:[e._Bn([a.ez])],decls:23,vars:13,consts:[[1,"grid"],[1,"col-12","md:col-6","col-offset-3"],[1,"card","p-fluid"],[3,"value","valueChange"],[1,"field"],["htmlFor","perfil"],["pInputText","","id","perfil","name","perfil","type","text","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["htmlFor","description"],["pInputText","","id","description","name","description","type","text",3,"ngModel","ngModelChange"],["htmlFor","estado"],["optionLabel","name","optionValue","code","id","estado","name","estado","placeholder","Seleccione el estado",3,"options","ngModel","required","ngClass","ngModelChange"],[1,"col"],["pButton","","label","Guardar","icon","pi pi-save",1,"p-button-outlined","mb-2","p-button-success",3,"disabled","click"],["pButton","","label","Limpiar","icon","pi pi-list",1,"p-button-outlined","mb-2","p-button-primary",3,"click"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-messages",3),e.NdJ("valueChange",function(o){return t.messageForm=o}),e.qZA(),e.TgZ(4,"h5"),e._uU(5,"Nuevo perfil"),e.qZA(),e.TgZ(6,"div",4)(7,"label",5),e._uU(8,"Perfil"),e.qZA(),e.TgZ(9,"input",6),e.NdJ("ngModelChange",function(o){return t.perfil=o}),e.qZA()(),e.TgZ(10,"div",4)(11,"label",7),e._uU(12,"Descripci\xf3n"),e.qZA(),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(o){return t.description=o}),e.qZA()(),e.TgZ(14,"div",4)(15,"label",9),e._uU(16,"Estado"),e.qZA(),e.TgZ(17,"p-dropdown",10),e.NdJ("ngModelChange",function(o){return t.estado=o}),e.qZA()(),e.TgZ(18,"div",0)(19,"div",11)(20,"button",12),e.NdJ("click",function(){return t.savePerfil()}),e.qZA()(),e.TgZ(21,"div",11)(22,"button",13),e.NdJ("click",function(){return t.clear()}),e.qZA()()()()()()),2&i&&(e.xp6(3),e.Q6J("value",t.messageForm),e.xp6(6),e.Q6J("ngModel",t.perfil)("ngClass",e.VKq(9,A,t.submitted&&!t.perfil)),e.xp6(4),e.Q6J("ngModel",t.description),e.xp6(4),e.Q6J("options",t.estados)("ngModel",t.estado)("required",!0)("ngClass",e.VKq(11,A,t.submitted&&!t.estado)),e.xp6(3),e.Q6J("disabled",t.submitBotton))},dependencies:[g.mk,r.Fj,r.JJ,r.Q7,r.On,_.Hq,P.Lt,y.V,b.o]});var C=s(99);const F=["filter"];function J(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",10)(1,"button",11),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(),Z=e.MAs(4);return e.KtG(o.clear(Z))}),e.qZA(),e.TgZ(2,"button",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.newPerfil())}),e.qZA(),e.TgZ(3,"button",13),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.editPerfil())}),e.qZA(),e.TgZ(4,"span",14),e._UZ(5,"i",15),e.TgZ(6,"input",16,17),e.NdJ("input",function(o){e.CHM(t);const Z=e.oxw(),w=e.MAs(4);return e.KtG(Z.onGlobalFilter(w,o))}),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(3),e.Q6J("disabled",!t.selectedPerfil||1!=t.selectedPerfil.length)}}function N(n,i){1&n&&(e.TgZ(0,"tr"),e._UZ(1,"th",18),e.TgZ(2,"th")(3,"div",19),e._uU(4," Perfil "),e._UZ(5,"p-columnFilter",20),e.qZA()(),e.TgZ(6,"th")(7,"div",19),e._uU(8," Descripci\xf3n "),e._UZ(9,"p-columnFilter",21),e.qZA()(),e.TgZ(10,"th")(11,"div",19),e._uU(12," Estado "),e._UZ(13,"p-columnFilter",22),e.qZA()()())}function q(n,i){if(1&n&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",23),e.qZA(),e.TgZ(3,"td",24),e._uU(4),e.qZA(),e.TgZ(5,"td",24),e._uU(6),e.qZA(),e.TgZ(7,"td",24),e._uU(8),e.qZA()()),2&n){const t=i.$implicit;e.xp6(2),e.Q6J("value",t),e.xp6(2),e.hij(" ",t.perfil," "),e.xp6(2),e.hij(" ",t.description," "),e.xp6(2),e.hij(" ",t.estado," ")}}function B(n,i){1&n&&(e.TgZ(0,"tr")(1,"td",25),e._uU(2,"No se econtraron perfiles."),e.qZA()())}function S(n,i){1&n&&(e.TgZ(0,"tr")(1,"td",25),e._uU(2,"Cargando perfiles. Por favor espere"),e.qZA()())}const U=function(){return["perfil","description","estado"]};class m{constructor(i,t,l){this.adminService=i,this.router=t,this.authService=l,this.perfil=[],this.loading=!0,this.selectedPerfil=[]}ngOnInit(){this.adminService.listPerfil(this.authService.getToken()).subscribe({next:i=>{this.loading=!1,this.perfil=i},error:i=>{console.error(i)}})}newPerfil(){this.router.navigate(["/portal/admin/perfiles/nuevo"])}editPerfil(){this.router.navigate(["/portal/admin/perfiles/editar",this.selectedPerfil[0].id])}formatCurrency(i){return i.toLocaleString("en-US",{style:"currency",currency:"USD"})}onGlobalFilter(i,t){i.filterGlobal(t.target.value,"contains")}clear(i){i.clear(),this.filter.nativeElement.value=""}}m.\u0275fac=function(i){return new(i||m)(e.Y36(h.l),e.Y36(f.F0),e.Y36(v.e))},m.\u0275cmp=e.Xpm({type:m,selectors:[["app-perfiles"]],viewQuery:function(i,t){if(1&i&&e.Gf(F,5),2&i){let l;e.iGM(l=e.CRH())&&(t.filter=l.first)}},features:[e._Bn([a.ez,a.YP])],decls:10,vars:8,consts:[[1,"grid"],[1,"col-12"],[1,"card"],["dataKey","id","styleClass","p-datatable-gridlines","selectionMode","single","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields","selection","selectionChange"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Limpiar","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2",3,"click"],["pButton","","label","Nuevo","icon","pi pi-plus",1,"p-button-outlined","mb-2","p-button-success",3,"click"],["pButton","","label","Editar","icon","pi pi-pencil",1,"p-button-outlined","mb-2","p-button-secondary",3,"disabled","click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar por palabra clave",1,"w-full",3,"input"],["filter",""],[2,"width","3rem"],[1,"flex","justify-content-between","align-items-center"],["type","text","field","perfil","display","menu","placeholder","Buscar por perfil"],["type","text","field","description","display","menu","placeholder","Buscar por descripci\xf3n"],["type","text","field","estado","display","menu","placeholder","Buscar por estado"],[3,"value"],[2,"min-width","12rem"],["colspan","7"]],template:function(i,t){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3,4),e.NdJ("selectionChange",function(o){return t.selectedPerfil=o}),e.YNc(5,J,8,1,"ng-template",5),e.YNc(6,N,14,0,"ng-template",6),e.YNc(7,q,9,4,"ng-template",7),e.YNc(8,B,3,0,"ng-template",8),e.YNc(9,S,3,0,"ng-template",9),e.qZA()()()()),2&i&&(e.xp6(3),e.Q6J("value",t.perfil)("rows",10)("loading",t.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(7,U))("selection",t.selectedPerfil))},dependencies:[a.jx,_.Hq,b.o,C.iA,C.UA,C.xl],styles:["[_nghost-%COMP%]     .p-frozen-column{font-weight:700}[_nghost-%COMP%]     .p-datatable-frozen-tbody{font-weight:700}[_nghost-%COMP%]     .p-progressbar{height:.5rem}"]});class p{}p.\u0275fac=function(i){return new(i||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[f.Bz.forChild([{path:"",component:m},{path:"nuevo",component:u},{path:"editar/:perfil",component:c}]),f.Bz]});var x=s(931);class d{}d.\u0275fac=function(i){return new(i||d)},d.\u0275mod=e.oAB({type:d}),d.\u0275inj=e.cJS({imports:[g.ez,r.u5,p,x.W]})}}]);