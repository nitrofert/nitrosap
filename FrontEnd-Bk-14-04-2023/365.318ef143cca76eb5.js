"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[365],{4023:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{G:()=>MrpComponent});var C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5861),C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncIterator_js__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(6296),file_saver__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4327),file_saver__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_0__),primeng_api__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(805),rxjs__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(7579),rxjs_operators__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(8372),_angular_core__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(4650),_angular_router__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(9335),src_app_demo_service_compras_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4931),src_app_demo_service_auth_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1562),src_app_demo_service_sap_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1922),_angular_common__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(6895),_angular_forms__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(4006),primeng_autocomplete__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(3631),primeng_button__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(5593),primeng_tooltip__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(3608),primeng_calendar__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(585),primeng_dialog__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(1493),primeng_divider__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(5108),primeng_dropdown__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2210),primeng_progressbar__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(8235),primeng_inputtext__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(1740),primeng_slider__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(8177),primeng_table__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(99),primeng_toast__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(2453),_layout_shared_breadcrumb_breadcrumb_component__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(9090);const _c0=["filter"];function MrpComponent_ng_template_2_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",56)(1,"div",57),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(2,"i",58),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(3,"h4"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(7,"div",59)(8,"div",60)(9,"button",61),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e).$implicit,c=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(c.onConfirmAP(i.data.idProyeccion,i.data.semana))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(10,"div",60)(11,"button",62),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.onRejectAP())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()()}if(2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.summary),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.detail)}}function MrpComponent_ng_template_4_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",56)(1,"div",57),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(2,"i",58),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(3,"h4"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(7,"div",59)(8,"div",60)(9,"button",61),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e).$implicit,c=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(c.onConfirmCEP(i.data.idProyeccion,i.data.cantidadProyectada,i.data.semana,i.data.fechaEditar,i.data.linenum))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(10,"div",60)(11,"button",62),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.onRejectCEP())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()()}if(2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.summary),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.detail)}}function MrpComponent_ng_template_6_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",56)(1,"div",57),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(2,"i",58),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(3,"h4"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(7,"div",59)(8,"div",60)(9,"button",61),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.onConfirmGS())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(10,"div",60)(11,"button",62),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.onRejectGS())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()()}if(2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.summary),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.detail)}}function MrpComponent_ng_template_8_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",56)(1,"div",57),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(2,"i",58),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(3,"h4"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(7,"div",59)(8,"div",60)(9,"button",61),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.onConfirm())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(10,"div",60)(11,"button",62),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.onReject())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()()}if(2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.summary),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.detail)}}function MrpComponent_ng_template_29_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.AsE("",e.ItemCode," - ",e.ItemName,"")}}function MrpComponent_ng_template_39_div_0_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",64)(1,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.zona.PENTRADA)}}function MrpComponent_ng_template_39_Template(_,a){if(1&_&&_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(0,MrpComponent_ng_template_39_div_0_Template,3,1,"div",63),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",e.zona)}}function MrpComponent_ng_template_40_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",65)(1,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()),2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.PENTRADA)}}const _c1=function(){return{height:"6px"}};function MrpComponent_div_45_Template(_,a){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",15),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(1,"p-divider")(2,"p-progressBar",66)(3,"p-divider"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Akn(_angular_core__WEBPACK_IMPORTED_MODULE_5__.DdM(2,_c1)))}function MrpComponent_ng_template_91_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",67)(1,"div")(2,"button",68),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.exportExcel())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()}}function MrpComponent_ng_template_92_Template(_,a){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"tr"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(1,"th",69),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(2,"th")(3,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(4," Semana "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"th")(6,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(7," Fecha inicio semana "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(8,"th")(9,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(10," Semana del mes "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(11,"th")(12,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(13," Inventario MP "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(14,"th")(15,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(16," Inventario MP - PT "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(17,"th")(18,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(19," Inventario MP - ZF "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(20,"th")(21,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(22," Inventario en transito "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(23,"th")(24,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(25," Compras Solicitadas "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(26,"th")(27,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(28," Cantidad requerida "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(29,"th")(30,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(31," Presupuesto de consumo MP "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(32,"th")(33,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(34," Inventario final MP "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(35,"th")(36,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(37," Necesidad de compra? "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(38,"th")(39,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(40," Cantidad sugerida "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(41,"th")(42,"div",70),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(43," Inventario final sugerido "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()())}function MrpComponent_ng_template_93_div_14_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",76),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.verUbicacionesTipoInv("MP"))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(1,"i",86),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()}}function MrpComponent_ng_template_93_div_19_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",76),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.verUbicacionesTipoInv("PT"))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(1,"i",86),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()}}function MrpComponent_ng_template_93_i_25_Template(_,a){1&_&&_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(0,"i",87)}function MrpComponent_ng_template_93_i_32_Template(_,a){1&_&&_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(0,"i",88)}function MrpComponent_ng_template_93_i_39_Template(_,a){1&_&&_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(0,"i",89)}function MrpComponent_ng_template_93_td_40_i_6_Template(_,a){1&_&&_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(0,"i",92)}function MrpComponent_ng_template_93_td_40_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"td",90)(1,"div",74)(2,"div",79),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(4,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"div",76),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit,i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.verproyecciones(o.semana))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(6,MrpComponent_ng_template_93_td_40_i_6_Template,1,0,"i",91),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()}if(2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.xi3(4,2,e.compraProyectadaMP,"1.0-0")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",e.compraProyectadaMP>0)}}function MrpComponent_ng_template_93_ng_template_41_ng_template_2_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"input",96),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2).$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.compraProyectadaMP=o)})("keydown.enter",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.PresionaEnter(o))})("blur",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.cambio(o))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()}if(2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2).$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.compraProyectadaMP)}}function MrpComponent_ng_template_93_ng_template_41_ng_template_3_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(1,"number")),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2).$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.xi3(1,1,e.compraProyectadaMP,"1.0-0")," ")}}function MrpComponent_ng_template_93_ng_template_41_Template(_,a){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"td",93)(1,"p-cellEditor"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(2,MrpComponent_ng_template_93_ng_template_41_ng_template_2_Template,1,1,"ng-template",94),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(3,MrpComponent_ng_template_93_ng_template_41_ng_template_3_Template,2,4,"ng-template",95),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()())}function MrpComponent_ng_template_93_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"tr")(1,"td")(2,"p-tableCheckbox",71),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("onClick",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.SeleccionarLinea())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(3,"td",72),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"td",73),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(7,"date"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(8,"td",73),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(9),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(10,"td",73)(11,"div",74),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(12),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(13,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(14,MrpComponent_ng_template_93_div_14_Template,2,0,"div",75),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(15,"td",73)(16,"div",74),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(17),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(18,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(19,MrpComponent_ng_template_93_div_19_Template,2,0,"div",75),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(20,"td",73)(21,"div",74),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(22),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(23,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(24,"div",76),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e).$implicit,c=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(c.verpedidoszf(i.semana))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(25,MrpComponent_ng_template_93_i_25_Template,1,0,"i",77),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(26,"td",78)(27,"div",74)(28,"div",79),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(29),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(30,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(31,"div",76),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e).$implicit,c=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(c.verpedidostransito(i.semana))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(32,MrpComponent_ng_template_93_i_32_Template,1,0,"i",80),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(33,"td",81)(34,"div",74)(35,"div",79),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(36),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(37,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(38,"div",76),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e).$implicit,c=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(c.versolicitudes(i.semana))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(39,MrpComponent_ng_template_93_i_39_Template,1,0,"i",82),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(40,MrpComponent_ng_template_93_td_40_Template,7,5,"td",83),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(41,MrpComponent_ng_template_93_ng_template_41_Template,4,0,"ng-template",null,84,_angular_core__WEBPACK_IMPORTED_MODULE_5__.W1O),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(43,"td",85),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(44),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(45,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(46,"td",73),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(47),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(48,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(49,"td",73),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(50),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(51,"td",73),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(52),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(53,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(54,"td",73),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(55),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(56,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()}if(2&_){const e=a.$implicit,r=_angular_core__WEBPACK_IMPORTED_MODULE_5__.MAs(42);_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("value",e),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",e.semana," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(7,23,e.fechasemana)," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",e.semanaMes," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.xi3(13,25,e.inventarioSemanaMP,"1.0-0")," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",e.inventarioSemanaMP>0&&0==e.lineaid),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.xi3(18,28,e.inventarioSemanaPT,"1.0-0")," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",e.inventarioSemanaPT>0&&0==e.lineaid),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.xi3(23,31,e.inventarioSemanaMPZF,"1.0-0")," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",e.inventarioSemanaMPZF>0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.xi3(30,34,e.inventarioSemanaMPTR,"1.0-0")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",e.inventarioSemanaMPTR>0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.xi3(37,37,e.compraSolicitadaMP,"1.0-0")),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",e.compraSolicitadaMP>0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",e.estadoCompra)("ngIfElse",r),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.xi3(45,40,e.presupuestoVentaMP,"1.0-0")," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Tol(e.classCantidad),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.xi3(48,43,e.inventarioFinalSemanaMP,"1.0-0")," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",e.necesidadCompra," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.xi3(53,46,e.cantidadCompraSugerida,"1.0-0")," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.xi3(56,49,e.inventarioFinalSemanaSugerido,"1.0-0")," ")}}function MrpComponent_ng_template_94_Template(_,a){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"tr")(1,"td",97),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2,"No se econtraron lineas asociadas a la solped."),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()())}function MrpComponent_ng_template_95_Template(_,a){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"tr")(1,"td",97),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2,"Cargando lineas de la calculadora. Por favor espere"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()())}function MrpComponent_ng_template_96_div_0_Template(_,a){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",15),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(1,"p-divider")(2,"p-progressBar",66)(3,"p-divider"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Akn(_angular_core__WEBPACK_IMPORTED_MODULE_5__.DdM(2,_c1)))}function MrpComponent_ng_template_96_p_button_3_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"p-button",101),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.GuardarSimulacion())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()}}function MrpComponent_ng_template_96_p_button_6_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"p-button",102),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.GuardarProyecciones())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()}}function MrpComponent_ng_template_96_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(0,MrpComponent_ng_template_96_div_0_Template,4,3,"div",26),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(1,"div",74)(2,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(3,MrpComponent_ng_template_96_p_button_3_Template,1,0,"p-button",98),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(4,"div")(5,"p-button",99),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.calculadora=!1)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(6,MrpComponent_ng_template_96_p_button_6_Template,1,0,"p-button",100),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()}if(2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",!0===e.loadingGrabarSimulacion),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",e.permisosUsuarioPagina[0].create_accion),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",e.permisosUsuarioPagina[0].create_accion)}}function MrpComponent_div_98_div_12_div_3_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",109),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(2,"date"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2).$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(2,1,e.fechadoc)," ")}}function MrpComponent_div_98_div_12_div_4_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",109),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(2,"date"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2).$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(2,1,e.fechadoc)," ")}}function MrpComponent_div_98_div_12_div_5_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",110)(1,"p-calendar",111),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(3);return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.fechaEditar=o)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()}if(2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.fechaEditar)("showIcon",!0)("required",!0)}}function MrpComponent_div_98_div_12_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",6)(1,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2,"Fecha arribo:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(3,MrpComponent_div_98_div_12_div_3_Template,3,3,"div",107),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(4,MrpComponent_div_98_div_12_div_4_Template,3,3,"div",107),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(5,MrpComponent_div_98_div_12_div_5_Template,2,3,"div",108),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit,r=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf","Necesidad"==e.tipo),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf","Proyectado"==e.tipo&&!r.editarproyeccion),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",r.editarproyeccion)}}function MrpComponent_div_98_div_13_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",6)(1,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2,"ETA:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(3,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(5,"date"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(5,1,e.eta))}}function MrpComponent_div_98_div_19_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",6)(1,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(3,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(5,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.hij("Cantidad ","Pedido"==e.tipo?"pedido":"solicitada",":"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(5,2,e.cantidadPedida))}}function MrpComponent_div_98_div_25_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(2,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(2,1,e.cantidad))}}function MrpComponent_div_98_div_26_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div")(1,"input",112),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.cantidadEditar=o)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()}if(2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.cantidadEditar)}}function MrpComponent_div_98_div_28_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",76),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit,i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.editarProyeccion(o.cantidad,o.fechadoc,o.linenum))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(1,"i",113),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()}}function MrpComponent_div_98_div_29_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",76),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit,i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.anularProyeccion(o.docnum,o.semana))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(1,"i",114),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()}}function MrpComponent_div_98_div_30_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",76),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit,i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.guardarProyeccion(o.docnum,i.cantidadEditar,o.semana,i.fechaEditar,o.linenum))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(1,"i",115),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()}}function MrpComponent_div_98_div_31_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",6)(1,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2,"Motonave:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(3,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.U_NF_MOTONAVE)}}function MrpComponent_div_98_div_32_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",6)(1,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2,"Estado:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(3,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw().$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.U_NF_STATUS)}}function MrpComponent_div_98_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",103)(1,"div",104)(2,"div",6)(3,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(4,"N\xfamero documento:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(7,"div",6)(8,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(9,"Proveedor:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(10,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(11),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(12,MrpComponent_div_98_div_12_Template,6,3,"div",105),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(13,MrpComponent_div_98_div_13_Template,6,3,"div",105),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(14,"div",6)(15,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(16,"Item MP:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(17,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(18),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(19,MrpComponent_div_98_div_19_Template,6,4,"div",105),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(20,"div",6)(21,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(22,"Cantidad pendiente:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(23,"div",9)(24,"div",74),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(25,MrpComponent_div_98_div_25_Template,3,3,"div",106),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(26,MrpComponent_div_98_div_26_Template,2,1,"div",106),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(27,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(28,MrpComponent_div_98_div_28_Template,2,0,"div",75),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(29,MrpComponent_div_98_div_29_Template,2,0,"div",75),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(30,MrpComponent_div_98_div_30_Template,2,0,"div",75),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(31,MrpComponent_div_98_div_31_Template,5,1,"div",105),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(32,MrpComponent_div_98_div_32_Template,5,1,"div",105),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()),2&_){const e=a.$implicit,r=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.docnum),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.AsE("",e.proveedor," - ",e.CardName," "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf","Proyectado"==e.tipo||"Necesidad"==e.tipo),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf","Compra"==e.tipo),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.item),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf","Proyectado"!=e.tipo),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",!r.editarproyeccion),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",r.editarproyeccion),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf","Proyectado"==e.tipo&&!r.editarproyeccion&&r.permisosUsuarioPagina[0].update_accion),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf","Proyectado"==e.tipo&&!r.editarproyeccion&&r.permisosUsuarioPagina[0].delete_accion),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf","Proyectado"==e.tipo&&r.editarproyeccion),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf","Compra"==e.tipo),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf","Compra"==e.tipo)}}function MrpComponent_ng_template_99_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"p-button",116),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return o.verdocumentos=!1,_angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.editarproyeccion=!1)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()}}function MrpComponent_div_101_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",103)(1,"div",104)(2,"div",6)(3,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(4,"Almacen:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(7,"div",6)(8,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(9,"C\xf3digo almacen:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(10,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(11),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(12,"div",6)(13,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(14,"Zona:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(15,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(16),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(17,"div",6)(18,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(19,"C\xf3digo zona:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(20,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(21),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(22,"div",6)(23,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(24,"Item MP:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(25,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(26),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(27,"div",6)(28,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(29,"Cantidad:"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(30,"div",9),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(31),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(32,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()()),2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.WhsName),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.WhsCode),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.PENTRADA),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.State),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.ItemName),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(32,6,e.OnHand))}}function MrpComponent_ng_template_102_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"p-button",116),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.verUbicaciones=!1)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()}}function MrpComponent_ng_template_104_ng_template_5_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.AsE("",e.CardCode," - ",e.CardName,"")}}function MrpComponent_ng_template_104_ng_template_34_div_0_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",64)(1,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.localidad.location)}}function MrpComponent_ng_template_104_ng_template_34_Template(_,a){if(1&_&&_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(0,MrpComponent_ng_template_104_ng_template_34_div_0_Template,3,1,"div",63),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",e.localidad)}}function MrpComponent_ng_template_104_ng_template_35_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",65)(1,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()),2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.location)}}function MrpComponent_ng_template_104_ng_template_41_div_0_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",64)(1,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.almacen.storename)}}function MrpComponent_ng_template_104_ng_template_41_Template(_,a){if(1&_&&_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(0,MrpComponent_ng_template_104_ng_template_41_div_0_Template,3,1,"div",63),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",e.almacen)}}function MrpComponent_ng_template_104_ng_template_42_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",65)(1,"div"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()),2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Oqu(e.storename)}}function MrpComponent_ng_template_104_div_48_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",136)(1,"div",9)(2,"label",137),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(3,"Fecha arribo"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(4,"input",138),_angular_core__WEBPACK_IMPORTED_MODULE_5__.ALo(5,"date"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(6,"div",9)(7,"label",139),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(8,"Cantidad"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(9,"input",140),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){const c=_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e).$implicit;return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(c.compraProyectadaMP=o)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()}if(2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",_angular_core__WEBPACK_IMPORTED_MODULE_5__.lcZ(5,2,e.fechasemana)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.compraProyectadaMP)}}function MrpComponent_ng_template_104_div_49_Template(_,a){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",15),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(1,"p-divider")(2,"p-progressBar",66)(3,"p-divider"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Akn(_angular_core__WEBPACK_IMPORTED_MODULE_5__.DdM(2,_c1)))}const _c2=function(_){return{"ng-invalid ng-dirty":_}};function MrpComponent_ng_template_104_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"div",6)(1,"div",15)(2,"label",117),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(3,"Proveedor"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(4,"p-autoComplete",118),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.proveedor=o)})("completeMethod",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.filtrarProveedores(o))}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(5,MrpComponent_ng_template_104_ng_template_5_Template,2,2,"ng-template",18),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(6,"div",6)(7,"div",15)(8,"label",119),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(9,"\xedtem"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(10,"input",120),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.itemSeleccionado=o)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(11,"div",6)(12,"div",15)(13,"label",121),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(14," Materia prima importada"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(15,"p-dropdown",122),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.nf_pedmp=o)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(16,"div",15)(17,"label",123),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(18,"Tipo carga"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(19,"p-dropdown",124),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.nf_tipocarga=o)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(20,"div",6)(21,"div",15)(22,"label",125),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(23,"Vicepresidencia"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(24,"input",126),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.viceprecidencia=o)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(25,"div",15)(26,"label",127),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(27,"Dependencia"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(28,"input",128),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.dependencia=o)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(29,"div",15)(30,"label",129),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(31,"Localidad"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(32,"p-dropdown",130,131),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.localidad=o)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(34,MrpComponent_ng_template_104_ng_template_34_Template,1,1,"ng-template",23),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(35,MrpComponent_ng_template_104_ng_template_35_Template,3,1,"ng-template",18),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(36,"div",6)(37,"div",15)(38,"label",132),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(39,"Almacen"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(40,"p-dropdown",133),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(i.almacen=o)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(41,MrpComponent_ng_template_104_ng_template_41_Template,1,1,"ng-template",23),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(42,MrpComponent_ng_template_104_ng_template_42_Template,3,1,"ng-template",18),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(43,"div",6)(44,"div",15)(45,"label",134)(46,"h4"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(47,"Fechas y cantidades proyectadas"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(48,MrpComponent_ng_template_104_div_48_Template,10,4,"div",135),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(49,MrpComponent_ng_template_104_div_49_Template,4,3,"div",26)}if(2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.proveedor)("showEmptyMessage",!0)("suggestions",e.proveedoresFiltrados)("minLength",1)("delay",1e3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.itemSeleccionado),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("options",e.materiaprima)("ngModel",e.nf_pedmp)("required",!0)("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_5__.VKq(27,_c2,e.envioLinea&&!e.nf_pedmp)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("options",e.tiposdecarga)("ngModel",e.nf_tipocarga)("required",!0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.viceprecidencia),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.dependencia),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("options",e.localidades)("ngModel",e.localidad)("filter",!0)("showClear",!0)("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_5__.VKq(29,_c2,e.envioLinea&&!e.localidad.location)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(8),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("options",e.almacenes)("ngModel",e.almacen)("filter",!0)("showClear",!0)("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_5__.VKq(31,_c2,e.envioLinea&&!e.almacen.store)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(8),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngForOf",e.fechasycantidades),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",!0===e.loadingSave)}}function MrpComponent_ng_template_105_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(0,"p-button",141),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_5__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_5__.KtG(o.RegistrarLinea())}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()}if(2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_5__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("disabled",0==e.permisosUsuarioPagina.length||!e.permisosUsuarioPagina[0].create_accion)}}const _c3=function(){return{width:"50vw"}},_c4=function(){return{"960px":"75vw","640px":"100vw"}};class MrpComponent{constructor(_,a,e,r,o,i,c){this.rutaActiva=_,this.comprasService=a,this.router=e,this.confirmationService=r,this.messageService=o,this.authService=i,this.sapService=c,this.urlBreadCrumb="",this.items=[],this.itemsMP=[],this.itemsFiltrados=[],this.descripcion="",this.itemSeleccionado="",this.fechaProyeccion=new Date,this.fechaProyeccionstr=(new Date).toLocaleDateString(),this.series=[],this.serie="",this.serieName="",this.zonas=[],this.zonaSeleccionada="",this.maxMpZona=0,this.minMpZona=0,this.presupuestoMPVenta=[],this.inventarioTramsitoMP=[],this.inventarioSolicitadoMP=[],this.inventarioProyectadoMP=[],this.totalInicialMPZF=0,this.inventarioItemZF=[],this.inventarioTramsitoMPPreFecha=[],this.inventarioSolicitadoMPPreFecha=[],this.busqueda=!1,this.envioForm=!1,this.tolerancia=0,this.errorFP=!1,this.calculadora=!1,this.verdocumentos=!1,this.formularioLinea=!1,this.listDocumentos=[],this.envioLinea=!1,this.fechaRequerida=new Date,this.proveedores=[],this.proveedoresFiltrados=[],this.dependenciasUsuario=[],this.viceprecidencia="VPCADSUM",this.dependencia="VPCADSU2",this.localidades=[],this.almacenes=[],this.almacen="",this.cantidad=1,this.monedas=[],this.moneda="",this.trm=0,this.precio=0,this.subtotalLinea=0,this.impuesto="",this.prcImpuesto=0,this.valorImpuesto=0,this.totalLinea=0,this.tiposdecarga=[{tipo:"Empacado"},{tipo:"Granel"}],this.currency="COP",this.impuestos=[],this.lineasSolped=[],this.unidad="",this.nf_tipocarga="",this.materiaprima=[{option:"Si",value:"S"},{option:"No",value:"N"}],this.fechasycantidades=[],this.nf_pedmp="",this.loadingSave=!1,this.tituloDocumentos="",this.lineasCalculadora=[],this.loading=!0,this.loadingSimular=!1,this.fechaactual=new Date,this.fechaactualstr=(new Date).toLocaleDateString(),this.lienas=0,this.tituloUbicaciones="",this.listUbicaciones=[],this.verUbicaciones=!1,this.debouncer=new rxjs__WEBPACK_IMPORTED_MODULE_6__.x,this.ultimaTolerancia=0,this.mesesAnio=[{mes:1,mesStr:"Enero"},{mes:2,mesStr:"Febrero"},{mes:3,mesStr:"Marzo"},{mes:4,mesStr:"Abril"},{mes:5,mesStr:"Mayo"},{mes:6,mesStr:"Junio"},{mes:7,mesStr:"Julio"},{mes:8,mesStr:"Agosto"},{mes:9,mesStr:"Septiembre"},{mes:10,mesStr:"Octubre"},{mes:11,mesStr:"Noviembre"},{mes:12,mesStr:"Diciembre"}],this.editarproyeccion=!1,this.cantidadEditar=0,this.simulacionSinProyeciones=[],this.simulacionConProyeciones=[],this.simulacionSinTransitoMP=[],this.loadingGrabarSimulacion=!1}ngOnInit(){this.getItems(),this.getZonas(),this.getSeries(),this.getInfoUsuario(),this.getPerfilesUsuario(),this.getPermisosUsuario(),this.getPermisosUsuarioPagina(),this.getDependenciasUsuario(),this.getProveedores(),this.getMonedas(new Date),this.getImpuestos(),this.debouncer.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_7__.b)(300)).subscribe(_=>{this.cambioTolerancia({value:_})}),this.fechaInicioSemana(new Date("12/20/2022"))}getInfoUsuario(){this.infoUsuario=this.authService.getInfoUsuario()}getPerfilesUsuario(){this.perfilesUsuario=this.authService.getPerfilesUsuario()}getPermisosUsuario(){this.permisosUsuario=this.authService.getPermisosUsuario()}getPermisosUsuarioPagina(){let _="";if(this.rutaActiva.snapshot.params.entrada){let a=this.rutaActiva.snapshot.params;this.router.url.indexOf("/"+a.entrada)>=0&&(_=this.router.url.substring(0,this.router.url.indexOf("/"+a.entrada)))}else _=this.router.url;this.urlBreadCrumb=_,this.permisosUsuarioPagina=this.permisosUsuario.filter(a=>a.url===_),console.log(this.permisosUsuarioPagina)}getItems(){this.sapService.itemsSAPXE(this.authService.getToken()).subscribe({next:_=>{for(let a in _)this.items.push(_[a]);this.getItemsMP()},error:_=>{}})}getItemsMP(){this.comprasService.getPresupuestosVentaAll(this.authService.getToken()).subscribe({next:_=>{let a,e;for(let r of _)0===this.itemsMP.filter(o=>o.ItemCode==r.itemcode).length&&this.items.filter(o=>o.ItemCode==r.itemcode).length>0&&(a=this.items.filter(o=>o.ItemCode==r.itemcode)[0].ItemName,e=this.items.filter(o=>o.ItemCode==r.itemcode)[0].ApTaxCode,this.itemsMP.push({ItemCode:r.itemcode,ItemName:a,ApTaxCode:e}));this.getZonas()},error:_=>{}})}getZonas(){this.comprasService.getZonas(this.authService.getToken()).subscribe({next:_=>{this.zonas=_},error:_=>{}})}getDependenciasUsuario(){this.authService.getDependeciasUsuarioXE().subscribe({next:_=>{for(let a in _)this.dependenciasUsuario.push(_[a]);setTimeout(()=>{let a=this.dependenciasUsuario.filter(e=>"VPCADSU2"===e.dependence&&"VPCADSUM"===e.vicepresidency);for(let e of a)0===this.localidades.filter(r=>r.location===e.location).length&&this.localidades.push(e);0==this.localidades.length&&(this.localidades=[{codusersap:this.infoUsuario.codusersap,dependence:"VPCADSU2",location:"SANTAMAR",vicepresidency:"VPCADSUM",id:0},{codusersap:this.infoUsuario.codusersap,dependence:"VPCADSU2",location:"BVENTURA",vicepresidency:"VPCADSUM",id:1}])},500)},error:_=>{}})}getProveedores(){this.sapService.BusinessPartnersXE(this.authService.getToken()).subscribe({next:_=>{for(let a in _)this.proveedores.push(_[a])},error:_=>{}})}getInventariosMP(){let _={item:this.item.ItemCode,zona:this.zona.State};this.comprasService.getInventariosMpXE(this.authService.getToken(),_).subscribe({next:a=>{this.inventariosMP=a,this.ubicacionesInventarioMP=a.ubicacionInvetarioMP,this.ubicacionesInventarioPT=a.ubicacionInvetarioPT,this.getInventariosTracking()},error:a=>{}})}getInventariosTracking(){let _={item:this.item.ItemCode,zona:this.zona.State,fechainicio:this.fechaactual,fechafin:this.fechaProyeccion};this.comprasService.getInventariosTracking(this.authService.getToken(),_).subscribe({next:a=>{this.inventarioTramsitoMP=a.inventarioItemTransito,this.inventarioSolicitadoMP=a.inventarioItenSolicitado,this.inventarioTramsitoMPPreFecha=a.inventarioItemTransitoPreFecha,this.inventarioSolicitadoMPPreFecha=a.inventarioItenSolicitadoPreFecha,this.inventarioProyectadoMP=a.comprasProyectadasMP,this.inventarioItemZF=a.inventarioItemZF,this.totalInicialMPZF=a.totalInventarioItemZF,this.gePresupuestoItemZona()},error:a=>{}})}gePresupuestoItemZona(){var _=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__.Z)(function*(){let a=yield _.fechaInicioSemana(new Date(_.fechaactual)),e={item:_.item.ItemCode,zona:_.zona.State,fechainicio:a,fechafin:_.fechaProyeccion};_.comprasService.getPresupuestosVenta(_.authService.getToken(),e).subscribe({next:r=>{_.presupuestoMPVenta=r,_.getMaxMinItemZona()},error:r=>{}})})()}getMaxMinItemZona(){let _={item:this.item.ItemCode,zona:this.zona.State};this.comprasService.getMaxMinItemZona(this.authService.getToken(),_).subscribe({next:a=>{a.length>0&&(this.maxMpZona=a[0].maximo,this.minMpZona=a[0].minimo),this.calcularLineas()},error:a=>{}})}SeleccionarZona(){this.getAlmacenesMPSL()}getAlmacenesMPSL(){this.sapService.getAlmacenesMPSL(this.authService.getToken()).subscribe({next:_=>{let a=[];for(let e in _.value)a.push({store:_.value[e].WarehouseCode,storename:_.value[e].WarehouseName,zonacode:_.value[e].State});this.almacenes=a.filter(e=>e.zonacode==this.zona.State)},error:_=>{}})}getImpuestos(){this.comprasService.taxesXE(this.authService.getToken()).subscribe({next:_=>{for(let a in _)this.impuestos.push(_[a]);this.SeleccionarImpuesto()},error:_=>{}})}getMonedas(_){this.sapService.monedasXEngineSAP(this.authService.getToken(),_.toISOString()).subscribe({next:a=>{this.monedas=[{Currency:"COP",TRM:1}];for(let e in a)this.monedas.push(a[e]);this.setearTRMSolped("USD")},error:a=>{}})}getSeries(){this.sapService.seriesDocXEngineSAP(this.authService.getToken(),"1470000113").subscribe({next:_=>{for(let a in _)"SPMP"==_[a].name&&this.series.push(_[a]);this.serie=this.series[0].code,this.serieName=this.series[0].name},error:_=>{}})}getUnidadItemSL(){this.sapService.getUnidadItemSL(this.authService.getToken(),this.item.ItemCode).subscribe({next:_=>{this.unidad=_.value[0].PurchaseUnit},error:_=>{}})}setearTRMSolped(_){this.monedas.filter(a=>a.Currency===_).length>0?(this.trm=this.monedas.filter(a=>a.Currency===_)[0].TRM,this.moneda=_):this.trm=0}fechaInicioSemana(_){let a=new Date(_),r=(0==_.getUTCDay()?1:_.getUTCDay())-1;return a.setDate(_.getDate()-r),a}siguienteMes(_){let a=11==_.getMonth()?_.getFullYear()+1:_.getFullYear(),e=11==_.getMonth()?0:_.getMonth()+1;return new Date(a,e,1)}semanaDelMes(_){var a=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__.Z)(function*(){let e="",r=_;r.setHours(0,0,0);let o=yield a.siguienteMes(_);o.setHours(0,0,0);let i=yield a.fechaInicioSemana(o);i.setHours(0,0,0);let c=r.getDate(),P=r.getDay(),u=Math.ceil((c-1-P)/7),p=a.mesesAnio.filter(d=>d.mes===r.getMonth()+1)[0].mesStr.substring(0,3).toUpperCase();return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()&&r.getDate()===i.getDate()&&(u=0,p=a.mesesAnio.filter(d=>d.mes===o.getMonth()+1)[0].mesStr.substring(0,3).toUpperCase()),e=`${u+1}S - ${p}`,e})()}PresionaEnter(_){"Enter"===_.key&&(""===_.target.value&&(_.target.value=0),this.recalcular())}calcularLineas(){var _this3=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__.Z)(function*(){_this3.simulacionConProyeciones=[];let fechaInicioCalculadora=new Date(_this3.fechaactual),fechaFinalCalculadora=new Date(_this3.fechaProyeccion),semanaFecha,fechasemana,semanaMes="",inventarioSemanaMP=_this3.getInventarioInicial("MP"),inventarioSemanaPT=_this3.getInventarioInicial("PT"),inventarioSemanaMPZF=_this3.totalInicialMPZF,inventarioSemanaMPTR=0,compraSolicitadaMP=0,compraProyectadaMP=0,presupuestoVentaMP=0,inventarioFinalSemanaMP=0,inventarioTransitoProxima=0,compraSolicitadaProximaSemana=0,compraProyectadaProximaSemana=0,presupuestoProximaSemana=0,inventarioFinalProximaSemana=0,necesidadCompra="",cantidadCompraSugerida=0,inventarioFinalSemanaSugerido=0,estadoCompra=!1,inventarioSolicitadoMPPreFecha=_this3.calcularComprasSolicitadasPreFecha(),inventarioTramsitoMPPreFecha=_this3.calcularInventarioTRPreFecha(),lineaid=0,infoLinea,infoLineaSimulacion;for(;fechaInicioCalculadora<=fechaFinalCalculadora;fechaInicioCalculadora.setDate(fechaInicioCalculadora.getDate()+1))semanaFecha=_this3.numeroDeSemana(fechaInicioCalculadora),fechasemana=fechaInicioCalculadora,0==_this3.lineasCalculadora.filter(_=>_.semana==semanaFecha).length&&(semanaMes=yield _this3.semanaDelMes(new Date(fechaInicioCalculadora)),inventarioSemanaMPTR=(yield _this3.calcularInventarioSemanaTR(semanaFecha))+inventarioTramsitoMPPreFecha,compraSolicitadaMP=(yield _this3.calcularComprasSolicitadasSemana(semanaFecha))+inventarioSolicitadoMPPreFecha,compraProyectadaMP=yield _this3.calcularComprasProyectadasSemana(semanaFecha),presupuestoVentaMP=yield _this3.calcularPresupuestoSemana(semanaFecha),inventarioFinalSemanaMP=inventarioSemanaMP+inventarioSemanaPT+inventarioSemanaMPZF+inventarioSemanaMPTR+compraSolicitadaMP+compraProyectadaMP-presupuestoVentaMP,inventarioFinalSemanaMP=inventarioFinalSemanaMP<0?0:inventarioFinalSemanaMP,estadoCompra=0!=compraProyectadaMP,inventarioTransitoProxima=yield _this3.calcularInventarioSemanaTR(semanaFecha+1),compraSolicitadaProximaSemana=yield _this3.calcularComprasSolicitadasSemana(semanaFecha+1),compraProyectadaProximaSemana=yield _this3.calcularComprasProyectadasSemana(semanaFecha+1),presupuestoProximaSemana=yield _this3.calcularPresupuestoSemana(eval(semanaFecha)+1),inventarioFinalProximaSemana=inventarioFinalSemanaMP+inventarioTransitoProxima+compraSolicitadaProximaSemana+compraProyectadaProximaSemana-presupuestoProximaSemana,necesidadCompra=inventarioFinalProximaSemana<_this3.minMpZona?"Si":"No",cantidadCompraSugerida="Si"==necesidadCompra?eval(_this3.maxMpZona)-inventarioFinalSemanaMP:0,inventarioFinalSemanaSugerido=inventarioFinalSemanaMP+cantidadCompraSugerida,infoLinea={lineaid,fechasemana:_this3.fechaInicioSemana(new Date(fechasemana)),semana:semanaFecha,semanaMes,numeroSemanaMes:semanaMes.substring(0,1),itemSeleccionado:_this3.itemSeleccionado,zonaSeleccionada:_this3.zonaSeleccionada,inventarioSemanaMP,inventarioSemanaPT,inventarioSemanaMPZF,inventarioSemanaMPTR,compraSolicitadaMP,compraProyectadaMP,presupuestoVentaMP,presupuestoVentaMPOriginal:presupuestoVentaMP,inventarioFinalSemanaMP,estadoCompra,necesidadCompra,cantidadCompraSugerida,inventarioFinalSemanaSugerido,classCantidad:inventarioFinalSemanaMP<_this3.minMpZona?"c-min-stock":inventarioFinalSemanaMP>_this3.maxMpZona?"c-max-stock":""},infoLineaSimulacion={itemcode:_this3.item.ItemCode,codigozona:_this3.zona.State,itemname:_this3.descripcion,zona:_this3.zonaSeleccionada,fecha:_this3.fechaInicioSemana(new Date(fechasemana)),semana:semanaFecha,semanames:semanaMes,inventarioMP:inventarioSemanaMP,inventarioMPPT:inventarioSemanaPT,inventarioMPZF:inventarioSemanaMPZF,inventarioTransito:inventarioSemanaMPTR,inventarioSolped:compraSolicitadaMP,inventarioProyecciones:compraProyectadaMP,presupuestoConsumo:presupuestoVentaMP,inventarioFinal:inventarioFinalSemanaMP,necesidadCompra,cantidadSugerida:cantidadCompraSugerida,inventarioFinalSugerido:inventarioFinalSemanaSugerido,tipo:"CP",tolerancia:_this3.tolerancia,bodega:900==_this3.zona.State?"AD_SANTA":"AD_BVTA"},_this3.simulacionConProyeciones.push(infoLineaSimulacion),inventarioSemanaMP=inventarioFinalSemanaMP>0?inventarioFinalSemanaMP:0,inventarioSemanaPT=0,inventarioSemanaMPZF=0,inventarioSolicitadoMPPreFecha=0,inventarioTramsitoMPPreFecha=0,_this3.lineasCalculadora.push(infoLinea),lineaid++);_this3.lienas=lineaid,_this3.busqueda=!1,_this3.loadingSimular=!1,_this3.calculadora=!0,_this3.loading=!1})()}recalcular(){var _this4=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__.Z)(function*(){let lineasRecalculo=[],lineasRecalculoSimulacionCP=[],lineaid=0,infoLinea,infoLineaSimulacion,fechasemana,semana=0,semanaMes="",inventarioSemanaMP=0,inventarioSemanaMPTR=0,compraSolicitadaMP=0,presupuestoVentaMP=0,presupuestoVentaMPOriginal=0,compraProyectadaMP=0,inventarioFinalSemanaMP=0,inventarioSemanaPT=0,inventarioSemanaMPZF=0,inventarioTransitoProxima=0,compraSolicitadaProximaSemana=0,compraProyectadaProximaSemana=0,presupuestoProximaSemana=0,inventarioFinalProximaSemana=0,necesidadCompra="",cantidadCompraSugerida=0,inventarioFinalSemanaSugerido=0;for(let linea of _this4.lineasCalculadora)fechasemana=new Date(linea.fechasemana),semana=linea.semana,semanaMes=linea.semanaMes,inventarioSemanaMP=0==lineaid?linea.inventarioSemanaMP:inventarioFinalSemanaMP>0?inventarioFinalSemanaMP:0,inventarioSemanaPT=linea.inventarioSemanaPT,inventarioSemanaMPTR=linea.inventarioSemanaMPTR,inventarioSemanaMPZF=linea.inventarioSemanaMPZF,compraSolicitadaMP=linea.compraSolicitadaMP,compraProyectadaMP=linea.compraProyectadaMP,presupuestoVentaMP=linea.presupuestoVentaMP,presupuestoVentaMPOriginal=linea.presupuestoVentaMPOriginal,inventarioFinalSemanaMP=(yield eval(0==lineaid?linea.inventarioSemanaMP:inventarioFinalSemanaMP))+eval(linea.inventarioSemanaPT)+eval(linea.inventarioSemanaMPZF)+eval(linea.inventarioSemanaMPTR)+eval(linea.compraSolicitadaMP)+eval(linea.compraProyectadaMP)-eval(linea.presupuestoVentaMP),inventarioFinalSemanaMP=inventarioFinalSemanaMP<0?0:inventarioFinalSemanaMP,inventarioTransitoProxima=lineaid<_this4.lineasCalculadora.length-1?_this4.lineasCalculadora[lineaid+1].inventarioSemanaMPTR:0,compraSolicitadaProximaSemana=lineaid<_this4.lineasCalculadora.length-1?_this4.lineasCalculadora[lineaid+1].compraSolicitadaMP:0,compraProyectadaProximaSemana=lineaid<_this4.lineasCalculadora.length-1?_this4.lineasCalculadora[lineaid+1].compraProyectadaMP:0,presupuestoProximaSemana=lineaid<_this4.lineasCalculadora.length-1?_this4.lineasCalculadora[lineaid+1].presupuestoVentaMP:0,inventarioFinalProximaSemana=inventarioFinalSemanaMP+inventarioTransitoProxima+compraSolicitadaProximaSemana+compraProyectadaProximaSemana-presupuestoProximaSemana,necesidadCompra=inventarioFinalProximaSemana<_this4.minMpZona?"Si":"No",cantidadCompraSugerida="Si"==necesidadCompra?eval(_this4.maxMpZona)-inventarioFinalSemanaMP:0,inventarioFinalSemanaSugerido=inventarioFinalSemanaMP+cantidadCompraSugerida,infoLinea={lineaid,fechasemana,semana,semanaMes,itemSeleccionado:_this4.itemSeleccionado,zonaSeleccionada:_this4.zonaSeleccionada,inventarioSemanaMP,inventarioSemanaPT,inventarioSemanaMPZF,inventarioSemanaMPTR,compraSolicitadaMP,compraProyectadaMP,presupuestoVentaMP,inventarioFinalSemanaMP,presupuestoVentaMPOriginal,estadoCompra:linea.estadoCompra,necesidadCompra,cantidadCompraSugerida,inventarioFinalSemanaSugerido,classCantidad:inventarioFinalSemanaMP<_this4.minMpZona?"c-min-stock":inventarioFinalSemanaMP>_this4.maxMpZona?"c-max-stock":""},infoLineaSimulacion={itemcode:_this4.item.ItemCode,codigozona:_this4.zona.State,itemname:_this4.descripcion,zona:_this4.zonaSeleccionada,fecha:fechasemana,semana,semanames:semanaMes,numeroSemanaMes:semanaMes.substring(0,1),inventarioMP:inventarioSemanaMP,inventarioMPPT:inventarioSemanaPT,inventarioMPZF:inventarioSemanaMPZF,inventarioTransito:inventarioSemanaMPTR,inventarioSolped:compraSolicitadaMP,inventarioProyecciones:compraProyectadaMP,presupuestoConsumo:presupuestoVentaMP,inventarioFinal:inventarioFinalSemanaMP,necesidadCompra,cantidadSugerida:cantidadCompraSugerida,inventarioFinalSugerido:inventarioFinalSemanaSugerido,tipo:"CP",tolerancia:_this4.tolerancia,bodega:900==_this4.zona.State?"AD_SANTA":"AD_BVTA"},lineasRecalculo.push(infoLinea),lineasRecalculoSimulacionCP.push(infoLineaSimulacion),lineaid++;_this4.lineasCalculadora=lineasRecalculo,_this4.simulacionConProyeciones=lineasRecalculoSimulacionCP})()}simulacionSinProyeccion(){var _this5=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__.Z)(function*(){let lineasRecalculo=[],lineasRecalculoSimulacionSP=[],lineaid=0,infoLinea,infoLineaSimulacion,fechasemana,semana=0,semanaMes="",inventarioSemanaMP=0,inventarioSemanaMPTR=0,compraSolicitadaMP=0,presupuestoVentaMP=0,presupuestoVentaMPOriginal=0,compraProyectadaMP=0,inventarioFinalSemanaMP=0,inventarioSemanaPT=0,inventarioSemanaMPZF=0,inventarioTransitoProxima=0,compraSolicitadaProximaSemana=0,compraProyectadaProximaSemana=0,presupuestoProximaSemana=0,inventarioFinalProximaSemana=0,necesidadCompra="",cantidadCompraSugerida=0,inventarioFinalSemanaSugerido=0;for(let linea of _this5.lineasCalculadora)fechasemana=new Date(linea.fechasemana),semana=linea.semana,semanaMes=linea.semanaMes,inventarioSemanaMP=0==lineaid?linea.inventarioSemanaMP:inventarioFinalSemanaMP>0?inventarioFinalSemanaMP:0,inventarioSemanaPT=linea.inventarioSemanaPT,inventarioSemanaMPTR=linea.inventarioSemanaMPTR,inventarioSemanaMPZF=linea.inventarioSemanaMPZF,compraSolicitadaMP=linea.compraSolicitadaMP,compraProyectadaMP=0,presupuestoVentaMP=linea.presupuestoVentaMP,presupuestoVentaMPOriginal=linea.presupuestoVentaMPOriginal,inventarioFinalSemanaMP=(yield eval(0==lineaid?linea.inventarioSemanaMP:inventarioFinalSemanaMP))+eval(linea.inventarioSemanaPT)+eval(linea.inventarioSemanaMPZF)+eval(linea.inventarioSemanaMPTR)+eval(linea.compraSolicitadaMP)-eval(linea.presupuestoVentaMP),inventarioFinalSemanaMP=inventarioFinalSemanaMP<0?0:inventarioFinalSemanaMP,inventarioTransitoProxima=lineaid<_this5.lineasCalculadora.length-1?_this5.lineasCalculadora[lineaid+1].inventarioSemanaMPTR:0,compraSolicitadaProximaSemana=lineaid<_this5.lineasCalculadora.length-1?_this5.lineasCalculadora[lineaid+1].compraSolicitadaMP:0,compraProyectadaProximaSemana=0,presupuestoProximaSemana=lineaid<_this5.lineasCalculadora.length-1?_this5.lineasCalculadora[lineaid+1].presupuestoVentaMP:0,inventarioFinalProximaSemana=inventarioFinalSemanaMP+inventarioTransitoProxima+compraSolicitadaProximaSemana+compraProyectadaProximaSemana-presupuestoProximaSemana,necesidadCompra=inventarioFinalProximaSemana<_this5.minMpZona?"Si":"No",cantidadCompraSugerida="Si"==necesidadCompra?eval(_this5.maxMpZona)-inventarioFinalSemanaMP:0,inventarioFinalSemanaSugerido=inventarioFinalSemanaMP+cantidadCompraSugerida,infoLineaSimulacion={itemcode:_this5.item.ItemCode,codigozona:_this5.zona.State,itemname:_this5.descripcion,zona:_this5.zonaSeleccionada,fecha:fechasemana,semana,semanames:semanaMes,inventarioMP:inventarioSemanaMP,inventarioMPPT:inventarioSemanaPT,inventarioMPZF:inventarioSemanaMPZF,inventarioTransito:inventarioSemanaMPTR,inventarioSolped:compraSolicitadaMP,inventarioProyecciones:compraProyectadaMP,presupuestoConsumo:presupuestoVentaMP,inventarioFinal:inventarioFinalSemanaMP,necesidadCompra,cantidadSugerida:cantidadCompraSugerida,inventarioFinalSugerido:inventarioFinalSemanaSugerido,tipo:"SP",tolerancia:_this5.tolerancia,bodega:900==_this5.zona.State?"AD_SANTA":"AD_BVTA"},lineasRecalculoSimulacionSP.push(infoLineaSimulacion),lineaid++;_this5.simulacionSinProyeciones=lineasRecalculoSimulacionSP})()}simulacionSinTransito(){var _this6=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__.Z)(function*(){let lineasRecalculo=[],lineasRecalculoSinTransito=[],lineaid=0,infoLinea,infoLineaSimulacion,fechasemana,semana=0,semanaMes="",inventarioSemanaMP=0,inventarioSemanaMPTR=0,compraSolicitadaMP=0,presupuestoVentaMP=0,presupuestoVentaMPOriginal=0,compraProyectadaMP=0,inventarioFinalSemanaMP=0,inventarioSemanaPT=0,inventarioSemanaMPZF=0,inventarioTransitoProxima=0,compraSolicitadaProximaSemana=0,compraProyectadaProximaSemana=0,presupuestoProximaSemana=0,inventarioFinalProximaSemana=0,necesidadCompra="",cantidadCompraSugerida=0,inventarioFinalSemanaSugerido=0;for(let linea of _this6.lineasCalculadora)fechasemana=new Date(linea.fechasemana),semana=linea.semana,semanaMes=linea.semanaMes,inventarioSemanaMP=0==lineaid?linea.inventarioSemanaMP:inventarioFinalSemanaMP>0?inventarioFinalSemanaMP:0,inventarioSemanaPT=linea.inventarioSemanaPT,inventarioSemanaMPTR=0,inventarioSemanaMPZF=linea.inventarioSemanaMPZF,compraSolicitadaMP=0,compraProyectadaMP=0,presupuestoVentaMP=linea.presupuestoVentaMP,presupuestoVentaMPOriginal=linea.presupuestoVentaMPOriginal,inventarioFinalSemanaMP=(yield eval(0==lineaid?linea.inventarioSemanaMP:inventarioFinalSemanaMP))+eval(linea.inventarioSemanaPT)+eval(linea.inventarioSemanaMPZF)-eval(linea.presupuestoVentaMP),inventarioFinalSemanaMP=inventarioFinalSemanaMP<0?0:inventarioFinalSemanaMP,inventarioTransitoProxima=lineaid<_this6.lineasCalculadora.length-1?_this6.lineasCalculadora[lineaid+1].inventarioSemanaMPTR:0,compraSolicitadaProximaSemana=lineaid<_this6.lineasCalculadora.length-1?_this6.lineasCalculadora[lineaid+1].compraSolicitadaMP:0,compraProyectadaProximaSemana=0,presupuestoProximaSemana=lineaid<_this6.lineasCalculadora.length-1?_this6.lineasCalculadora[lineaid+1].presupuestoVentaMP:0,inventarioFinalProximaSemana=inventarioFinalSemanaMP+inventarioTransitoProxima+compraSolicitadaProximaSemana+compraProyectadaProximaSemana-presupuestoProximaSemana,necesidadCompra=inventarioFinalProximaSemana<_this6.minMpZona?"Si":"No",cantidadCompraSugerida="Si"==necesidadCompra?eval(_this6.maxMpZona)-inventarioFinalSemanaMP:0,inventarioFinalSemanaSugerido=inventarioFinalSemanaMP+cantidadCompraSugerida,infoLineaSimulacion={itemcode:_this6.item.ItemCode,codigozona:_this6.zona.State,itemname:_this6.descripcion,zona:_this6.zonaSeleccionada,fecha:fechasemana,semana,semanames:semanaMes,inventarioMP:inventarioSemanaMP,inventarioMPPT:inventarioSemanaPT,inventarioMPZF:inventarioSemanaMPZF,inventarioTransito:inventarioSemanaMPTR,inventarioSolped:compraSolicitadaMP,inventarioProyecciones:compraProyectadaMP,presupuestoConsumo:presupuestoVentaMP,inventarioFinal:inventarioFinalSemanaMP,necesidadCompra,cantidadSugerida:cantidadCompraSugerida,inventarioFinalSugerido:inventarioFinalSemanaSugerido,tipo:"ST",tolerancia:_this6.tolerancia,bodega:900==_this6.zona.State?"AD_SANTA":"AD_BVTA"},lineasRecalculoSinTransito.push(infoLineaSimulacion),lineaid++;_this6.simulacionSinTransitoMP=lineasRecalculoSinTransito})()}filtrarItems(_){let a=[],e=_.query;for(let r=0;r<this.itemsMP.length;r++){let o=this.itemsMP[r];(o.ItemCode.toLowerCase().indexOf(e.toLowerCase())>=0||o.ItemName.toLowerCase().indexOf(e.toLowerCase())>=0)&&a.push(o)}this.itemsFiltrados=a}SeleccionarItemCode(){this.descripcion=this.item.ItemName,this.itemSeleccionado=this.item.ItemCode+" - "+this.item.ItemName,this.getUnidadItemSL()}GuardarSimulacion(){var _=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__.Z)(function*(){yield _.simulacionSinProyeccion(),yield _.simulacionSinTransito(),_.messageService.add({key:"confirmGuardarSimulacion",sticky:!0,severity:"warn",summary:"Confirmaci\xf3n cargue simulaci\xf3n",detail:"\xbfEsta seguro de grabar la simulaci\xf3n de la proyecci\xf3n de compra?"})})()}onConfirmGS(){this.messageService.clear("confirmGuardarSimulacion"),this.loadingGrabarSimulacion=!0;let _={simulacionConProyeciones:this.simulacionConProyeciones,simulacionSinProyeciones:this.simulacionSinProyeciones,simulacionSinTransitoMP:this.simulacionSinTransitoMP};this.comprasService.grabarSimulaciones(this.authService.getToken(),_).subscribe({next:a=>{this.messageService.add({severity:"success",summary:"!Ok\xa1",detail:a.message}),this.loadingGrabarSimulacion=!1},error:a=>{this.messageService.add({severity:"error",summary:"!Error",detail:a}),this.loadingGrabarSimulacion=!1}})}onRejectGS(){this.messageService.clear("confirmGuardarSimulacion")}anularProyeccion(_,a){this.messageService.add({key:"confirmAnularProyeccion",sticky:!0,severity:"warn",summary:"Confirmaci\xf3n anulaci\xf3n de proyecci\xf3n",detail:`\xbfEsta seguro de anular la  proyecci\xf3n de compra  ${_}?`,data:{idProyeccion:_,semana:a}})}onRejectAP(){this.messageService.clear("confirmAnularProyeccion")}onConfirmAP(_,a){this.messageService.clear("confirmAnularProyeccion"),this.comprasService.cancelacionSolped(this.authService.getToken(),[_]).subscribe({next:e=>{if("ok"==e.status){this.messageService.add({key:"tl",severity:"success",summary:"!Ok",detail:"La cancelaci\xf3n del documento seleccionado fue realizado correctamente"});let o=this.inventarioProyectadoMP.findIndex(u=>u.DocNum==_);this.inventarioProyectadoMP.splice(o,1);let i=this.inventarioProyectadoMP.filter(u=>this.numeroDeSemana(new Date(u.FECHANECESIDAD))===a),c=0;for(let u of i)c+=u.Quantity;let P=this.lineasCalculadora.findIndex(u=>u.semana==a);this.lineasCalculadora[P].compraProyectadaMP=c,this.verdocumentos=!1,this.recalcular()}else this.messageService.add({key:"tl",severity:"error",summary:"!Error",detail:e.message}),this.loading=!1},error:e=>{this.loading=!1,this.messageService.add({key:"tl",severity:"error",summary:"!Error",detail:e})}})}editarProyeccion(_,a,e){this.editarproyeccion=!0,this.cantidadEditar=_,this.fechaEditar=new Date(a)}guardarProyeccion(_,a,e,r,o){this.messageService.add({key:"confirmEditarProyeccion",sticky:!0,severity:"warn",summary:"Confirmaci\xf3n de edici\xf3n de proyecci\xf3n",detail:`\xbfEsta seguro de realizar la actualizaci\xf3n de la cantidad de la proyecci\xf3n de compra  ${_}?`,data:{idProyeccion:_,cantidadProyectada:a,semana:e,fechaEditar:r,linenum:o}})}onRejectCEP(){this.messageService.clear("confirmEditarProyeccion"),this.editarproyeccion=!1}onConfirmCEP(_,a,e,r,o){this.messageService.clear("confirmEditarProyeccion"),this.editarproyeccion=!1;let i={idProyeccion:_,cantidadProyectada:a,item:this.item.ItemCode,fechaEditar:r,linenum:o};this.comprasService.updateCantidadSolped(this.authService.getToken(),i).subscribe({next:c=>{let P=this.numeroDeSemana(r),u=this.inventarioProyectadoMP.findIndex(g=>g.DocNum==_);this.inventarioProyectadoMP[u].Quantity=a,this.inventarioProyectadoMP[u].FECHANECESIDAD=r;let p=this.inventarioProyectadoMP.filter(g=>this.numeroDeSemana(new Date(g.FECHANECESIDAD))===e),d=0;for(let g of p)d+=g.Quantity;let D=this.lineasCalculadora.findIndex(g=>g.semana==e);if(console.log(this.lineasCalculadora[D]),this.lineasCalculadora[D].compraProyectadaMP=d,d<=0&&(this.lineasCalculadora[D].estadoCompra=!1),P!=e){let g=this.inventarioProyectadoMP.filter(A=>this.numeroDeSemana(new Date(A.FECHANECESIDAD))===P),T=0;for(let A of g)T+=A.Quantity;let n=this.lineasCalculadora.findIndex(A=>A.semana==P);console.log(this.lineasCalculadora[n]),this.lineasCalculadora[n].compraProyectadaMP=T,this.lineasCalculadora[n].estadoCompra=!0}this.recalcular(),this.verdocumentos=!1,this.messageService.add({severity:"success",summary:"!Ok\xa1",detail:c.message})},error:c=>{this.messageService.add({severity:"error",summary:"!Error",detail:c})}}),this.editarproyeccion=!1}clearItemCode(){}cambio(_){""===_.target.value&&(_.target.value=0),this.recalcular()}modificaTolerancia(){this.debouncer.next(this.tolerancia)}cambioTolerancia(_){for(let a of this.lineasCalculadora)a.presupuestoVentaMP=a.presupuestoVentaMPOriginal+a.presupuestoVentaMPOriginal*(_.value/100);this.recalcular()}validarFP(){let _=!1;return this.fechaProyeccionstr=this.fechaProyeccion.toLocaleDateString(),this.fechaactual=new Date,new Date(this.fechaProyeccion)>new Date(this.fechaactual)?(_=!0,this.errorFP=!1):(this.errorFP=!0,this.messageService.add({severity:"error",summary:"!Error",detail:"La fecha de proyecci\xf3n no puede ser menor o igual a la fecha actual"})),_}simular(){var _=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__.Z)(function*(){_.busqueda=!0,(yield!_.validarFP())||(_.item&&_.zona&&""!=_.descripcion?(_.lineasCalculadora=[],_.maxMpZona=0,_.minMpZona=0,_.loadingSimular=!0,_.presupuestoMPVenta=[],_.inventarioTramsitoMP=[],_.inventarioSolicitadoMP=[],_.totalInicialMPZF=0,_.zonaSeleccionada=_.zona.PENTRADA,_.getInventariosMP()):_.messageService.add({severity:"error",summary:"!Error",detail:"Debe diligenciar los campos resaltados en rojo"}))})()}reset(){}clearItem(){this.descripcion=""}calcularPresupuestoSemana(semanaFecha){let presupuestoVentaMP=0;if(this.presupuestoMPVenta.length>0&&this.presupuestoMPVenta.filter(_=>_.semana==semanaFecha).length>0){let filas=this.presupuestoMPVenta.filter(_=>_.semana==semanaFecha);for(let fila of filas)presupuestoVentaMP+=eval(fila.cantidad)}return presupuestoVentaMP}calcularComprasProyectadasSemana(semanaFecha){let compraProyectadaMP=0;if(this.inventarioProyectadoMP.length>0&&this.inventarioProyectadoMP.filter(_=>this.numeroDeSemana(new Date(_.FECHANECESIDAD))==semanaFecha).length>0){let filas=this.inventarioProyectadoMP.filter(_=>this.numeroDeSemana(new Date(_.FECHANECESIDAD))==semanaFecha);for(let fila of filas)compraProyectadaMP+=eval(fila.Quantity)}return compraProyectadaMP}calcularComprasSolicitadasSemana(semanaFecha){let compraSolicitadaMP=0;if(this.inventarioSolicitadoMP.length>0&&this.inventarioSolicitadoMP.filter(_=>this.numeroDeSemana(new Date(_.FECHANECESIDAD))==semanaFecha).length>0){let filas=this.inventarioSolicitadoMP.filter(_=>this.numeroDeSemana(new Date(_.FECHANECESIDAD))==semanaFecha);for(let fila of filas)compraSolicitadaMP+=eval(fila.OpenCreQty)}return compraSolicitadaMP}calcularComprasSolicitadasPreFecha(){let compraSolicitadaMP=0,filas=this.inventarioSolicitadoMPPreFecha;for(let fila of filas)compraSolicitadaMP+=eval(fila.OpenCreQty);return compraSolicitadaMP}calcularInventarioSemanaTR(semanaFecha){let inventarioSemanaMPTR=0;if(this.inventarioTramsitoMP.length>0&&this.inventarioTramsitoMP.filter(_=>this.numeroDeSemana(new Date(_.ETA))==semanaFecha).length>0){let filas=this.inventarioTramsitoMP.filter(_=>this.numeroDeSemana(new Date(_.ETA))==semanaFecha);for(let fila of filas)inventarioSemanaMPTR+=eval(fila.OpenCreQty)}return inventarioSemanaMPTR}calcularInventarioTRPreFecha(){let inventarioSemanaMPTR=0,filas=this.inventarioTramsitoMPPreFecha;for(let fila of filas)inventarioSemanaMPTR+=eval(fila.OpenCreQty);return inventarioSemanaMPTR}SeleccionarLinea(){}getInventarioInicial(_){let a=0;return"MP"===_&&(a=this.inventariosMP.inventarioMP),"PT"===_&&(a=this.inventariosMP.inventarioPT),a}verUbicacionesTipoInv(_){"MP"===_&&this.verUbicacionesInventario(this.ubicacionesInventarioMP,"Ubicaciones de Materia prima"),"PT"===_&&this.verUbicacionesInventario(this.ubicacionesInventarioPT,"Ubicaciones de Materia prima en producto terminado")}verproyecciones(_){let a=this.inventarioProyectadoMP.filter(e=>this.numeroDeSemana(new Date(e.FECHANECESIDAD))===_);this.generarListaDocumentos(a,"Proyecci\xf3n de compra item",_)}versolicitudes(_){let a=this.inventarioSolicitadoMP.filter(e=>this.numeroDeSemana(new Date(e.FECHANECESIDAD))===_);0==this.lineasCalculadora.findIndex(e=>e.semana===_)&&this.inventarioSolicitadoMPPreFecha.length>0&&(a=a.concat(this.inventarioSolicitadoMPPreFecha)),this.generarListaDocumentos(a,"Solicitud de compra item")}verpedidostransito(_){let a=this.inventarioTramsitoMP.filter(e=>this.numeroDeSemana(new Date(e.ETA))===_);0==this.lineasCalculadora.findIndex(e=>e.semana===_)&&this.inventarioTramsitoMPPreFecha.length>0&&(a=a.concat(this.inventarioTramsitoMPPreFecha)),this.generarListaDocumentos(a,"Pedidos item en transito")}verpedidoszf(_){this.generarListaDocumentos(this.inventarioItemZF,"Pedidos item en Zona franca")}generarListaDocumentos(_,a,e){this.tituloDocumentos=a,this.listDocumentos=[];for(let r of _)this.listDocumentos.push({titulo:a,docnum:r.DocNum,proveedor:r.LineVendor,fechadoc:r.FECHANECESIDAD,eta:r.ETA,item:this.itemSeleccionado,cantidad:"Proyectado"!=r.TIPO?r.OpenCreQty:r.Quantity,tipo:r.TIPO,cantidadPedida:r.Quantity,U_NF_DATEOFSHIPPING:r.U_NF_DATEOFSHIPPING,U_NF_LASTSHIPPPING:r.U_NF_LASTSHIPPPING,U_NF_MOTONAVE:r.U_NF_MOTONAVE,U_NF_STATUS:r.U_NF_STATUS,CardName:r.CardName?r.CardName:"",semana:e,linenum:r.linenum?r.linenum:0});this.verdocumentos=!0}verUbicacionesInventario(_,a){this.tituloUbicaciones=a,this.listUbicaciones=[];for(let e of _)this.listUbicaciones.push({INVENTARIO:e.INVENTARIO,ItemCode:e.ItemCode,ItemName:e.ItemCode+" - "+e.ItemName,WhsCode:e.WhsCode,WhsName:e.WhsName,OnHand:e.OnHand,Location:e.Location,LOCACION:e.LOCACION,State:e.State,PENTRADA:e.PENTRADA});this.verUbicaciones=!0}GuardarProyecciones(){0==this.lineasCalculadora.length?this.messageService.add({severity:"error",summary:"!Error",detail:"No existen lineas de proyecci\xf3n para el item y zona seleccinada"}):0==this.lineasCalculadora.filter(_=>_.compraProyectadaMP>0&&!_.estadoCompra).length?this.messageService.add({severity:"error",summary:"!Error",detail:"No ha registrado proyecciones de compra a guardar"}):(this.fechasycantidades=this.lineasCalculadora.filter(_=>_.compraProyectadaMP>0&&!_.estadoCompra),this.resetearFormularioLinea(),this.formularioLinea=!0)}onReject(){this.messageService.clear("confirm"),this.formularioLinea=!1,this.resetearFormularioLinea(),this.envioLinea=!1}onConfirm(){var _=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_8__.Z)(function*(){_.messageService.clear("confirm"),_.loadingSave=!0;var r,a=!1,e=!1;try{for(var i,o=(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncIterator_js__WEBPACK_IMPORTED_MODULE_9__.Z)(_.fechasycantidades);a=!(i=yield o.next()).done;a=!1){let c=i.value;{let P={solped:{id_user:_.infoUsuario.id,usersap:_.infoUsuario.codusersap,fullname:_.infoUsuario.fullname,serie:_.serie,doctype:"I",docdate:new Date,docduedate:new Date,taxdate:new Date,reqdate:c.fechasemana,sapdocnum:0,u_nf_depen_solped:"VPCADSU2",comments:"",trm:_.trm,currency:_.currency,nf_agente:"",nf_pago:"",nf_tipocarga:_.nf_tipocarga,nf_puertosalida:"",nf_motonave:"",u_nf_status:"Proyectado",nf_pedmp:_.nf_pedmp,nf_Incoterms:""},solpedDet:[{id_solped:0,linenum:0,id_user:_.infoUsuario.id,reqdatedet:c.fechasemana,linevendor:_.proveedor.CardCode,itemcode:_.item.ItemCode,dscription:_.item.ItemName,ocrcode3:_.viceprecidencia,ocrcode2:_.dependencia,ocrcode:_.localidad.location,whscode:""!=_.almacen?_.almacen.store:"SM_N300",acctcode:"",acctcodename:"",quantity:c.compraProyectadaMP,moneda:_.moneda,price:0,trm:_.trm,linetotal:0,tax:_.item.ApTaxCode,taxvalor:0,linegtotal:0,unidad:_.unidad,zonacode:_.zona.State}]};_.registrarSolped(P)}}}catch(c){e=!0,r=c}finally{try{a&&null!=o.return&&(yield o.return())}finally{if(e)throw r}}_.formularioLinea=!1,_.resetearFormularioLinea(),_.envioLinea=!1,_.loadingSave=!1})()}registrarSolped(_){this.comprasService.saveSolpedMP(this.authService.getToken(),_).subscribe({next:a=>{if(501===a.status)this.messageService.add({severity:"error",summary:"!Error",detail:JSON.stringify(a.err)});else{this.messageService.add({severity:"success",summary:"!Ok\xa1",detail:a.message});let e=a.solpednum,r=this.lineasCalculadora.map(o=>o.fechasemana).indexOf(_.solped.reqdate);this.lineasCalculadora[r].estadoCompra=!0,this.inventarioProyectadoMP.push({BaseRef:"",CANCELED:"",CardCode:"",DocCur:"",DocNum:e,DocStatus:"O",ETA:_.solped.reqdate,FECHANECESIDAD:_.solped.reqdate,ItemCode:_.solpedDet[0].itemcode,LineVendor:_.solpedDet[0].linevendor,OpenCreQty:"",PENTRADA:"",Price:_.solpedDet[0].price,Quantity:_.solpedDet[0].quantity,Rate:_.solpedDet[0].trm,State_Code:_.solpedDet[0].zonacode,TIPO:_.solped.u_nf_status,U_NF_AGENTE:_.solped.nf_agente,U_NF_DATEOFSHIPPING:_.solped.nf_dateofshipping,U_NF_LASTSHIPPPING:_.solped.nf_lastshippping,U_NF_MOTONAVE:_.solped.nf_motonave,U_NF_PEDMP:_.solped.nf_pedmp,U_NF_PUERTOSALIDA:_.solped.nf_puertosalida,U_NF_STATUS:_.solped.u_nf_status,U_NT_Incoterms:_.solped.nf_Incoterms,WhsCode:_.solpedDet[0].whscode})}},error:a=>{}})}numeroDeSemana(_){let o=(_=new Date(Date.UTC(_.getFullYear(),_.getMonth(),_.getDate()))).getUTCDay();0===o&&(o=7),_.setUTCDate(_.getUTCDate()-o+4);const i=new Date(Date.UTC(_.getUTCFullYear(),0,1));return Math.ceil(((_-i)/864e5+1)/7)}calcularSubtotalLinea(){this.monedas.filter(a=>a.Currency===this.moneda),this.subtotalLinea=this.cantidad&&this.precio?this.cantidad*this.precio:0,this.calcularImpuesto()}SeleccionarImpuesto(){this.impuesto?(this.prcImpuesto=this.impuesto.tax,this.calcularImpuesto()):this.prcImpuesto=0}calcularImpuesto(){this.valorImpuesto=this.impuesto.tax&&0!=this.subtotalLinea?this.subtotalLinea*(this.impuesto.tax/100):0,this.calcularTotalLinea()}calcularTotalLinea(){this.totalLinea=this.subtotalLinea+this.valorImpuesto}SeleccionarMoneda(){this.currency=this.monedas.filter(_=>_.Currency===this.moneda)[0].Currency,this.calcularSubtotalLinea()}RegistrarLinea(){this.envioLinea=!0,this.messageService.add(this.localidad.location&&this.almacen?{key:"confirm",sticky:!0,severity:"warn",summary:"Confirmaci\xf3n de registro de proyecci\xf3n",detail:`\xbfEsta seguro de realizar el registro de la proyecci\xf3n de compra realizada para el item ${this.itemSeleccionado}?`}:{severity:"error",summary:"!Error",detail:"Debe diligenciar los campos resaltados en rojo"})}resetearFormularioLinea(){this.fechaRequerida=new Date,this.proveedor={CardCode:"PE821401799",CardName:"NITRON GROUP"},this.proveedoresFiltrados=[],this.itemsFiltrados=[],this.localidad={codusersap:"",dependence:"",id:0,location:"",vicepresidency:""},this.almacen="",this.cantidad=1,this.moneda=this.lineasSolped.length>0?this.lineasSolped[0].moneda||"COP":"USD",this.precio=0,this.subtotalLinea=0,this.impuesto="",this.prcImpuesto=0,this.valorImpuesto=0,this.totalLinea=0}asignarCamposLinea(_){this.lineaSolped={id_solped:0,linenum:_,id_user:this.infoUsuario.id,reqdatedet:this.fechaRequerida,linevendor:this.proveedor.CardCode,itemcode:this.item.ItemCode,dscription:this.descripcion,ocrcode3:this.viceprecidencia,ocrcode2:this.dependencia,ocrcode:this.localidad.location,whscode:""!=this.almacen?this.almacen.store:"SM_N300",acctcode:"",acctcodename:"",quantity:this.cantidad,moneda:this.moneda,price:this.precio,trm:this.trm,linetotal:this.subtotalLinea,tax:this.impuesto.Code,taxvalor:this.valorImpuesto,linegtotal:this.totalLinea,unidad:this.unidad,zonacode:this.zonaSeleccionada}}filtrarProveedores(_){let e,a=[],r=_.query;for(let o=0;o<this.proveedores.length;o++)e=this.proveedores[o],(e.CardCode.toLowerCase().indexOf(r.toLowerCase())>=0||e.CardName.toLowerCase().indexOf(r.toLowerCase())>=0)&&a.push(e);this.proveedoresFiltrados=a}formatCurrency(_){return _.toLocaleString("en-US",{style:"currency",currency:"USD"})}onGlobalFilter(_,a){_.filterGlobal(a.target.value,"contains")}clear(_){_.clear(),this.filter.nativeElement.value=""}exportExcel(){__webpack_require__.e(574).then(__webpack_require__.bind(__webpack_require__,574)).then(_=>{const e={Sheets:{data:_.utils.json_to_sheet(this.lineasCalculadora)},SheetNames:["data"]},r=_.write(e,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(r,`simulacion_${this.itemSeleccionado}_${this.zonaSeleccionada}_${this.fechaactualstr.replace("/","")}_${this.fechaProyeccionstr.replace("/","")}`)})}saveAsExcelFile(_,a){const o=new Blob([_],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});file_saver__WEBPACK_IMPORTED_MODULE_0__.saveAs(o,a+"_export_"+(new Date).getTime()+".xlsx")}}MrpComponent.\u0275fac=function _(a){return new(a||MrpComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_10__.gz),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(src_app_demo_service_compras_service__WEBPACK_IMPORTED_MODULE_1__.K),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_10__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(primeng_api__WEBPACK_IMPORTED_MODULE_11__.YP),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(primeng_api__WEBPACK_IMPORTED_MODULE_11__.ez),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(src_app_demo_service_auth_service__WEBPACK_IMPORTED_MODULE_2__.e),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Y36(src_app_demo_service_sap_service__WEBPACK_IMPORTED_MODULE_3__.c))},MrpComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_5__.Xpm({type:MrpComponent,selectors:[["app-mrp"]],viewQuery:function _(a,e){if(1&a&&_angular_core__WEBPACK_IMPORTED_MODULE_5__.Gf(_c0,5),2&a){let r;_angular_core__WEBPACK_IMPORTED_MODULE_5__.iGM(r=_angular_core__WEBPACK_IMPORTED_MODULE_5__.CRH())&&(e.filter=r.first)}},features:[_angular_core__WEBPACK_IMPORTED_MODULE_5__._Bn([primeng_api__WEBPACK_IMPORTED_MODULE_11__.ez,primeng_api__WEBPACK_IMPORTED_MODULE_11__.YP])],decls:106,vars:92,consts:[["key","confirmAnularProyeccion",3,"baseZIndex","onClose"],["pTemplate","message"],["key","confirmEditarProyeccion",3,"baseZIndex","onClose"],["key","confirmGuardarSimulacion",3,"baseZIndex","onClose"],["key","confirm",3,"baseZIndex","onClose"],[3,"urlBreadCrumb"],[1,"grid"],[1,"col-12"],[1,"card","p-fluid"],[1,"col"],[1,"field"],["htmlFor","nombreusuario"],["pInputText","","id","nombreusuario","name","nombreusuario","type","text","required","","readonly","",1,"p-inputtext-sm",3,"ngModel","ngModelChange"],["htmlFor","fechaactual"],["pInputText","","id","fechaactual","name","fechaactual","type","text","required","","readonly","",1,"p-inputtext-sm","text-center",3,"ngModel","ngModelChange"],[1,"field","col"],["for","itemCode"],["field","ItemCode","inputStyleClass","w-full","styleClass","w-full","inputId","itemCode","panelStyleClass","text-sm sm:ml-2","placeholder","Escriba el c\xf3digo o nombre del \xedtem para buscar",3,"ngModel","showEmptyMessage","suggestions","minLength","delay","showClear","autofocus","disabled","ngClass","ngModelChange","completeMethod","onSelect","onClear"],["pTemplate","item"],["for","descripcion"],["pInputText","","id","descripcion","name","descripcion","type","text","required","","disabled","true",1,"w-full",3,"ngModel","ngClass","ngModelChange"],["htmlFor","zona"],["optionLabel","PENTRADA","filterBy","zona","placeholder","Seleccione la zona","styleClass","w-full","inputId","zona",3,"options","ngModel","filter","showClear","disabled","ngClass","ngModelChange","onChange"],["pTemplate","selectedItem"],["for","fechaProyeccion"],["inputId","fechaProyeccion","styleClass","p-calendar-sm p-inputtext-sm ","inputStyleClass","text-center","dateFormat","dd/mm/yy",3,"ngModel","showIcon","required","disabled","ngClass","ngModelChange","onSelect"],["class","field col",4,"ngIf"],["label","Simular","icon","pi pi-list","styleClass","p-button-outlined mb-2 p-button-primary p-button-sm",3,"disabled","onClick"],["header","Simulaci\xf3n calculadora",3,"visible","modal","maximizable","draggable","resizable","visibleChange"],["htmlFor","itemseleccionado"],["pInputText","","id","itemseleccionado","name","itemseleccionado","type","text","required","","readonly","",1,"p-inputtext-sm",3,"ngModel","ngModelChange"],["htmlFor","fechaProyeccion"],["pInputText","","id","fechaProyeccion","name","fechaProyeccion","type","text","required","","readonly","",1,"p-inputtext-sm","text-center",3,"ngModel","ngModelChange"],["htmlFor","zonaseleccionada"],["pInputText","","id","zonaseleccionada","name","zonaseleccionada","type","text","required","","readonly","",1,"p-inputtext-sm",3,"ngModel","ngModelChange"],["htmlFor","minMpZona"],["pInputText","","id","minMpZona","name","minMpZona","type","text","required","","readonly","",1,"p-inputtext-sm",3,"ngModel","ngModelChange"],["htmlFor","maxMpZona"],["pInputText","","id","maxMpZona","name","maxMpZona","type","text","required","","readonly","",1,"p-inputtext-sm",3,"ngModel","ngModelChange"],[1,"flex","align-items-end","flex-wrap","mb-2"],[1,"flex","text-xl","font-medium"],[1,"flex"],["pInputText","","id","tolerancia","name","tolerancia","type","number",1,"p-inputtext-sm","text-center","ml-1","mr-1",2,"width","60px",3,"ngModel","ngModelChange","input"],[1,"mt-4",3,"ngModel","min","max","ngModelChange","onSlideEnd"],["dataKey","semana","styleClass","p-datatable-gridlines p-datatable-sm","selectionMode","single","responsiveLayout","scroll",3,"value","rows","loading","rowHover","selection","selectionChange"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["pTemplate","footer"],[3,"header","visible","modal","maximizable","draggable","resizable","visibleChange"],["calss","grid",4,"ngFor","ngForOf"],["header","Informaci\xf3n adicional para generar proyecci\xf3n",3,"visible","modal","breakpoints","maximizable","draggable","resizable","visibleChange","onHide"],["pTemplate","content"],[1,"flex","flex-column",2,"flex","1"],[1,"text-center"],[1,"pi","pi-exclamation-triangle",2,"font-size","3rem"],[1,"grid","p-fluid"],[1,"col-6"],["type","button","pButton","","label","Si",1,"p-button-success",3,"click"],["type","button","pButton","","label","No",1,"p-button-secondary",3,"click"],["class","country-item country-item-value",4,"ngIf"],[1,"country-item","country-item-value"],[1,"country-item"],["mode","indeterminate"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","pTooltip","Exportar a excel","tooltipPosition","bottom","placeholder","Bottom","icon","pi pi-file-excel",1,"p-button-outlined","mb-2","mr-2","p-button-success","p-button-sm",3,"click"],[2,"width","3rem"],[1,"flex","justify-content-between","align-items-center"],[3,"value","onClick"],[2,"min-width","2rem"],[2,"min-width","7rem"],[1,"flex","justify-content-between"],[3,"click",4,"ngIf"],[3,"click"],["class","pi pi-search pt-2  p-text-secondary","style","font-size: 1rem; cursor:pointer;","pTooltip","Ver pedido Zona franca",4,"ngIf"],[2,"min-width","10rem"],[1,"pt-2"],["class","pi pi-search pt-2  p-text-secondary","style","font-size: 1rem; cursor:pointer;","pTooltip","Ver pedido",4,"ngIf"],["id","solicitud",2,"min-width","10rem"],["class","pi pi-search pt-2  p-text-secondary","style","font-size: 1rem; cursor:pointer;","pTooltip","Ver solicitudes",4,"ngIf"],["id","proyectadotrue","style","min-width: 12rem;",4,"ngIf","ngIfElse"],["elseBlock",""],["id","presupuesto",2,"min-width","7rem"],["pTooltip","Ver ubicaci\xf3n inventario",1,"pi","pi-search","pt-2","p-text-secondary",2,"font-size","1rem","cursor","pointer"],["pTooltip","Ver pedido Zona franca",1,"pi","pi-search","pt-2","p-text-secondary",2,"font-size","1rem","cursor","pointer"],["pTooltip","Ver pedido",1,"pi","pi-search","pt-2","p-text-secondary",2,"font-size","1rem","cursor","pointer"],["pTooltip","Ver solicitudes",1,"pi","pi-search","pt-2","p-text-secondary",2,"font-size","1rem","cursor","pointer"],["id","proyectadotrue",2,"min-width","12rem"],["class","pi pi-search pt-2  p-text-secondary","style","font-size: 1rem; cursor:pointer;","pTooltip","Ver proyecciones",4,"ngIf"],["pTooltip","Ver proyecciones",1,"pi","pi-search","pt-2","p-text-secondary",2,"font-size","1rem","cursor","pointer"],["id","proyectadofalse","pEditableColumn","",2,"min-width","10rem"],["pTemplate","input"],["pTemplate","output"],["pInputText","","type","number",3,"ngModel","ngModelChange","keydown.enter","blur"],["colspan","12",1,"text-center"],["icon","pi pi-save","label","Grabar simulaci\xf3n proyecciones de compra","styleClass","p-button-text",3,"click",4,"ngIf"],["icon","pi pi-close","label","Cerrar","styleClass","p-button-text",3,"click"],["icon","pi pi-save","label","Grabar proyecciones de compra","styleClass","p-button-text",3,"click",4,"ngIf"],["icon","pi pi-save","label","Grabar simulaci\xf3n proyecciones de compra","styleClass","p-button-text",3,"click"],["icon","pi pi-save","label","Grabar proyecciones de compra","styleClass","p-button-text",3,"click"],["calss","grid"],[1,"card","p-fluid","col-12"],["class","grid",4,"ngIf"],[4,"ngIf"],["style","text-align: left;","class","col",4,"ngIf"],["class","col flex justify-content-start",4,"ngIf"],[1,"col",2,"text-align","left"],[1,"col","flex","justify-content-start"],["inputId","fechaEditar","styleClass","p-calendar-sm p-inputtext-sm w-full","inputStyleClass","text-center","dateFormat","dd/mm/yy",3,"ngModel","showIcon","required","ngModelChange"],["pInputText","","id","cantidadEditar","name","cantidadEditar","type","number",1,"p-inputtext-sm","text-center",3,"ngModel","ngModelChange"],["pTooltip","Editar proyecci\xf3n",1,"pi","pi-pencil","pt-2","p-text-secondary",2,"font-size","1rem","cursor","pointer"],["pTooltip","Anular proyecci\xf3n",1,"pi","pi-trash","pt-2","p-text-secondary",2,"font-size","1rem","cursor","pointer"],["pTooltip","Actualizar proyecci\xf3n",1,"pi","pi-save","pt-2","p-text-secondary",2,"font-size","1rem","cursor","pointer"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"click"],["for","proveedor"],["field","CardCode","panelStyleClass","text-sm sm:ml-2","inputStyleClass","w-full","styleClass","w-full","inputId","proveedor2",3,"ngModel","showEmptyMessage","suggestions","minLength","delay","ngModelChange","completeMethod"],["for","itemseleccionado"],["pInputText","","id","itemseleccionado","name","itemseleccionado","type","text","required","","readonly","",1,"p-inputtext-sm","w-full",3,"ngModel","ngModelChange"],["htmlFor","nf_pedmp"],["optionLabel","option","optionValue","value","id","nf_pedmp","name","nf_pedmp","styleClass","p-dropdown-sm ","styleClass","p-dropdown-sm w-full",3,"options","ngModel","required","ngClass","ngModelChange"],["htmlFor","nf_tipocarga"],["optionLabel","tipo","optionValue","tipo","id","nf_tipocarga","name","nf_tipocarga","placeholder","Tipo de carga","styleClass","p-dropdown-sm w-full",3,"options","ngModel","required","ngModelChange"],["for","viceprecidencia"],["pInputText","","id","viceprecidencia","name","viceprecidencia","type","text","required","","readonly","",1,"p-inputtext-sm","w-full",3,"ngModel","ngModelChange"],["for","dependencia"],["pInputText","","id","dependencia","name","viceprecidependenciadencia","type","text","required","","readonly","",1,"p-inputtext-sm","w-full",3,"ngModel","ngModelChange"],["for","localidad"],["optionLabel","location","placeholder","Seleccione una localidad","filterBy","location","styleClass","w-full","inputId","localidad",3,"options","ngModel","filter","showClear","ngClass","ngModelChange"],["ocrcode",""],["for","almacen"],["optionLabel","storename","placeholder","Seleccione una almacen","filterBy","storename","styleClass","w-full","inputId","almacen",3,"options","ngModel","filter","showClear","ngClass","ngModelChange"],["for","fechasycantidades"],["id","fechasycantidades","class","grid",4,"ngFor","ngForOf"],["id","fechasycantidades",1,"grid"],["for","fechaRequerida"],["pInputText","","id","fechaRequerida","name","fechaRequerida","type","text","required","","readonly","",1,"p-inputtext-sm","text-center","w-full",3,"ngModel"],["for","cantidad"],["pInputText","","type","number","id","cantidad","placeholder","Cantidad","readonly","",1,"p-inputtext-sm","text-center","w-full",3,"ngModel","ngModelChange"],["icon","pi pi-check","label","Grabar proyecciones","styleClass","p-button-text",3,"disabled","click"]],template:function _(a,e){1&a&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(0,"p-toast"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(1,"p-toast",0),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("onClose",function(){return e.onRejectAP()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(2,MrpComponent_ng_template_2_Template,12,2,"ng-template",1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(3,"p-toast",2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("onClose",function(){return e.onRejectCEP()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(4,MrpComponent_ng_template_4_Template,12,2,"ng-template",1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(5,"p-toast",3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("onClose",function(){return e.onRejectGS()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(6,MrpComponent_ng_template_6_Template,12,2,"ng-template",1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(7,"p-toast",4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("onClose",function(){return e.onReject()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(8,MrpComponent_ng_template_8_Template,12,2,"ng-template",1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__._UZ(9,"app-breadcrumb",5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",6)(14,"div",9)(15,"div",10)(16,"label",11),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(17,"Nombre Usuario"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(18,"input",12),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.infoUsuario.fullname=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(19,"div",9)(20,"div",10)(21,"label",13),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(22,"Fecha"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(23,"input",14),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.fechaactualstr=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(24,"div",6)(25,"div",15)(26,"label",16),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(27,"C\xf3digo \xedtem"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(28,"p-autoComplete",17),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.item=o})("completeMethod",function(o){return e.filtrarItems(o)})("onSelect",function(){return e.SeleccionarItemCode()})("onClear",function(){return e.clearItem()})("onClear",function(){return e.clearItemCode()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(29,MrpComponent_ng_template_29_Template,2,2,"ng-template",18),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(30,"div",15)(31,"label",19),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(32,"Descripci\xf3n"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(33,"input",20),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.descripcion=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(34,"div",6)(35,"div",15)(36,"label",21),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(37,"Zona"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(38,"p-dropdown",22),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.zona=o})("onChange",function(){return e.SeleccionarZona()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(39,MrpComponent_ng_template_39_Template,1,1,"ng-template",23),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(40,MrpComponent_ng_template_40_Template,3,1,"ng-template",18),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(41,"div",15)(42,"label",24),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(43,"Fecha fin proyecci\xf3n"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(44,"p-calendar",25),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.fechaProyeccion=o})("onSelect",function(){return e.validarFP()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(45,MrpComponent_div_45_Template,4,3,"div",26),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(46,"div",6)(47,"div",15)(48,"p-button",27),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("onClick",function(){return e.simular()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(49,"p-dialog",28),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("visibleChange",function(o){return e.calculadora=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(50,"div",8)(51,"div",6)(52,"div",15)(53,"label",29),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(54,"Item MP"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(55,"input",30),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.itemSeleccionado=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(56,"div",15)(57,"label",13),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(58,"Fecha actual"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(59,"input",14),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.fechaactualstr=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(60,"div",15)(61,"label",31),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(62,"Fecha Proyectada"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(63,"input",32),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.fechaProyeccionstr=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(64,"div",6)(65,"div",15)(66,"label",33),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(67,"Zona"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(68,"input",34),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.zonaSeleccionada=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(69,"div",15)(70,"label",35),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(71,"Inv. Minimo x MP - Zona"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(72,"input",36),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.minMpZona=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(73,"div",15)(74,"label",37),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(75,"Inv. Maximo x MP - Zona"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(76,"input",38),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.maxMpZona=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(77,"div",6)(78,"div",15)(79,"div",39)(80,"div",40)(81,"label",33),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(82,"Tolerancia: "),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(83,"div",41)(84,"input",42),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.tolerancia=o})("input",function(){return e.modificaTolerancia()}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(85,"div",40)(86,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_5__._uU(87," %"),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(88,"p-slider",43),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("ngModelChange",function(o){return e.tolerancia=o})("onSlideEnd",function(o){return e.cambioTolerancia(o)}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(89,"p-table",44,45),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("selectionChange",function(o){return e.lineaSeleccionada=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(91,MrpComponent_ng_template_91_Template,3,0,"ng-template",46),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(92,MrpComponent_ng_template_92_Template,44,0,"ng-template",47),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(93,MrpComponent_ng_template_93_Template,57,52,"ng-template",48),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(94,MrpComponent_ng_template_94_Template,3,0,"ng-template",49),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(95,MrpComponent_ng_template_95_Template,3,0,"ng-template",50),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(96,MrpComponent_ng_template_96_Template,7,3,"ng-template",51),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(97,"p-dialog",52),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("visibleChange",function(o){return e.verdocumentos=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(98,MrpComponent_div_98_Template,33,14,"div",53),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(99,MrpComponent_ng_template_99_Template,1,0,"ng-template",51),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(100,"p-dialog",52),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("visibleChange",function(o){return e.verUbicaciones=o}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(101,MrpComponent_div_101_Template,33,8,"div",53),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(102,MrpComponent_ng_template_102_Template,1,0,"ng-template",51),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_5__.TgZ(103,"p-dialog",54),_angular_core__WEBPACK_IMPORTED_MODULE_5__.NdJ("visibleChange",function(o){return e.formularioLinea=o})("onHide",function(){return e.envioLinea=!1}),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(104,MrpComponent_ng_template_104_Template,50,33,"ng-template",55),_angular_core__WEBPACK_IMPORTED_MODULE_5__.YNc(105,MrpComponent_ng_template_105_Template,1,1,"ng-template",51),_angular_core__WEBPACK_IMPORTED_MODULE_5__.qZA()),2&a&&(_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("baseZIndex",5e3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("baseZIndex",5e3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("baseZIndex",5e3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("baseZIndex",5e3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("urlBreadCrumb",e.urlBreadCrumb),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(9),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.infoUsuario.fullname),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.fechaactualstr),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.item)("showEmptyMessage",!0)("suggestions",e.itemsFiltrados)("minLength",1)("delay",1e3)("showClear",!0)("autofocus",!0)("disabled",e.envioForm)("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_5__.VKq(79,_c2,e.busqueda&&""==e.descripcion)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.descripcion)("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_5__.VKq(81,_c2,e.busqueda&&""==e.descripcion)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("options",e.zonas)("ngModel",e.zona)("filter",!0)("showClear",!0)("disabled",e.envioForm)("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_5__.VKq(83,_c2,e.busqueda&&!e.zona)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.fechaProyeccion)("showIcon",!0)("required",!0)("disabled",e.envioForm)("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_5__.VKq(85,_c2,e.busqueda&&!e.fechaProyeccion||e.errorFP)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngIf",!0===e.loadingSimular),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("disabled",0==e.permisosUsuarioPagina.length||!e.permisosUsuarioPagina[0].read_accion||e.envioForm),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Akn(_angular_core__WEBPACK_IMPORTED_MODULE_5__.DdM(87,_c3)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("visible",e.calculadora)("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(6),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.itemSeleccionado),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.fechaactualstr),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.fechaProyeccionstr),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(5),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.zonaSeleccionada),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.minMpZona),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.maxMpZona),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(8),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.tolerancia),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngModel",e.tolerancia)("min",-100)("max",100),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("value",e.lineasCalculadora)("rows",e.lienas)("loading",e.loading)("rowHover",!0)("selection",e.lineaSeleccionada),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(8),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Akn(_angular_core__WEBPACK_IMPORTED_MODULE_5__.DdM(88,_c3)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("header",e.tituloDocumentos)("visible",e.verdocumentos)("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngForOf",e.listDocumentos),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Akn(_angular_core__WEBPACK_IMPORTED_MODULE_5__.DdM(89,_c3)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("header",e.tituloUbicaciones)("visible",e.verUbicaciones)("modal",!0)("maximizable",!0)("draggable",!1)("resizable",!1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("ngForOf",e.listUbicaciones),_angular_core__WEBPACK_IMPORTED_MODULE_5__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Akn(_angular_core__WEBPACK_IMPORTED_MODULE_5__.DdM(90,_c3)),_angular_core__WEBPACK_IMPORTED_MODULE_5__.Q6J("visible",e.formularioLinea)("modal",!0)("breakpoints",_angular_core__WEBPACK_IMPORTED_MODULE_5__.DdM(91,_c4))("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_12__.mk,_angular_common__WEBPACK_IMPORTED_MODULE_12__.sg,_angular_common__WEBPACK_IMPORTED_MODULE_12__.O5,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.Fj,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.wV,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.JJ,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.Q7,_angular_forms__WEBPACK_IMPORTED_MODULE_13__.On,primeng_autocomplete__WEBPACK_IMPORTED_MODULE_14__.Qc,primeng_api__WEBPACK_IMPORTED_MODULE_11__.jx,primeng_button__WEBPACK_IMPORTED_MODULE_15__.Hq,primeng_button__WEBPACK_IMPORTED_MODULE_15__.zx,primeng_tooltip__WEBPACK_IMPORTED_MODULE_16__.u,primeng_calendar__WEBPACK_IMPORTED_MODULE_17__.f,primeng_dialog__WEBPACK_IMPORTED_MODULE_18__.V,primeng_divider__WEBPACK_IMPORTED_MODULE_19__.i,primeng_dropdown__WEBPACK_IMPORTED_MODULE_20__.Lt,primeng_progressbar__WEBPACK_IMPORTED_MODULE_21__.k,primeng_inputtext__WEBPACK_IMPORTED_MODULE_22__.o,primeng_slider__WEBPACK_IMPORTED_MODULE_23__.iR,primeng_table__WEBPACK_IMPORTED_MODULE_24__.iA,primeng_table__WEBPACK_IMPORTED_MODULE_24__.Wq,primeng_table__WEBPACK_IMPORTED_MODULE_24__.YL,primeng_table__WEBPACK_IMPORTED_MODULE_24__.UA,primeng_toast__WEBPACK_IMPORTED_MODULE_25__.FN,_layout_shared_breadcrumb_breadcrumb_component__WEBPACK_IMPORTED_MODULE_4__.L,_angular_common__WEBPACK_IMPORTED_MODULE_12__.JJ,_angular_common__WEBPACK_IMPORTED_MODULE_12__.uU],styles:["[_nghost-%COMP%]     .p-frozen-column{font-weight:700}[_nghost-%COMP%]     .p-datatable-frozen-tbody{font-weight:700}[_nghost-%COMP%]     .p-progressbar{height:.5rem}.c-min-stock[_ngcontent-%COMP%]{color:red;font-weight:700}.c-max-stock[_ngcontent-%COMP%]{color:green;font-weight:700}"]})},9365:(_,a,e)=>{e.r(a),e.d(a,{MrpModule:()=>v});var r=e(6895),o=e(4006),i=e(931),c=e(3983),P=e(3837),u=e(9335),p=e(4023),d=e(5067),D=e(5861),g=e(4327),T=e(805),n=e(4650),A=e(9701),I=e(4931),B=e(1562),x=e(1922),f=e(5593),b=e(3608),y=e(1493),Z=e(5108),F=e(2210),N=e(3388),w=e(8235),q=e(1740),W=e(99),k=e(2453),z=e(9090);const V=["filter"];function J(s,l){if(1&s){const t=n.EpF();n.TgZ(0,"button",22),n.NdJ("click",function(){n.CHM(t);const M=n.oxw(2);return n.KtG(M.cargarPresupuesto())}),n.qZA()}if(2&s){const t=n.oxw(2);n.Q6J("disabled",!t.permisosUsuarioPagina[0].create_accion)}}function Y(s,l){if(1&s){const t=n.EpF();n.TgZ(0,"div",14)(1,"div")(2,"button",15),n.NdJ("click",function(){n.CHM(t);const M=n.oxw(),m=n.MAs(6);return n.KtG(M.clear(m))}),n.qZA(),n.YNc(3,J,1,1,"button",16),n.TgZ(4,"button",17),n.NdJ("click",function(){n.CHM(t);const M=n.oxw();return n.KtG(M.exportExcel())}),n.qZA()(),n.TgZ(5,"span",18),n._UZ(6,"i",19),n.TgZ(7,"input",20,21),n.NdJ("input",function(M){n.CHM(t);const m=n.oxw(),C=n.MAs(6);return n.KtG(m.onGlobalFilter(C,M))}),n.qZA()()()}if(2&s){const t=n.oxw();n.xp6(3),n.Q6J("ngIf",t.permisosUsuarioPagina[0].create_accion)}}function G(s,l){if(1&s&&(n.TgZ(0,"span"),n._uU(1),n.qZA()),2&s){const t=l.$implicit;n.Tol("customer-badge status-"+t.value),n.xp6(1),n.Oqu(t.label)}}function Q(s,l){if(1&s){const t=n.EpF();n.TgZ(0,"p-dropdown",33),n.NdJ("onChange",function(M){const C=n.CHM(t).filterCallback;return n.KtG(C(M.value))}),n.YNc(1,G,2,3,"ng-template",34),n.qZA()}if(2&s){const t=l.$implicit,E=n.oxw(2);n.Q6J("ngModel",t)("options",E.zonas)}}function H(s,l){1&s&&(n.TgZ(0,"tr"),n._UZ(1,"th",23),n.TgZ(2,"th")(3,"div",24),n._uU(4," Id "),n._UZ(5,"p-columnFilter",25),n.qZA()(),n.TgZ(6,"th")(7,"div",24),n._uU(8," Fecha "),n._UZ(9,"p-columnFilter",26),n.qZA()(),n.TgZ(10,"th")(11,"div",24),n._uU(12," Semana "),n._UZ(13,"p-columnFilter",27),n.qZA()(),n.TgZ(14,"th")(15,"div",24),n._uU(16," C\xf3digo item "),n._UZ(17,"p-columnFilter",28),n.qZA()(),n.TgZ(18,"th")(19,"div",24),n._uU(20," Descripci\xf3n item "),n._UZ(21,"p-columnFilter",29),n.qZA()(),n.TgZ(22,"th")(23,"div",24),n._uU(24," C\xf3digo zona "),n._UZ(25,"p-columnFilter",30),n.qZA()(),n.TgZ(26,"th")(27,"div",24),n._uU(28," Zona "),n.TgZ(29,"p-columnFilter",31),n.YNc(30,Q,2,2,"ng-template",32),n.qZA()()(),n.TgZ(31,"th")(32,"div",24),n._uU(33," Cantidad presupuesto "),n.qZA()(),n._UZ(34,"th"),n.qZA()),2&s&&(n.xp6(29),n.Q6J("showMatchModes",!1)("showOperator",!1))}function j(s,l){if(1&s&&(n.TgZ(0,"tr")(1,"td"),n._UZ(2,"p-tableCheckbox",35),n.qZA(),n.TgZ(3,"td",36),n._uU(4),n.qZA(),n.TgZ(5,"td",36),n._uU(6),n.ALo(7,"date"),n.qZA(),n.TgZ(8,"td",36),n._uU(9),n.qZA(),n.TgZ(10,"td",36),n._uU(11),n.qZA(),n.TgZ(12,"td",36),n._uU(13),n.qZA(),n.TgZ(14,"td",36),n._uU(15),n.qZA(),n.TgZ(16,"td",36),n._uU(17),n.qZA(),n.TgZ(18,"td",36),n._uU(19),n.ALo(20,"number"),n.qZA(),n._UZ(21,"td"),n.qZA()),2&s){const t=l.$implicit;n.xp6(2),n.Q6J("value",t),n.xp6(2),n.hij(" ",t.id," "),n.xp6(2),n.hij(" ",n.lcZ(7,9,t.fechasemana)," "),n.xp6(3),n.hij(" ",t.semana," "),n.xp6(2),n.hij(" ",t.itemcode," "),n.xp6(2),n.hij(" ",t.descripcion," "),n.xp6(2),n.hij(" ",t.codigozona," "),n.xp6(2),n.hij(" ",t.zona," "),n.xp6(2),n.hij(" ",n.lcZ(20,11,t.cantidad)," ")}}function $(s,l){1&s&&(n.TgZ(0,"tr")(1,"td",37),n._uU(2,"No se econtraron lineas de presupuesto de venta."),n.qZA()())}function X(s,l){1&s&&(n.TgZ(0,"tr")(1,"td",37),n._uU(2,"Cargando presupeusto de venta. Por favor espere"),n.qZA()())}function __(s,l){if(1&s&&(n.TgZ(0,"li"),n._uU(1),n.qZA()),2&s){const t=l.$implicit;n.xp6(1),n.AsE("",t.name," - ",t.size," bytes")}}function e_(s,l){if(1&s&&(n.TgZ(0,"ul"),n.YNc(1,__,2,2,"li",42),n.qZA()),2&s){const t=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",t.uploadedFiles2)}}function a_(s,l){if(1&s&&n.YNc(0,e_,2,1,"ul",41),2&s){const t=n.oxw(2);n.Q6J("ngIf",t.uploadedFiles2.length)}}const n_=function(){return{height:"6px"}};function r_(s,l){1&s&&(n.TgZ(0,"div",38),n._UZ(1,"p-divider")(2,"p-progressBar",43)(3,"p-divider"),n.qZA()),2&s&&(n.xp6(2),n.Akn(n.DdM(2,n_)))}const o_=function(s){return{"ng-invalid ng-dirty":s}};function i_(s,l){if(1&s){const t=n.EpF();n.TgZ(0,"div",1)(1,"div",38)(2,"p-fileUpload",39),n.NdJ("onSelect",function(M){n.CHM(t);const m=n.oxw();return n.KtG(m.onLoad2(M))}),n.YNc(3,a_,1,1,"ng-template",12),n.qZA(),n.YNc(4,r_,4,3,"div",40),n.TgZ(5,"div",38)(6,"p"),n._uU(7," Para diligenciar correctamente la plantilla de cargue del presupuesto, siga las siguentes recomendaciones: "),n.qZA(),n.TgZ(8,"p"),n._uU(9," Columna "),n.TgZ(10,"strong"),n._uU(11,"FECHASEMANA"),n.qZA(),n._uU(12,": El formato de la fecha debe ser "),n.TgZ(13,"strong"),n._uU(14,"YYYY-MM-DD"),n.qZA()(),n.TgZ(15,"p"),n._uU(16," Columna "),n.TgZ(17,"strong"),n._uU(18,"SEMANA"),n.qZA(),n._uU(19,": El n\xfamero de la semana debe ser un "),n.TgZ(20,"strong"),n._uU(21,"entero"),n.qZA()(),n.TgZ(22,"p"),n._uU(23," Columna "),n.TgZ(24,"strong"),n._uU(25,"ITEM"),n.qZA(),n._uU(26,": El c\xf3digo del item debe existir en el maestro de SAP "),n.qZA(),n.TgZ(27,"p"),n._uU(28," Columna "),n.TgZ(29,"strong"),n._uU(30,"CODIGOZONA"),n.qZA(),n._uU(31,": El n\xfamero de la semana debe ser un "),n.TgZ(32,"strong"),n._uU(33,"entero"),n.qZA()()()()(),n._UZ(34,"div",1)}if(2&s){const t=n.oxw();n.xp6(2),n.Q6J("multiple",!1)("showUploadButton",!1)("maxFileSize",5e6)("ngClass",n.VKq(5,o_,!t.fileTmp2)),n.xp6(2),n.Q6J("ngIf",t.loadingCargueCSV)}}function t_(s,l){if(1&s){const t=n.EpF();n.TgZ(0,"p-button",44),n.NdJ("click",function(){n.CHM(t);const M=n.oxw();return n.KtG(M.descargarCSV())}),n.qZA(),n.TgZ(1,"p-button",45),n.NdJ("click",function(){n.CHM(t);const M=n.oxw();return n.KtG(M.adicionarCSV())}),n.qZA()}if(2&s){const t=n.oxw();n.xp6(1),n.Q6J("disabled",0==t.permisosUsuarioPagina.length||!t.permisosUsuarioPagina[0].create_accion||!t.cargueValido)}}const l_=function(){return["id","fechasemana","semana","itemcode","codigozona","descripcion"]},c_=function(){return{width:"50vw"}},s_=function(){return{"960px":"75vw","640px":"100vw"}};class R{constructor(l,t,E,M,m,C,K,S){this.rutaActiva=l,this.adminService=t,this.comprasService=E,this.router=M,this.confirmationService=m,this.messageService=C,this.authService=K,this.sapService=S,this.presupuestos=[],this.presupuestoSeleccionado=[],this.loading=!0,this.zonas=[{label:"Costa Norte",value:"900"},{label:"Costa Pac\xedfico",value:"901"}],this.items=[],this.itemsMP=[],this.formularioCSV=!1,this.loadingCargueCSV=!1,this.cargueValido=!1,this.uploadedFiles2=[],this.separadorLista=""}ngOnInit(){this.getItems(),this.getInfoUsuario(),this.getPerfilesUsuario(),this.getPermisosUsuario(),this.getPermisosUsuarioPagina()}getInfoUsuario(){this.infoUsuario=this.authService.getInfoUsuario()}getPerfilesUsuario(){this.perfilesUsuario=this.authService.getPerfilesUsuario()}getPermisosUsuario(){this.permisosUsuario=this.authService.getPermisosUsuario()}getPermisosUsuarioPagina(){let l="";if(this.rutaActiva.snapshot.params.entrada){let t=this.rutaActiva.snapshot.params;this.router.url.indexOf("/"+t.entrada)>=0&&(l=this.router.url.substring(0,this.router.url.indexOf("/"+t.entrada)))}else l=this.router.url;this.urlBreadCrumb=l,this.permisosUsuarioPagina=this.permisosUsuario.filter(t=>t.url===l),console.log(this.permisosUsuario,this.permisosUsuarioPagina)}getItems(){this.sapService.itemsSAPXE(this.authService.getToken()).subscribe({next:l=>{for(let t in l)this.items.push(l[t]),0==l[t].ItemCode.toLowerCase().indexOf("mp")&&this.itemsMP.push(l[t]);console.log(this.itemsMP),this.getPresupeustoVenta()},error:l=>{}})}getPresupeustoVenta(){this.comprasService.getPresupuestosVentaAll(this.authService.getToken()).subscribe({next:l=>{for(let t of l)if(this.items.filter(E=>E.ItemCode===t.itemcode).length>0){let E=this.items.filter(m=>m.ItemCode===t.itemcode),M=this.zonas.filter(m=>m.value===t.codigozona);t.descripcion=E[0].ItemName,t.zona=M[0].label}else console.log(t.itemcode);this.presupuestos=l,this.loading=!1},error:l=>{console.log(l)}})}cargarPresupuesto(){this.formularioCSV=!0}adicionarCSV(){if(this.loadingCargueCSV=!0,this.lineasPresupuestoCVS.length>0){console.log(this.lineasPresupuestoCVS);let l=new FormData;console.log(this.fileTmp2),l.append("separador",this.separadorLista),l.append("myFile",this.fileTmp2.fileRaw,this.fileTmp2.fileName),this.comprasService.cargarPresupuestoCVS2(this.authService.getToken(),l).subscribe({next:t=>{console.log(t),this.messageService.add({severity:"success",summary:"!Ok",detail:t.message}),this.formularioCSV=!1,this.loading=!0,this.getItems()},error:t=>{console.log(t)}})}}onLoad2(l){this.loadingCargueCSV=!0;const[t]=l.currentFiles;this.fileTmp2={fileRaw:t,fileName:t.name},this.readDocument(t)}readDocument(l){let t=new FileReader,E=[];t.onload=M=>{var C=t.result.split("\n");for(let K of C)E.push(this.reemplazarCaracteresEspeciales(K));this.validarArchivoDetalle(E)},t.readAsText(l)}reemplazarCaracteresEspeciales(l){return l.replace("\r","").replace("\t","")}validarArchivoDetalle(l){var t=this;return(0,D.Z)(function*(){t.validarEncabezado(l[0].split(","))?(t.cargueValido=yield t.validarContenidoCSV(l,","),t.cargueValido&&(t.separadorLista=",",t.messageService.add({severity:"success",summary:"!Ok",detail:"El archivo cargado cumple con la estructura b\xe1sica requerida"}))):t.validarEncabezado(l[0].split(";"))?(t.cargueValido=yield t.validarContenidoCSV(l,";"),t.cargueValido&&(t.separadorLista=";",t.messageService.add({severity:"success",summary:"!Ok",detail:"El archivo cargado cumple con la estructura b\xe1sica requerida. "}))):t.messageService.add({severity:"error",summary:"!Error",detail:"El archivo cargado no cumple con la estructura b\xe1sica requerida. 5 Columnas 'FECHASEMANA',\t'SEMANA',\t'ITEM',\t'CODIGOZONA',\t'CANTIDAD'"}),t.loadingCargueCSV=!1})()}validarEncabezado(l){let t=["FECHASEMANA","SEMANA","ITEM","CODIGOZONA","CANTIDAD"],E=!0;return l.length!=t.length?E=!1:this.encabezadosValidos(t,l)||(E=!1),E}encabezadosValidos(l,t){let E=!0;for(let M of t)if(!l.includes(M)){E=!1;break}return E}validarContenidoCSV(l,t){var E=this;return(0,D.Z)(function*(){let m,M=!0;E.lineasPresupuestoCVS=[];let C=0;for(let O=1;O<l.length;O++)m=l[O].split(t),console.log(m),5==m.length?(""==m[0]?(E.messageService.add({severity:"error",summary:"!Error",detail:`La fecha de la semana  de la linea ${O}, no es obligatoria`}),M=!1):""==m[0]||m[0].includes("-")?""!=m[0]&&isNaN(Date.parse(m[0]))?(E.messageService.add({severity:"error",summary:"!Error",detail:`La fecha de la semana  de la linea ${O}, no es valida`}),M=!1):""==m[1]?(E.messageService.add({severity:"error",summary:"!Error",detail:`El n\xfamero de la semana  de la linea ${O} es obligatoria`}),M=!1):""!=m[1]&&isNaN(m[1])?(E.messageService.add({severity:"error",summary:"!Error",detail:`El n\xfamero de la semana  de la linea ${O} no es valido`}),M=!1):""==m[2]?(E.messageService.add({severity:"error",summary:"!Error",detail:`El c\xf3digo del item de la linea ${O}, es obligatorio`}),M=!1):""==m[3]?(E.messageService.add({severity:"error",summary:"!Error",detail:`El c\xf3digo de la zona  de la linea ${O} es obligatorio`}),M=!1):""!=m[3]&&isNaN(m[3])?(E.messageService.add({severity:"error",summary:"!Error",detail:`El c\xf3digo de la zona  de la linea ${O} no es valido`}),M=!1):""!=m[3]&&0==E.zonas.filter(u_=>u_.value==m[3]).length?(E.messageService.add({severity:"error",summary:"!Error",detail:`El c\xf3digo de la zona  de la linea ${O} no existe en el listado zonas`}),M=!1):""==m[4]?(E.messageService.add({severity:"error",summary:"!Error",detail:`El valor de la cantidad de consumo de la linea ${O} es obligatorio`}),M=!1):E.lineasPresupuestoCVS.push({fechasemana:m[0],semana:m[1],itemcode:m[2],codigozona:m[3],cantidad:m[4]}):(E.messageService.add({severity:"error",summary:"!Error",detail:`La fecha de la semana  de la linea ${O}, no es valida. Debe tener el formato YYYY-MM-DD`}),M=!1),C++):m.length>1&&(C++,E.messageService.add({severity:"error",summary:"!Error",detail:`La l\xedena ${O} del archivo a cargar, no posee la estructura b\xe1sica requerida`}),M=!1);return console.log(C),0==C&&(E.messageService.add({severity:"error",summary:"!Error",detail:"El archivo seleccionado no posse lineas para agregar a la solped"}),M=!1),M})()}descargarCSV(){var l=this;return(0,D.Z)(function*(){const t=document.createElement("a");t.href=yield l.comprasService.downloadAnexo("uploads/solped/plantilla_presupuesto_venta.csv"),t.click()})()}exportExcel(){e.e(574).then(e.bind(e,574)).then(l=>{const E={Sheets:{data:l.utils.json_to_sheet(this.presupuestos)},SheetNames:["data"]},M=l.write(E,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(M,"maximos_minimos")})}saveAsExcelFile(l,t){const m=new Blob([l],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});g.saveAs(m,t+"_export_"+(new Date).getTime()+".xlsx")}formatCurrency(l){return l.toLocaleString("en-US",{style:"currency",currency:"USD"})}onGlobalFilter(l,t){l.filterGlobal(t.target.value,"contains")}clear(l){l.clear(),this.filter.nativeElement.value=""}}R.\u0275fac=function(l){return new(l||R)(n.Y36(u.gz),n.Y36(A.l),n.Y36(I.K),n.Y36(u.F0),n.Y36(T.YP),n.Y36(T.ez),n.Y36(B.e),n.Y36(x.c))},R.\u0275cmp=n.Xpm({type:R,selectors:[["app-presupuesto-venta"]],viewQuery:function(l,t){if(1&l&&n.Gf(V,5),2&l){let E;n.iGM(E=n.CRH())&&(t.filter=E.first)}},features:[n._Bn([T.ez,T.YP])],decls:15,vars:19,consts:[[3,"urlBreadCrumb"],[1,"grid"],[1,"col-12"],[1,"card"],["dataKey","id","styleClass","p-datatable-gridlines p-datatable-sm","selectionMode","multiple","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields","selection","selectionChange"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["header","Cargar presupuesto",3,"visible","modal","breakpoints","maximizable","draggable","resizable","visibleChange","onHide"],["pTemplate","content"],["pTemplate","footer"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","pTooltip","Limpiar","tooltipPosition","bottom","placeholder","Bottom","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2","mr-2","p-button-sm",3,"click"],["pButton","","pTooltip","Cargar presupuesto","tooltipPosition","bottom","placeholder","Bottom","class","p-button-outlined mb-2 mr-2 p-button-warning p-button-sm","icon","pi pi-cloud-upload",3,"disabled","click",4,"ngIf"],["pButton","","pTooltip","Exportar a excel","tooltipPosition","bottom","placeholder","Bottom","icon","pi pi-file-excel",1,"p-button-outlined","mb-2","mr-2","p-button-success","p-button-sm",3,"click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar por palabra clave",1,"w-full","p-inputtext-sm",3,"input"],["filter",""],["pButton","","pTooltip","Cargar presupuesto","tooltipPosition","bottom","placeholder","Bottom","icon","pi pi-cloud-upload",1,"p-button-outlined","mb-2","mr-2","p-button-warning","p-button-sm",3,"disabled","click"],[2,"width","3rem"],[1,"flex","justify-content-between","align-items-center"],["type","text","field","id","display","menu","placeholder","Buscar por c\xf3digo presupuesto"],["type","date","field","fechasemana","display","menu"],["type","text","field","semana","display","menu","placeholder","Buscar por semana"],["type","text","field","itemcode","display","menu","placeholder","Buscar por c\xf3digo item"],["type","text","field","descripcion","display","menu","placeholder","Buscar por descripci\xf3n item"],["type","text","field","codigozona","display","menu","placeholder","Buscar por codigo zona"],["field","codigozona","matchMode","equals","display","menu","placeholder","Buscar por zona",3,"showMatchModes","showOperator"],["pTemplate","filter"],["placeholder","Any",3,"ngModel","options","onChange"],["pTemplate","item"],[3,"value"],[2,"min-width","12rem"],["colspan","9",1,"text-center"],[1,"field","col"],["name","demo2[]","chooseLabel","Seleccionar","cancelLabel","Cancelar","accept",".csv,.txt","styleClass","w-full",1,"w-full",3,"multiple","showUploadButton","maxFileSize","ngClass","onSelect"],["class","field col",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mode","indeterminate"],["icon","pi pi-download","label","Descargar plantilla de presupuesto","styleClass","p-button-text",3,"click"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"disabled","click"]],template:function(l,t){1&l&&(n._UZ(0,"p-toast")(1,"app-breadcrumb",0),n.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"p-table",4,5),n.NdJ("selectionChange",function(M){return t.presupuestoSeleccionado=M}),n.YNc(7,Y,9,1,"ng-template",6),n.YNc(8,H,35,2,"ng-template",7),n.YNc(9,j,22,13,"ng-template",8),n.YNc(10,$,3,0,"ng-template",9),n.YNc(11,X,3,0,"ng-template",10),n.qZA()()()(),n.TgZ(12,"p-dialog",11),n.NdJ("visibleChange",function(M){return t.formularioCSV=M})("onHide",function(){return t.loadingCargueCSV=!1}),n.YNc(13,i_,35,7,"ng-template",12),n.YNc(14,t_,2,1,"ng-template",13),n.qZA()),2&l&&(n.xp6(1),n.Q6J("urlBreadCrumb",t.urlBreadCrumb),n.xp6(4),n.Q6J("value",t.presupuestos)("rows",10)("loading",t.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",n.DdM(16,l_))("selection",t.presupuestoSeleccionado),n.xp6(7),n.Akn(n.DdM(17,c_)),n.Q6J("visible",t.formularioCSV)("modal",!0)("breakpoints",n.DdM(18,s_))("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[r.mk,r.sg,r.O5,o.JJ,o.On,T.jx,f.Hq,f.zx,b.u,y.V,Z.i,F.Lt,N.p,w.k,q.o,W.iA,W.UA,W.xl,k.FN,z.L,r.JJ,r.uU],styles:["[_nghost-%COMP%]     .p-frozen-column{font-weight:700}[_nghost-%COMP%]     .p-datatable-frozen-tbody{font-weight:700}[_nghost-%COMP%]     .p-progressbar{height:.5rem}"]});var E_=e(1910);class U{}U.\u0275fac=function(l){return new(l||U)},U.\u0275mod=n.oAB({type:U}),U.\u0275inj=n.cJS({imports:[u.Bz.forChild([{path:"calculadora",component:p.G},{path:"presupuesto",component:R},{path:"maximos-minimos",component:d.k},{path:"simulacion-automatica",component:E_.y}]),u.Bz]});class h{}h.\u0275fac=function(l){return new(l||h)},h.\u0275mod=n.oAB({type:h}),h.\u0275inj=n.cJS({imports:[r.ez,i.W,c.G]});class L{}L.\u0275fac=function(l){return new(l||L)},L.\u0275mod=n.oAB({type:L}),L.\u0275inj=n.cJS({imports:[r.ez,i.W]});class v{}v.\u0275fac=function(l){return new(l||v)},v.\u0275mod=n.oAB({type:v}),v.\u0275inj=n.cJS({imports:[r.ez,U,o.u5,o.UX,i.W,c.G,P.S,h,L]})},5067:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{k:()=>MaximosMinimosComponent});var C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(5861),file_saver__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4327),file_saver__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(file_saver__WEBPACK_IMPORTED_MODULE_0__),primeng_api__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(805),_angular_core__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(4650),_angular_router__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9335),src_app_demo_service_admin_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(9701),src_app_demo_service_compras_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(4931),src_app_demo_service_auth_service__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(1562),src_app_demo_service_sap_service__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(1922),_angular_common__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(6895),_angular_forms__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(4006),primeng_button__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(5593),primeng_tooltip__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(3608),primeng_dialog__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1493),primeng_divider__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(5108),primeng_dropdown__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(2210),primeng_fileupload__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(3388),primeng_progressbar__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(8235),primeng_inputtext__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(1740),primeng_table__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(99),primeng_toast__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(2453),_layout_shared_breadcrumb_breadcrumb_component__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(9090);const _c0=["filter"];function MaximosMinimosComponent_ng_template_7_button_3_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"button",22),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(o.cargarMaximosMinimos())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}if(2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("disabled",!e.permisosUsuarioPagina[0].create_accion)}}function MaximosMinimosComponent_ng_template_7_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",14)(1,"div")(2,"button",15),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(),i=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(6);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(o.clear(i))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(3,MaximosMinimosComponent_ng_template_7_button_3_Template,1,1,"button",16),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(4,"button",17),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(o.exportExcel())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(5,"span",18),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(6,"i",19),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(7,"input",20,21),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("input",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(),c=_angular_core__WEBPACK_IMPORTED_MODULE_6__.MAs(6);return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(i.onGlobalFilter(c,o))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()}if(2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",e.permisosUsuarioPagina[0].create_accion)}}function MaximosMinimosComponent_ng_template_8_ng_template_22_ng_template_1_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"span"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_6__.Tol("customer-badge status-"+e.value),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Oqu(e.label)}}function MaximosMinimosComponent_ng_template_8_ng_template_22_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"p-dropdown",31),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("onChange",function(o){const c=_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(e).filterCallback;return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(c(o.value))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(1,MaximosMinimosComponent_ng_template_8_ng_template_22_ng_template_1_Template,2,3,"ng-template",32),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}if(2&_){const e=a.$implicit,r=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngModel",e)("options",r.zonas)}}function MaximosMinimosComponent_ng_template_8_Template(_,a){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"tr"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(1,"th",23),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"th")(3,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(4," Id "),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(5,"p-columnFilter",25),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(6,"th")(7,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(8," C\xf3digo item "),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(9,"p-columnFilter",26),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(10,"th")(11,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(12," Descripci\xf3n item "),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(13,"p-columnFilter",27),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(14,"th")(15,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(16," C\xf3digo zona "),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(17,"p-columnFilter",28),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(18,"th")(19,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(20," Zona "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(21,"p-columnFilter",29),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(22,MaximosMinimosComponent_ng_template_8_ng_template_22_Template,2,2,"ng-template",30),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(23,"th")(24,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(25," M\xednimo "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(26,"th")(27,"div",24),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(28," M\xe1ximo "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(29,"th"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(21),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("showMatchModes",!1)("showOperator",!1))}function MaximosMinimosComponent_ng_template_9_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"tr")(1,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(2,"p-tableCheckbox",33),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(3,"td",34),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(5,"td",34),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(7,"td",34),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(8),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(9,"td",34),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(10),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(11,"td",34),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(12),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(13,"td",34),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(14),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(15,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(16,"td",34),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(17),_angular_core__WEBPACK_IMPORTED_MODULE_6__.ALo(18,"number"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(19,"td"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("value",e),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",e.id," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",e.itemcode," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",e.descripcion," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",e.zona," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",e.nombrezona," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(15,8,e.minimo)," "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(3),_angular_core__WEBPACK_IMPORTED_MODULE_6__.hij(" ",_angular_core__WEBPACK_IMPORTED_MODULE_6__.lcZ(18,10,e.maximo)," ")}}function MaximosMinimosComponent_ng_template_10_Template(_,a){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"tr")(1,"td",35),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2,"No se econtraron lineas de presupuesto de venta."),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()())}function MaximosMinimosComponent_ng_template_11_Template(_,a){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"tr")(1,"td",35),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(2,"Cargando presupeusto de venta. Por favor espere"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()())}function MaximosMinimosComponent_ng_template_13_ng_template_3_ul_0_li_1_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"li"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&_){const e=a.$implicit;_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.AsE("",e.name," - ",e.size," bytes")}}function MaximosMinimosComponent_ng_template_13_ng_template_3_ul_0_Template(_,a){if(1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"ul"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(1,MaximosMinimosComponent_ng_template_13_ng_template_3_ul_0_li_1_Template,2,2,"li",40),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(3);_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngForOf",e.uploadedFiles2)}}function MaximosMinimosComponent_ng_template_13_ng_template_3_Template(_,a){if(1&_&&_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(0,MaximosMinimosComponent_ng_template_13_ng_template_3_ul_0_Template,2,1,"ul",39),2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw(2);_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",e.uploadedFiles2.length)}}const _c1=function(){return{height:"6px"}};function MaximosMinimosComponent_ng_template_13_div_4_Template(_,a){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",36),_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(1,"p-divider")(2,"p-progressBar",41)(3,"p-divider"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Akn(_angular_core__WEBPACK_IMPORTED_MODULE_6__.DdM(2,_c1)))}const _c2=function(_){return{"ng-invalid ng-dirty":_}};function MaximosMinimosComponent_ng_template_13_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"div",1)(1,"div",36)(2,"p-fileUpload",37),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("onSelect",function(o){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(e);const i=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(i.onLoad2(o))}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(3,MaximosMinimosComponent_ng_template_13_ng_template_3_Template,1,1,"ng-template",12),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(4,MaximosMinimosComponent_ng_template_13_div_4_Template,4,3,"div",38),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(5,"div",36)(6,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(7," Para diligenciar correctamente la plantilla de cargue de m\xe1ximos y minimos, siga las siguentes recomendaciones: "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(8,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(9," Columna "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(10,"strong"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(11,"ITEM"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(12,": El c\xf3digo del item debe existir en el maestro de SAP "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(13,"p"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(14," Columna "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(15,"strong"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(16,"CODIGOZONA"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(17,": El n\xfamero de la semana debe ser un "),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(18,"strong"),_angular_core__WEBPACK_IMPORTED_MODULE_6__._uU(19,"entero"),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()()()}if(2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("multiple",!1)("showUploadButton",!1)("maxFileSize",5e6)("ngClass",_angular_core__WEBPACK_IMPORTED_MODULE_6__.VKq(5,_c2,!e.fileTmp2)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("ngIf",e.loadingCargueCSV)}}function MaximosMinimosComponent_ng_template_14_Template(_,a){if(1&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_6__.EpF();_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(0,"p-button",42),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(o.descargarCSV())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(1,"p-button",43),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("click",function(){_angular_core__WEBPACK_IMPORTED_MODULE_6__.CHM(e);const o=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();return _angular_core__WEBPACK_IMPORTED_MODULE_6__.KtG(o.adicionarCSV())}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()}if(2&_){const e=_angular_core__WEBPACK_IMPORTED_MODULE_6__.oxw();_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("disabled",0==e.permisosUsuarioPagina.length||!e.permisosUsuarioPagina[0].create_accion||!e.cargueValido)}}const _c3=function(){return["id","fechasemana","semana","itemcode","codigozona","descripcion"]},_c4=function(){return{width:"50vw"}},_c5=function(){return{"960px":"75vw","640px":"100vw"}};class MaximosMinimosComponent{constructor(_,a,e,r,o,i,c,P){this.rutaActiva=_,this.adminService=a,this.comprasService=e,this.router=r,this.confirmationService=o,this.messageService=i,this.authService=c,this.sapService=P,this.maximosminimos=[],this.maximosminimosSeleccionado=[],this.loading=!1,this.zonas=[{label:"Costa Norte",value:"900"},{label:"Costa Pac\xedfico",value:"901"}],this.items=[],this.itemsMP=[],this.formularioCSV=!1,this.loadingCargueCSV=!1,this.cargueValido=!1,this.uploadedFiles2=[]}ngOnInit(){this.getItems(),this.getInfoUsuario(),this.getPerfilesUsuario(),this.getPermisosUsuario(),this.getPermisosUsuarioPagina()}getInfoUsuario(){this.infoUsuario=this.authService.getInfoUsuario()}getPerfilesUsuario(){this.perfilesUsuario=this.authService.getPerfilesUsuario()}getPermisosUsuario(){this.permisosUsuario=this.authService.getPermisosUsuario()}getPermisosUsuarioPagina(){let _="";if(this.rutaActiva.snapshot.params.entrada){let a=this.rutaActiva.snapshot.params;this.router.url.indexOf("/"+a.entrada)>=0&&(_=this.router.url.substring(0,this.router.url.indexOf("/"+a.entrada)))}else _=this.router.url;this.urlBreadCrumb=_,this.permisosUsuarioPagina=this.permisosUsuario.filter(a=>a.url===_)}getItems(){this.sapService.itemsSAPXE(this.authService.getToken()).subscribe({next:_=>{for(let a in _)this.items.push(_[a]),0==_[a].ItemCode.toLowerCase().indexOf("mp")&&this.itemsMP.push(_[a]);this.getMaximosMinimos()},error:_=>{}})}getMaximosMinimos(){this.comprasService.getMaxMinAll(this.authService.getToken()).subscribe({next:_=>{console.log(_);for(let a of _){let e=this.items.filter(o=>o.ItemCode===a.itemcode),r=this.zonas.filter(o=>o.value===a.zona);a.descripcion=e[0].ItemName,a.nombrezona=r[0].label,console.log(a)}this.maximosminimos=_,this.loading=!1},error:_=>{console.log(_)}})}cargarMaximosMinimos(){this.formularioCSV=!0}adicionarCSV(){this.loadingCargueCSV=!0,this.lineasMaxMinCVS.length>0&&(console.log(this.lineasMaxMinCVS),this.comprasService.cargarMaxMinCVS(this.authService.getToken(),this.lineasMaxMinCVS).subscribe({next:_=>{console.log(_),this.messageService.add({severity:"success",summary:"!Ok",detail:_.message}),this.formularioCSV=!1,this.loading=!0,this.getItems()},error:_=>{console.log(_)}}))}onLoad2(_){this.loadingCargueCSV=!0;const[a]=_.currentFiles;this.fileTmp2={fileRaw:a,fileName:a.name},this.readDocument(a)}readDocument(_){let a=new FileReader,e=[];a.onload=r=>{var i=a.result.split("\n");for(let c of i)e.push(this.reemplazarCaracteresEspeciales(c));this.validarArchivoDetalle(e)},a.readAsText(_)}reemplazarCaracteresEspeciales(_){return _.replace("\r","").replace("\t","")}validarArchivoDetalle(_){var a=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__.Z)(function*(){a.validarEncabezado(_[0].split(","))?(a.cargueValido=yield a.validarContenidoCSV(_,","),a.cargueValido&&a.messageService.add({severity:"success",summary:"!Ok",detail:"El archivo cargado cumple con la estructura b\xe1sica requerida"})):a.validarEncabezado(_[0].split(";"))?(a.cargueValido=yield a.validarContenidoCSV(_,";"),a.cargueValido&&a.messageService.add({severity:"success",summary:"!Ok",detail:"El archivo cargado cumple con la estructura b\xe1sica requerida"})):a.messageService.add({severity:"error",summary:"!Error",detail:"El archivo cargado no cumple con la estructura b\xe1sica requerida"}),a.loadingCargueCSV=!1})()}validarEncabezado(_){let a=["ITEM","CODIGOZONA","MINIMO","MAXIMO"],e=!0;return _.length!=a.length?e=!1:this.encabezadosValidos(a,_)||(e=!1),e}encabezadosValidos(_,a){let e=!0;for(let r of a)if(!_.includes(r)){e=!1;break}return e}validarContenidoCSV(lienasArchivo,separador){var _this2=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__.Z)(function*(){let valido=!0,arrayLinea;console.log(lienasArchivo),_this2.lineasMaxMinCVS=[];let lineasProcesadas=0,linetotal,taxvalor;for(let linea=1;linea<lienasArchivo.length;linea++)arrayLinea=lienasArchivo[linea].split(separador),4==arrayLinea.length?(""==arrayLinea[0]?(_this2.messageService.add({severity:"error",summary:"!Error",detail:`El c\xf3digo del item de la linea ${linea}, es obligatorio`}),valido=!1):""!=arrayLinea[0]&&0==_this2.items.filter(_=>_.ItemCode==arrayLinea[0]).length?(_this2.messageService.add({severity:"error",summary:"!Error",detail:`El c\xf3digo del item  de la linea ${linea}, no existe en el listado de items de SAP`}),valido=!1):""==arrayLinea[1]?(_this2.messageService.add({severity:"error",summary:"!Error",detail:`El c\xf3digo de la zona  de la linea ${linea} es obligatorio`}),valido=!1):""!=arrayLinea[1]&&isNaN(arrayLinea[1])?(_this2.messageService.add({severity:"error",summary:"!Error",detail:`El c\xf3digo de la zona  de la linea ${linea} no es valido`}),valido=!1):""!=arrayLinea[1]&&0==_this2.zonas.filter(_=>_.value==arrayLinea[1]).length?(_this2.messageService.add({severity:"error",summary:"!Error",detail:`El c\xf3digo de la zona  de la linea ${linea} no existe en el listado zonas`}),valido=!1):""==arrayLinea[2]?(_this2.messageService.add({severity:"error",summary:"!Error",detail:`El valor m\xednimo  de la linea ${linea} es obligatorio`}),valido=!1):""!=arrayLinea[2]&&isNaN(arrayLinea[2])?(_this2.messageService.add({severity:"error",summary:"!Error",detail:`El valor m\xednimo  de la linea ${linea} no es valido`}),valido=!1):""==arrayLinea[3]?(_this2.messageService.add({severity:"error",summary:"!Error",detail:`El valor m\xe1ximo de la linea ${linea} es obligatorio`}),valido=!1):""!=arrayLinea[3]&&isNaN(eval(arrayLinea[3]))?(_this2.messageService.add({severity:"error",summary:"!Error",detail:`El valor m\xe1ximo de la linea ${linea} no es valido`}),valido=!1):_this2.lineasMaxMinCVS.push({itemcode:arrayLinea[0],codigozona:arrayLinea[1],minimo:arrayLinea[2],maximo:arrayLinea[3]}),lineasProcesadas++):arrayLinea.length>1&&(lineasProcesadas++,_this2.messageService.add({severity:"error",summary:"!Error",detail:`La l\xedena ${linea} del archivo a cargar, no posee la estructura b\xe1sica requerida`}),valido=!1);return console.log(lineasProcesadas),0==lineasProcesadas&&(_this2.messageService.add({severity:"error",summary:"!Error",detail:"El archivo seleccionado no posse lineas para agregar a la solped"}),valido=!1),valido})()}descargarCSV(){var _=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_7__.Z)(function*(){const a=document.createElement("a");a.href=yield _.comprasService.downloadAnexo("uploads/solped/plantilla_maximos_minimos.csv"),a.click()})()}exportExcel(){__webpack_require__.e(574).then(__webpack_require__.bind(__webpack_require__,574)).then(_=>{const e={Sheets:{data:_.utils.json_to_sheet(this.maximosminimos)},SheetNames:["data"]},r=_.write(e,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(r,"maximos_minimos")})}saveAsExcelFile(_,a){const o=new Blob([_],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8"});file_saver__WEBPACK_IMPORTED_MODULE_0__.saveAs(o,a+"_export_"+(new Date).getTime()+".xlsx")}formatCurrency(_){return _.toLocaleString("en-US",{style:"currency",currency:"USD"})}onGlobalFilter(_,a){_.filterGlobal(a.target.value,"contains")}clear(_){_.clear(),this.filter.nativeElement.value=""}}MaximosMinimosComponent.\u0275fac=function _(a){return new(a||MaximosMinimosComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_8__.gz),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(src_app_demo_service_admin_service__WEBPACK_IMPORTED_MODULE_1__.l),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(src_app_demo_service_compras_service__WEBPACK_IMPORTED_MODULE_2__.K),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_8__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(primeng_api__WEBPACK_IMPORTED_MODULE_9__.YP),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(primeng_api__WEBPACK_IMPORTED_MODULE_9__.ez),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(src_app_demo_service_auth_service__WEBPACK_IMPORTED_MODULE_3__.e),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Y36(src_app_demo_service_sap_service__WEBPACK_IMPORTED_MODULE_4__.c))},MaximosMinimosComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_6__.Xpm({type:MaximosMinimosComponent,selectors:[["app-maximos-minimos"]],viewQuery:function _(a,e){if(1&a&&_angular_core__WEBPACK_IMPORTED_MODULE_6__.Gf(_c0,5),2&a){let r;_angular_core__WEBPACK_IMPORTED_MODULE_6__.iGM(r=_angular_core__WEBPACK_IMPORTED_MODULE_6__.CRH())&&(e.filter=r.first)}},features:[_angular_core__WEBPACK_IMPORTED_MODULE_6__._Bn([primeng_api__WEBPACK_IMPORTED_MODULE_9__.ez,primeng_api__WEBPACK_IMPORTED_MODULE_9__.YP])],decls:15,vars:19,consts:[[3,"urlBreadCrumb"],[1,"grid"],[1,"col-12"],[1,"card"],["dataKey","id","styleClass","p-datatable-gridlines p-datatable-sm","selectionMode","multiple","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields","selection","selectionChange"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],["header","Cargar m\xe1ximos y minimos",3,"visible","modal","breakpoints","maximizable","draggable","resizable","visibleChange","onHide"],["pTemplate","content"],["pTemplate","footer"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","pTooltip","Limpiar","tooltipPosition","bottom","placeholder","Bottom","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2","mr-2","p-button-sm",3,"click"],["pButton","","pTooltip","Cargar m\xe1ximos y m\xednimos","tooltipPosition","bottom","placeholder","Bottom","class","p-button-outlined mb-2 mr-2 p-button-warning p-button-sm","icon","pi pi-cloud-upload",3,"disabled","click",4,"ngIf"],["pButton","","pTooltip","Exportar a excel","tooltipPosition","bottom","placeholder","Bottom","icon","pi pi-file-excel",1,"p-button-outlined","mb-2","mr-2","p-button-success","p-button-sm",3,"click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar por palabra clave",1,"w-full","p-inputtext-sm",3,"input"],["filter",""],["pButton","","pTooltip","Cargar m\xe1ximos y m\xednimos","tooltipPosition","bottom","placeholder","Bottom","icon","pi pi-cloud-upload",1,"p-button-outlined","mb-2","mr-2","p-button-warning","p-button-sm",3,"disabled","click"],[2,"width","3rem"],[1,"flex","justify-content-between","align-items-center"],["type","text","field","id","display","menu","placeholder","Buscar por c\xf3digo presupuesto"],["type","text","field","itemcode","display","menu","placeholder","Buscar por c\xf3digo item"],["type","text","field","descripcion","display","menu","placeholder","Buscar por descripci\xf3n item"],["type","text","field","zona","display","menu","placeholder","Buscar por codigo zona"],["field","nombrezona","matchMode","equals","display","menu","placeholder","Buscar por zona",3,"showMatchModes","showOperator"],["pTemplate","filter"],["placeholder","Any",3,"ngModel","options","onChange"],["pTemplate","item"],[3,"value"],[2,"min-width","12rem"],["colspan","9",1,"text-center"],[1,"field","col"],["name","demo2[]","chooseLabel","Seleccionar","cancelLabel","Cancelar","accept",".csv,.txt","styleClass","w-full",1,"w-full",3,"multiple","showUploadButton","maxFileSize","ngClass","onSelect"],["class","field col",4,"ngIf"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mode","indeterminate"],["icon","pi pi-download","label","Descargar plantilla de m\xe1ximos y minimos","styleClass","p-button-text",3,"click"],["icon","pi pi-check","label","Ok","styleClass","p-button-text",3,"disabled","click"]],template:function _(a,e){1&a&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__._UZ(0,"p-toast")(1,"app-breadcrumb",0),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"p-table",4,5),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("selectionChange",function(o){return e.maximosminimosSeleccionado=o}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(7,MaximosMinimosComponent_ng_template_7_Template,9,1,"ng-template",6),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(8,MaximosMinimosComponent_ng_template_8_Template,30,2,"ng-template",7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(9,MaximosMinimosComponent_ng_template_9_Template,20,12,"ng-template",8),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(10,MaximosMinimosComponent_ng_template_10_Template,3,0,"ng-template",9),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(11,MaximosMinimosComponent_ng_template_11_Template,3,0,"ng-template",10),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()()()(),_angular_core__WEBPACK_IMPORTED_MODULE_6__.TgZ(12,"p-dialog",11),_angular_core__WEBPACK_IMPORTED_MODULE_6__.NdJ("visibleChange",function(o){return e.formularioCSV=o})("onHide",function(){return e.loadingCargueCSV=!1}),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(13,MaximosMinimosComponent_ng_template_13_Template,20,7,"ng-template",12),_angular_core__WEBPACK_IMPORTED_MODULE_6__.YNc(14,MaximosMinimosComponent_ng_template_14_Template,2,1,"ng-template",13),_angular_core__WEBPACK_IMPORTED_MODULE_6__.qZA()),2&a&&(_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("urlBreadCrumb",e.urlBreadCrumb),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(4),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("value",e.maximosminimos)("rows",10)("loading",e.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",_angular_core__WEBPACK_IMPORTED_MODULE_6__.DdM(16,_c3))("selection",e.maximosminimosSeleccionado),_angular_core__WEBPACK_IMPORTED_MODULE_6__.xp6(7),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Akn(_angular_core__WEBPACK_IMPORTED_MODULE_6__.DdM(17,_c4)),_angular_core__WEBPACK_IMPORTED_MODULE_6__.Q6J("visible",e.formularioCSV)("modal",!0)("breakpoints",_angular_core__WEBPACK_IMPORTED_MODULE_6__.DdM(18,_c5))("maximizable",!0)("draggable",!1)("resizable",!1))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_10__.mk,_angular_common__WEBPACK_IMPORTED_MODULE_10__.sg,_angular_common__WEBPACK_IMPORTED_MODULE_10__.O5,_angular_forms__WEBPACK_IMPORTED_MODULE_11__.JJ,_angular_forms__WEBPACK_IMPORTED_MODULE_11__.On,primeng_api__WEBPACK_IMPORTED_MODULE_9__.jx,primeng_button__WEBPACK_IMPORTED_MODULE_12__.Hq,primeng_button__WEBPACK_IMPORTED_MODULE_12__.zx,primeng_tooltip__WEBPACK_IMPORTED_MODULE_13__.u,primeng_dialog__WEBPACK_IMPORTED_MODULE_14__.V,primeng_divider__WEBPACK_IMPORTED_MODULE_15__.i,primeng_dropdown__WEBPACK_IMPORTED_MODULE_16__.Lt,primeng_fileupload__WEBPACK_IMPORTED_MODULE_17__.p,primeng_progressbar__WEBPACK_IMPORTED_MODULE_18__.k,primeng_inputtext__WEBPACK_IMPORTED_MODULE_19__.o,primeng_table__WEBPACK_IMPORTED_MODULE_20__.iA,primeng_table__WEBPACK_IMPORTED_MODULE_20__.UA,primeng_table__WEBPACK_IMPORTED_MODULE_20__.xl,primeng_toast__WEBPACK_IMPORTED_MODULE_21__.FN,_layout_shared_breadcrumb_breadcrumb_component__WEBPACK_IMPORTED_MODULE_5__.L,_angular_common__WEBPACK_IMPORTED_MODULE_10__.JJ],styles:["[_nghost-%COMP%]     .p-frozen-column{font-weight:700}[_nghost-%COMP%]     .p-datatable-frozen-tbody{font-weight:700}[_nghost-%COMP%]     .p-progressbar{height:.5rem}"]})},1910:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{y:()=>SimulacionAutomaticaComponent});var C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(5861),C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncIterator_js__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(6296),primeng_api__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(805),_angular_core__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(4650),_angular_router__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(9335),src_app_demo_service_compras_service__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(4931),src_app_demo_service_auth_service__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1562),src_app_demo_service_sap_service__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(1922),_angular_common__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(6895),primeng_dialog__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(1493),primeng_progressbar__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(8235),primeng_toast__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(2453);const _c0=function(){return{height:"6px"}};function SimulacionAutomaticaComponent_div_3_Template(_,a){1&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(0,"div",3),_angular_core__WEBPACK_IMPORTED_MODULE_3__._UZ(1,"p-progressBar",4),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()),2&_&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Akn(_angular_core__WEBPACK_IMPORTED_MODULE_3__.DdM(2,_c0)))}const _c1=function(){return{width:"50vw"}};class SimulacionAutomaticaComponent{constructor(_,a,e,r,o,i,c){this.rutaActiva=_,this.comprasService=a,this.router=e,this.confirmationService=r,this.messageService=o,this.authService=i,this.sapService=c,this.fechaactual=new Date,this.fechaProyeccion=new Date(this.fechaactual.getFullYear(),this.fechaactual.getMonth()+7,0),this.items=[],this.itemsMP=[],this.zonas=[],this.maxMpZona=0,this.minMpZona=0,this.presupuestoMPVenta=[],this.inventarioTramsitoMP=[],this.inventarioSolicitadoMP=[],this.inventarioProyectadoMP=[],this.totalInicialMPZF=0,this.inventarioItemZF=[],this.inventarioTramsitoMPPreFecha=[],this.inventarioSolicitadoMPPreFecha=[],this.mesesAnio=[{mes:1,mesStr:"Enero"},{mes:2,mesStr:"Febrero"},{mes:3,mesStr:"Marzo"},{mes:4,mesStr:"Abril"},{mes:5,mesStr:"Mayo"},{mes:6,mesStr:"Junio"},{mes:7,mesStr:"Julio"},{mes:8,mesStr:"Agosto"},{mes:9,mesStr:"Septiembre"},{mes:10,mesStr:"Octubre"},{mes:11,mesStr:"Noviembre"},{mes:12,mesStr:"Diciembre"}],this.simulacionSinProyeciones=[],this.simulacionConProyeciones=[],this.simulacionSinTransitoMP=[],this.lineasCalculadora=[],this.tolerancia=0,this.arregloSimulacionesItemsZonas=[],this.arregloInvetariosMP=[],this.arregloInvetariosTracking=[],this.arregloPresupuestoMPVenta=[],this.arregloMaxMin=[],this.iteracion=0,this.displayModal=!1,this.loadingCargue=!1}ngOnInit(){this.displayModal=!0,this.loadingCargue=!0,this.getItems(),console.log(this.fechaactual,this.fechaProyeccion),this.getInfoUsuario(),this.getPerfilesUsuario(),this.getPermisosUsuario(),this.getPermisosUsuarioPagina()}getInfoUsuario(){this.infoUsuario=this.authService.getInfoUsuario()}getPerfilesUsuario(){this.perfilesUsuario=this.authService.getPerfilesUsuario()}getPermisosUsuario(){this.permisosUsuario=this.authService.getPermisosUsuario()}getPermisosUsuarioPagina(){let _="";if(this.rutaActiva.snapshot.params.entrada){let a=this.rutaActiva.snapshot.params;this.router.url.indexOf("/"+a.entrada)>=0&&(_=this.router.url.substring(0,this.router.url.indexOf("/"+a.entrada)))}else _=this.router.url;this.permisosUsuarioPagina=this.permisosUsuario.filter(a=>a.url===_)}getItems(){this.sapService.itemsSAPXE(this.authService.getToken()).subscribe({next:_=>{for(let a in _)this.items.push(_[a]);this.getItemsMP()},error:_=>{}})}getItemsMP(){this.comprasService.getPresupuestosVentaAll(this.authService.getToken()).subscribe({next:_=>{let a;for(let e of _)0===this.itemsMP.filter(r=>r.itemcode==e.itemcode).length&&this.items.filter(r=>r.ItemCode==e.itemcode).length>0&&(a=this.items.filter(r=>r.ItemCode==e.itemcode)[0].ItemName,this.itemsMP.push({itemcode:e.itemcode,ItemName:a}));this.getZonas()},error:_=>{}})}getZonas(){this.comprasService.getZonas(this.authService.getToken()).subscribe({next:_=>{this.zonas=_,this.correrSimulacion()},error:_=>{}})}correrSimulacion(){var _=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.Z)(function*(){var r,a=!1,e=!1;try{for(var i,o=(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncIterator_js__WEBPACK_IMPORTED_MODULE_5__.Z)(_.itemsMP);a=!(i=yield o.next()).done;a=!1){let D=i.value;var u,c=!1,P=!1;try{for(var d,p=(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncIterator_js__WEBPACK_IMPORTED_MODULE_5__.Z)(_.zonas);c=!(d=yield p.next()).done;c=!1)_.getInventariosMP(D.itemcode,d.value.State)}catch(g){P=!0,u=g}finally{try{c&&null!=p.return&&(yield p.return())}finally{if(P)throw u}}}}catch(D){e=!0,r=D}finally{try{a&&null!=o.return&&(yield o.return())}finally{if(e)throw r}}})()}grabarSimulacion(_){console.log(_),this.comprasService.grabarSimulaciones(this.authService.getToken(),_).subscribe({next:a=>{this.messageService.add({severity:"success",summary:"!Ok\xa1",detail:a.message})},error:a=>{console.log(a),this.messageService.add({severity:"error",summary:"!Error",detail:a})}})}getInventariosMP(_,a){let e={item:_,zona:a};this.comprasService.getInventariosMpXE(this.authService.getToken(),e).subscribe({next:r=>{this.arregloInvetariosMP.push({item:_,zona:a,inventariosMP:r}),this.getInventariosTracking(_,a)},error:r=>{}})}getInventariosTracking(_,a){let e={item:_,zona:a,fechainicio:this.fechaactual,fechafin:this.fechaProyeccion};this.comprasService.getInventariosTracking(this.authService.getToken(),e).subscribe({next:r=>{this.arregloInvetariosTracking.push({item:_,zona:a,inventarioTramsitoMP:r.inventarioItemTransito,inventarioSolicitadoMP:r.inventarioItenSolicitado,inventarioTramsitoMPPreFecha:r.inventarioItemTransitoPreFecha,inventarioSolicitadoMPPreFecha:r.inventarioItenSolicitadoPreFecha,inventarioProyectadoMP:r.comprasProyectadasMP,inventarioItemZF:r.inventarioItemZF,totalInicialMPZF:r.totalInventarioItemZF}),this.gePresupuestoItemZona(_,a)},error:r=>{}})}gePresupuestoItemZona(_,a){var e=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.Z)(function*(){let r=yield e.fechaInicioSemana(new Date(e.fechaactual)),o={item:_,zona:a,fechainicio:r,fechafin:e.fechaProyeccion};e.comprasService.getPresupuestosVenta(e.authService.getToken(),o).subscribe({next:i=>{e.arregloPresupuestoMPVenta.push({item:_,zona:a,presupuestoMPVenta:i}),e.getMaxMinItemZona(_,a)},error:i=>{}})})()}getMaxMinItemZona(_,a){var e=this;let r={item:_,zona:a};var o;this.comprasService.getMaxMinItemZona(this.authService.getToken(),r).subscribe({next:(o=(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.Z)(function*(i){let c=0,P=0;i.length>0&&(c=i[0].maximo,P=i[0].minimo),e.arregloMaxMin.push({item:_,zona:a,maxMpZona:c,minMpZona:P}),e.iteracion++;let u=yield e.calcularLineas(_,a,"CP"),p=yield e.calcularLineas(_,a,"SP"),d=yield e.calcularLineas(_,a,"ST");yield e.grabarSimulacion({item:_,zona:a,simulacionConProyeciones:u,simulacionSinProyeciones:p,simulacionSinTransitoMP:d})}),function(c){return o.apply(this,arguments)}),error:o=>{}})}fechaInicioSemana(_){let a=new Date(_),r=(0==_.getUTCDay()?1:_.getUTCDay())-1;return a.setDate(_.getDate()-r),a}calcularLineas(item,zona,tipo){var _this4=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.Z)(function*(){_this4.simulacionConProyeciones=[];let lineasCalculadora=[],maxMpZona=_this4.arregloMaxMin.filter(_=>_.item==item&&_.zona==zona)[0].maxMpZona,minMpZona=_this4.arregloMaxMin.filter(_=>_.item==item&&_.zona==zona)[0].minMpZona,fechaInicioCalculadora=new Date(_this4.fechaactual),fechaFinalCalculadora=new Date(_this4.fechaProyeccion),semanaFecha,fechasemana,semanaMes="",inventarioSemanaMP=_this4.getInventarioInicial("MP",item,zona),inventarioSemanaPT=_this4.getInventarioInicial("PT",item,zona),inventarioSemanaMPZF=_this4.arregloInvetariosTracking.filter(_=>_.item==item&&_.zona==zona)[0].totalInicialMPZF,inventarioSemanaMPTR=0,compraSolicitadaMP=0,compraProyectadaMP=0,presupuestoVentaMP=0,inventarioFinalSemanaMP=0,inventarioTransitoProxima=0,compraSolicitadaProximaSemana=0,compraProyectadaProximaSemana=0,presupuestoProximaSemana=0,inventarioFinalProximaSemana=0,necesidadCompra="",cantidadCompraSugerida=0,inventarioFinalSemanaSugerido=0,estadoCompra=!1,inventarioSolicitadoMPPreFecha=_this4.calcularComprasSolicitadasPreFecha(item,zona),inventarioTramsitoMPPreFecha=_this4.calcularInventarioTRPreFecha(item,zona),lineaid=0,infoLinea,infoLineaSimulacion;for(;fechaInicioCalculadora<=fechaFinalCalculadora;fechaInicioCalculadora.setDate(fechaInicioCalculadora.getDate()+1))semanaFecha=_this4.numeroDeSemana(fechaInicioCalculadora),fechasemana=fechaInicioCalculadora,0==lineasCalculadora.filter(_=>_.semana==semanaFecha).length&&(semanaMes=yield _this4.semanaDelMes(new Date(fechaInicioCalculadora)),inventarioSemanaMPTR="ST"==tipo?0:(yield _this4.calcularInventarioSemanaTR(semanaFecha,item,zona))+inventarioTramsitoMPPreFecha,compraSolicitadaMP="ST"==tipo?0:(yield _this4.calcularComprasSolicitadasSemana(semanaFecha,item,zona))+inventarioSolicitadoMPPreFecha,compraProyectadaMP="SP"==tipo||"ST"==tipo?0:yield _this4.calcularComprasProyectadasSemana(semanaFecha,item,zona),presupuestoVentaMP=yield _this4.calcularPresupuestoSemana(semanaFecha,item,zona),inventarioFinalSemanaMP=inventarioSemanaMP+inventarioSemanaPT+inventarioSemanaMPZF+inventarioSemanaMPTR+compraSolicitadaMP+compraProyectadaMP-presupuestoVentaMP,inventarioFinalSemanaMP=inventarioFinalSemanaMP<0?0:inventarioFinalSemanaMP,estadoCompra=0!=compraProyectadaMP,inventarioTransitoProxima=yield _this4.calcularInventarioSemanaTR(semanaFecha+1,item,zona),compraSolicitadaProximaSemana=yield _this4.calcularComprasSolicitadasSemana(semanaFecha+1,item,zona),compraProyectadaProximaSemana=yield _this4.calcularComprasProyectadasSemana(semanaFecha+1,item,zona),presupuestoProximaSemana=yield _this4.calcularPresupuestoSemana(eval(semanaFecha)+1,item,zona),inventarioFinalProximaSemana=inventarioFinalSemanaMP+inventarioTransitoProxima+compraSolicitadaProximaSemana+compraProyectadaProximaSemana-presupuestoProximaSemana,necesidadCompra=inventarioFinalProximaSemana<minMpZona?"Si":"No",cantidadCompraSugerida="Si"==necesidadCompra?eval(maxMpZona)-inventarioFinalSemanaMP:0,inventarioFinalSemanaSugerido=inventarioFinalSemanaMP+cantidadCompraSugerida,infoLinea={lineaid,fechasemana:_this4.fechaInicioSemana(new Date(fechasemana)),semana:semanaFecha,semanaMes,numeroSemanaMes:semanaMes.substring(0,1),itemSeleccionado:item+" - "+_this4.itemsMP.filter(_=>_.itemcode==item)[0].ItemName,zonaSeleccionada:_this4.zonas.filter(_=>_.State==zona)[0].PENTRADA,inventarioSemanaMP,inventarioSemanaPT,inventarioSemanaMPZF,inventarioSemanaMPTR,compraSolicitadaMP,compraProyectadaMP,presupuestoVentaMP,presupuestoVentaMPOriginal:presupuestoVentaMP,inventarioFinalSemanaMP,estadoCompra,necesidadCompra,cantidadCompraSugerida,inventarioFinalSemanaSugerido,classCantidad:inventarioFinalSemanaMP<minMpZona?"c-min-stock":inventarioFinalSemanaMP>maxMpZona?"c-max-stock":""},infoLineaSimulacion={itemcode:item,codigozona:zona,itemname:_this4.itemsMP.filter(_=>_.itemcode==item)[0].ItemName,zona:_this4.zonas.filter(_=>_.State==zona)[0].PENTRADA,fecha:_this4.fechaInicioSemana(new Date(fechasemana)),semana:semanaFecha,semanames:semanaMes,inventarioMP:inventarioSemanaMP,inventarioMPPT:inventarioSemanaPT,inventarioMPZF:inventarioSemanaMPZF,inventarioTransito:inventarioSemanaMPTR,inventarioSolped:compraSolicitadaMP,inventarioProyecciones:compraProyectadaMP,presupuestoConsumo:presupuestoVentaMP,inventarioFinal:inventarioFinalSemanaMP,necesidadCompra,cantidadSugerida:cantidadCompraSugerida,inventarioFinalSugerido:inventarioFinalSemanaSugerido,tipo,tolerancia:_this4.tolerancia,bodega:"900"==zona?"AD_SANTA":"AD_BVTA"},inventarioSemanaMP=inventarioFinalSemanaMP>0?inventarioFinalSemanaMP:0,inventarioSemanaPT=0,inventarioSemanaMPZF=0,inventarioSolicitadoMPPreFecha=0,inventarioTramsitoMPPreFecha=0,lineasCalculadora.push(infoLineaSimulacion),lineaid++);return lineasCalculadora})()}simulacionSinProyeccion(item,zona){var _this5=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.Z)(function*(){let lineasRecalculo=[],lineasRecalculoSimulacionSP=[],lineaid=0,infoLinea,infoLineaSimulacion,fechasemana,semana=0,semanaMes="",inventarioSemanaMP=0,inventarioSemanaMPTR=0,compraSolicitadaMP=0,presupuestoVentaMP=0,presupuestoVentaMPOriginal=0,compraProyectadaMP=0,inventarioFinalSemanaMP=0,inventarioSemanaPT=0,inventarioSemanaMPZF=0,inventarioTransitoProxima=0,compraSolicitadaProximaSemana=0,compraProyectadaProximaSemana=0,presupuestoProximaSemana=0,inventarioFinalProximaSemana=0,necesidadCompra="",cantidadCompraSugerida=0,inventarioFinalSemanaSugerido=0;for(let linea of _this5.lineasCalculadora)fechasemana=new Date(linea.fechasemana),semana=linea.semana,semanaMes=linea.semanaMes,inventarioSemanaMP=0==lineaid?linea.inventarioSemanaMP:inventarioFinalSemanaMP>0?inventarioFinalSemanaMP:0,inventarioSemanaPT=linea.inventarioSemanaPT,inventarioSemanaMPTR=linea.inventarioSemanaMPTR,inventarioSemanaMPZF=linea.inventarioSemanaMPZF,compraSolicitadaMP=linea.compraSolicitadaMP,compraProyectadaMP=0,presupuestoVentaMP=linea.presupuestoVentaMP,presupuestoVentaMPOriginal=linea.presupuestoVentaMPOriginal,inventarioFinalSemanaMP=(yield eval(0==lineaid?linea.inventarioSemanaMP:inventarioFinalSemanaMP))+eval(linea.inventarioSemanaPT)+eval(linea.inventarioSemanaMPZF)+eval(linea.inventarioSemanaMPTR)+eval(linea.compraSolicitadaMP)-eval(linea.presupuestoVentaMP),inventarioFinalSemanaMP=inventarioFinalSemanaMP<0?0:inventarioFinalSemanaMP,inventarioTransitoProxima=lineaid<_this5.lineasCalculadora.length-1?_this5.lineasCalculadora[lineaid+1].inventarioSemanaMPTR:0,compraSolicitadaProximaSemana=lineaid<_this5.lineasCalculadora.length-1?_this5.lineasCalculadora[lineaid+1].compraSolicitadaMP:0,compraProyectadaProximaSemana=0,presupuestoProximaSemana=lineaid<_this5.lineasCalculadora.length-1?_this5.lineasCalculadora[lineaid+1].presupuestoVentaMP:0,inventarioFinalProximaSemana=inventarioFinalSemanaMP+inventarioTransitoProxima+compraSolicitadaProximaSemana+compraProyectadaProximaSemana-presupuestoProximaSemana,necesidadCompra=inventarioFinalProximaSemana<_this5.minMpZona?"Si":"No",cantidadCompraSugerida="Si"==necesidadCompra?eval(_this5.maxMpZona)-inventarioFinalSemanaMP:0,inventarioFinalSemanaSugerido=inventarioFinalSemanaMP+cantidadCompraSugerida,infoLineaSimulacion={itemcode:item,codigozona:zona,itemname:_this5.itemsMP.filter(_=>_.itemcode==item)[0].ItemName,zona:_this5.zonas.filter(_=>_.State==zona)[0].PENTRADA,fecha:fechasemana,semana,semanames:semanaMes,inventarioMP:inventarioSemanaMP,inventarioMPPT:inventarioSemanaPT,inventarioMPZF:inventarioSemanaMPZF,inventarioTransito:inventarioSemanaMPTR,inventarioSolped:compraSolicitadaMP,inventarioProyecciones:compraProyectadaMP,presupuestoConsumo:presupuestoVentaMP,inventarioFinal:inventarioFinalSemanaMP,necesidadCompra,cantidadSugerida:cantidadCompraSugerida,inventarioFinalSugerido:inventarioFinalSemanaSugerido,tipo:"SP",tolerancia:_this5.tolerancia,bodega:"900"==zona?"AD_SANTA":"AD_BVTA"},lineasRecalculoSimulacionSP.push(infoLineaSimulacion),lineaid++;_this5.simulacionSinProyeciones=lineasRecalculoSimulacionSP})()}simulacionSinTransito(item,zona){var _this6=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.Z)(function*(){let lineasRecalculo=[],lineasRecalculoSinTransito=[],lineaid=0,infoLinea,infoLineaSimulacion,fechasemana,semana=0,semanaMes="",inventarioSemanaMP=0,inventarioSemanaMPTR=0,compraSolicitadaMP=0,presupuestoVentaMP=0,presupuestoVentaMPOriginal=0,compraProyectadaMP=0,inventarioFinalSemanaMP=0,inventarioSemanaPT=0,inventarioSemanaMPZF=0,inventarioTransitoProxima=0,compraSolicitadaProximaSemana=0,compraProyectadaProximaSemana=0,presupuestoProximaSemana=0,inventarioFinalProximaSemana=0,necesidadCompra="",cantidadCompraSugerida=0,inventarioFinalSemanaSugerido=0;for(let linea of _this6.lineasCalculadora)fechasemana=new Date(linea.fechasemana),semana=linea.semana,semanaMes=linea.semanaMes,inventarioSemanaMP=0==lineaid?linea.inventarioSemanaMP:inventarioFinalSemanaMP>0?inventarioFinalSemanaMP:0,inventarioSemanaPT=linea.inventarioSemanaPT,inventarioSemanaMPTR=0,inventarioSemanaMPZF=linea.inventarioSemanaMPZF,compraSolicitadaMP=0,compraProyectadaMP=0,presupuestoVentaMP=linea.presupuestoVentaMP,presupuestoVentaMPOriginal=linea.presupuestoVentaMPOriginal,inventarioFinalSemanaMP=(yield eval(0==lineaid?linea.inventarioSemanaMP:inventarioFinalSemanaMP))+eval(linea.inventarioSemanaPT)+eval(linea.inventarioSemanaMPZF)-eval(linea.presupuestoVentaMP),inventarioFinalSemanaMP=inventarioFinalSemanaMP<0?0:inventarioFinalSemanaMP,inventarioTransitoProxima=lineaid<_this6.lineasCalculadora.length-1?_this6.lineasCalculadora[lineaid+1].inventarioSemanaMPTR:0,compraSolicitadaProximaSemana=lineaid<_this6.lineasCalculadora.length-1?_this6.lineasCalculadora[lineaid+1].compraSolicitadaMP:0,compraProyectadaProximaSemana=0,presupuestoProximaSemana=lineaid<_this6.lineasCalculadora.length-1?_this6.lineasCalculadora[lineaid+1].presupuestoVentaMP:0,inventarioFinalProximaSemana=inventarioFinalSemanaMP+inventarioTransitoProxima+compraSolicitadaProximaSemana+compraProyectadaProximaSemana-presupuestoProximaSemana,necesidadCompra=inventarioFinalProximaSemana<_this6.minMpZona?"Si":"No",cantidadCompraSugerida="Si"==necesidadCompra?eval(_this6.maxMpZona)-inventarioFinalSemanaMP:0,inventarioFinalSemanaSugerido=inventarioFinalSemanaMP+cantidadCompraSugerida,infoLineaSimulacion={itemcode:item,codigozona:zona,itemname:_this6.itemsMP.filter(_=>_.itemcode==item)[0].ItemName,zona:_this6.zonas.filter(_=>_.State==zona)[0].PENTRADA,fecha:fechasemana,semana,semanames:semanaMes,inventarioMP:inventarioSemanaMP,inventarioMPPT:inventarioSemanaPT,inventarioMPZF:inventarioSemanaMPZF,inventarioTransito:inventarioSemanaMPTR,inventarioSolped:compraSolicitadaMP,inventarioProyecciones:compraProyectadaMP,presupuestoConsumo:presupuestoVentaMP,inventarioFinal:inventarioFinalSemanaMP,necesidadCompra,cantidadSugerida:cantidadCompraSugerida,inventarioFinalSugerido:inventarioFinalSemanaSugerido,tipo:"ST",tolerancia:_this6.tolerancia,bodega:"900"==zona?"AD_SANTA":"AD_BVTA"},lineasRecalculoSinTransito.push(infoLineaSimulacion),lineaid++;_this6.simulacionSinTransitoMP=lineasRecalculoSinTransito})()}getInventarioInicial(_,a,e){let r=0,o=this.arregloInvetariosMP.filter(i=>i.item==a&&i.zona==e);return"MP"===_&&o.length>0&&(r=o[0].inventariosMP.inventarioMP),"PT"===_&&o.length>0&&(r=o[0].inventariosMP.inventarioPT),r}calcularComprasSolicitadasPreFecha(item,zona){let compraSolicitadaMP=0,filas=this.arregloInvetariosTracking.filter(_=>_.item==item&&_.zona==zona).length>0?this.arregloInvetariosTracking.filter(_=>_.item==item&&_.zona==zona)[0].inventarioSolicitadoMPPreFecha:[];for(let fila of filas)compraSolicitadaMP+=eval(fila.OpenCreQty);return compraSolicitadaMP}calcularInventarioTRPreFecha(item,zona){let inventarioSemanaMPTR=0,filas=this.arregloInvetariosTracking.filter(_=>_.item==item&&_.zona==zona).length>0?this.arregloInvetariosTracking.filter(_=>_.item==item&&_.zona==zona)[0].inventarioTramsitoMPPreFecha:[];for(let fila of filas)inventarioSemanaMPTR+=eval(fila.OpenCreQty);return inventarioSemanaMPTR}numeroDeSemana(_){let o=(_=new Date(Date.UTC(_.getFullYear(),_.getMonth(),_.getDate()))).getUTCDay();0===o&&(o=7),_.setUTCDate(_.getUTCDate()-o+4);const i=new Date(Date.UTC(_.getUTCFullYear(),0,1));return Math.ceil(((_-i)/864e5+1)/7)}semanaDelMes(_){var a=this;return(0,C_xampp_htdocs_development_Angular_FRONTEND_NitroPortal2_0_nitrosap_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_4__.Z)(function*(){let e="",r=_;r.setHours(0,0,0);let o=yield a.siguienteMes(_);o.setHours(0,0,0);let i=yield a.fechaInicioSemana(o);i.setHours(0,0,0);let c=r.getDate(),P=r.getDay(),u=Math.ceil((c-1-P)/7),p=a.mesesAnio.filter(d=>d.mes===r.getMonth()+1)[0].mesStr.substring(0,3).toUpperCase();return r.getFullYear()===i.getFullYear()&&r.getMonth()===i.getMonth()&&r.getDate()===i.getDate()&&(u=0,p=a.mesesAnio.filter(d=>d.mes===o.getMonth()+1)[0].mesStr.substring(0,3).toUpperCase()),e=`${u+1}S - ${p}`,e})()}siguienteMes(_){let a=11==_.getMonth()?_.getFullYear()+1:_.getFullYear(),e=11==_.getMonth()?0:_.getMonth()+1;return new Date(a,e,1)}calcularInventarioSemanaTR(semanaFecha,item,zona){let inventarioSemanaMPTR=0,inventarioTramsitoMP=this.arregloInvetariosTracking.filter(_=>_.item==item&&_.zona==zona).length>0?this.arregloInvetariosTracking.filter(_=>_.item==item&&_.zona==zona)[0].inventarioTramsitoMP:[];if(inventarioTramsitoMP.length>0&&inventarioTramsitoMP.filter(_=>this.numeroDeSemana(new Date(_.ETA))==semanaFecha).length>0){let filas=inventarioTramsitoMP.filter(_=>this.numeroDeSemana(new Date(_.ETA))==semanaFecha);for(let fila of filas)inventarioSemanaMPTR+=eval(fila.OpenCreQty)}return inventarioSemanaMPTR}calcularComprasSolicitadasSemana(semanaFecha,item,zona){let compraSolicitadaMP=0,inventarioSolicitadoMP=this.arregloInvetariosTracking.filter(_=>_.item==item&&_.zona==zona).length>0?this.arregloInvetariosTracking.filter(_=>_.item==item&&_.zona==zona)[0].inventarioSolicitadoMP:[];if(inventarioSolicitadoMP.length>0&&inventarioSolicitadoMP.filter(_=>this.numeroDeSemana(new Date(_.FECHANECESIDAD))==semanaFecha).length>0){let filas=inventarioSolicitadoMP.filter(_=>this.numeroDeSemana(new Date(_.FECHANECESIDAD))==semanaFecha);for(let fila of filas)compraSolicitadaMP+=eval(fila.OpenCreQty)}return compraSolicitadaMP}calcularComprasProyectadasSemana(semanaFecha,item,zona){let compraProyectadaMP=0,inventarioProyectadoMP=this.arregloInvetariosTracking.filter(_=>_.item==item&&_.zona==zona)[0].inventarioProyectadoMP;if(inventarioProyectadoMP.length>0&&inventarioProyectadoMP.filter(_=>this.numeroDeSemana(new Date(_.FECHANECESIDAD))==semanaFecha).length>0){let filas=inventarioProyectadoMP.filter(_=>this.numeroDeSemana(new Date(_.FECHANECESIDAD))==semanaFecha);for(let fila of filas)compraProyectadaMP+=eval(fila.Quantity)}return compraProyectadaMP}calcularPresupuestoSemana(semanaFecha,item,zona){let presupuestoVentaMP=0,presupuestoMPVenta=this.arregloPresupuestoMPVenta.filter(_=>_.item==item&&_.zona==zona).length>0?this.arregloPresupuestoMPVenta.filter(_=>_.item==item&&_.zona==zona)[0].presupuestoMPVenta:[];if(presupuestoMPVenta.length>0&&presupuestoMPVenta.filter(_=>_.semana==semanaFecha).length>0){let filas=presupuestoMPVenta.filter(_=>_.semana==semanaFecha);for(let fila of filas)presupuestoVentaMP+=eval(fila.cantidad)}return presupuestoVentaMP}}SimulacionAutomaticaComponent.\u0275fac=function _(a){return new(a||SimulacionAutomaticaComponent)(_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_6__.gz),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(src_app_demo_service_compras_service__WEBPACK_IMPORTED_MODULE_0__.K),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(_angular_router__WEBPACK_IMPORTED_MODULE_6__.F0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(primeng_api__WEBPACK_IMPORTED_MODULE_7__.YP),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(primeng_api__WEBPACK_IMPORTED_MODULE_7__.ez),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(src_app_demo_service_auth_service__WEBPACK_IMPORTED_MODULE_1__.e),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Y36(src_app_demo_service_sap_service__WEBPACK_IMPORTED_MODULE_2__.c))},SimulacionAutomaticaComponent.\u0275cmp=_angular_core__WEBPACK_IMPORTED_MODULE_3__.Xpm({type:SimulacionAutomaticaComponent,selectors:[["app-simulacion-automatica"]],features:[_angular_core__WEBPACK_IMPORTED_MODULE_3__._Bn([primeng_api__WEBPACK_IMPORTED_MODULE_7__.ez,primeng_api__WEBPACK_IMPORTED_MODULE_7__.YP])],decls:4,vars:8,consts:[["header","Cargando",3,"visible","modal","draggable","resizable","visibleChange"],[1,"m-0"],["class","field col",4,"ngIf"],[1,"field","col"],["mode","indeterminate"]],template:function _(a,e){1&a&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__._UZ(0,"p-toast"),_angular_core__WEBPACK_IMPORTED_MODULE_3__.TgZ(1,"p-dialog",0),_angular_core__WEBPACK_IMPORTED_MODULE_3__.NdJ("visibleChange",function(o){return e.displayModal=o}),_angular_core__WEBPACK_IMPORTED_MODULE_3__._UZ(2,"p",1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.YNc(3,SimulacionAutomaticaComponent_div_3_Template,2,3,"div",2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.qZA()),2&a&&(_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Akn(_angular_core__WEBPACK_IMPORTED_MODULE_3__.DdM(7,_c1)),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("visible",e.displayModal)("modal",!0)("draggable",!1)("resizable",!1),_angular_core__WEBPACK_IMPORTED_MODULE_3__.xp6(2),_angular_core__WEBPACK_IMPORTED_MODULE_3__.Q6J("ngIf",e.loadingCargue))},dependencies:[_angular_common__WEBPACK_IMPORTED_MODULE_8__.O5,primeng_dialog__WEBPACK_IMPORTED_MODULE_9__.V,primeng_progressbar__WEBPACK_IMPORTED_MODULE_10__.k,primeng_toast__WEBPACK_IMPORTED_MODULE_11__.FN],styles:["[_nghost-%COMP%]     .p-frozen-column{font-weight:700}[_nghost-%COMP%]     .p-datatable-frozen-tbody{font-weight:700}[_nghost-%COMP%]     .p-progressbar{height:.5rem}.c-min-stock[_ngcontent-%COMP%]{color:red;font-weight:700}.c-max-stock[_ngcontent-%COMP%]{color:green;font-weight:700}"]})},8372:(_,a,e)=>{e.d(a,{b:()=>c});var r=e(4986),o=e(4482),i=e(5403);function c(P,u=r.z){return(0,o.e)((p,d)=>{let D=null,g=null,T=null;const n=()=>{if(D){D.unsubscribe(),D=null;const I=g;g=null,d.next(I)}};function A(){const I=T+P,B=u.now();if(B<I)return D=this.schedule(void 0,I-B),void d.add(D);n()}p.subscribe((0,i.x)(d,I=>{g=I,T=u.now(),D||(D=u.schedule(A,P),d.add(D))},()=>{n(),d.complete()},void 0,()=>{g=D=null}))})}},6296:(_,a,e)=>{function r(i){var c,P,u,p=2;for(typeof Symbol<"u"&&(P=Symbol.asyncIterator,u=Symbol.iterator);p--;){if(P&&null!=(c=i[P]))return c.call(i);if(u&&null!=(c=i[u]))return new o(c.call(i));P="@@asyncIterator",u="@@iterator"}throw new TypeError("Object is not async iterable")}function o(i){function c(P){if(Object(P)!==P)return Promise.reject(new TypeError(P+" is not an object."));var u=P.done;return Promise.resolve(P.value).then(function(p){return{value:p,done:u}})}return(o=function(u){this.s=u,this.n=u.next}).prototype={s:null,n:null,next:function(){return c(this.n.apply(this.s,arguments))},return:function(u){var p=this.s.return;return void 0===p?Promise.resolve({value:u,done:!0}):c(p.apply(this.s,arguments))},throw:function(u){var p=this.s.return;return void 0===p?Promise.reject(u):c(p.apply(this.s,arguments))}},new o(i)}e.d(a,{Z:()=>r})}}]);