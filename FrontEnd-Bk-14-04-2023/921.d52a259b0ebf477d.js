"use strict";(self.webpackChunksakai=self.webpackChunksakai||[]).push([[921],{2921:(H,F,r)=>{r.r(F),r.d(F,{UsuariosModule:()=>_});var m=r(6895),u=r(4006),c=r(9335),d=r(805),e=r(4650),f=r(9701),v=r(1562),A=r(5593),q=r(5108),J=r(2210),M=r(7772),y=r(1740),N=r(3425),w=r(5362);function x(i,t){if(1&i){const s=e.EpF();e.TgZ(0,"div",27)(1,"div",28),e._uU(2),e.qZA(),e.TgZ(3,"div")(4,"p-selectButton",29),e.NdJ("ngModelChange",function(n){const l=e.CHM(s).$implicit;return e.KtG(l.perfil_user=n)})("onChange",function(){const a=e.CHM(s).$implicit,l=e.oxw();return e.KtG(l.setPerfilUser(a.perfil_user,a.id))}),e.qZA()()()}if(2&i){const s=t.$implicit,o=e.oxw();e.xp6(2),e.Oqu(s.perfil),e.xp6(2),e.Q6J("options",o.opciones)("ngModel",s.perfil_user)}}function B(i,t){if(1&i){const s=e.EpF();e.TgZ(0,"div",27)(1,"div",28),e._uU(2),e.qZA(),e.TgZ(3,"div")(4,"p-selectButton",29),e.NdJ("ngModelChange",function(n){const l=e.CHM(s).$implicit;return e.KtG(l.company_access=n)})("onChange",function(){const a=e.CHM(s).$implicit,l=e.oxw();return e.KtG(l.setAccess(a.company_access,a.id))}),e.qZA()()()}if(2&i){const s=t.$implicit,o=e.oxw();e.xp6(2),e.Oqu(s.companyname),e.xp6(2),e.Q6J("options",o.opciones)("ngModel",s.company_access)}}const g=function(i){return{"ng-invalid ng-dirty":i}};class C{constructor(t,s,o){this.rutaActiva=t,this.adminService=s,this.authService=o,this.fullname="",this.email="",this.username="",this.codusersap="",this.password="",this.password2="",this.status="",this.perfiles=[],this.companies=[],this.submitted=!1,this.messageForm=[],this.submitBotton=!1,this.estados=[{name:"Activo",code:"A"},{name:"Inactivo",code:"I"}],this.opciones=[]}ngOnInit(){this.opciones=[{label:"No",value:0},{label:"Si",value:1}],this.items=[{label:"Informaci\xf3n usuario",icon:"pi pi-fw pi-user-edit"},{label:"Perfiles",icon:"pi pi-fw pi-id-card"},{label:"Empresas",icon:"pi pi-fw pi-building"}],this.userSelected=this.rutaActiva.snapshot.params,this.adminService.getUserById(this.authService.getToken(),this.userSelected.user).subscribe({next:t=>{this.fullname=t[0].fullname,this.email=t[0].email,this.codusersap=t[0].codusersap,this.status=t[0].status,this.username=t[0].username,this.getPerfiles(),this.getCompanies()},error:t=>{this.submitBotton=!1,console.error(t)}})}saveUser(){if(this.submitted=!0,this.fullname&&this.email&&this.username&&this.codusersap&&this.status)if(this.password!=this.password2)this.messageForm=[{severity:"error",summary:"!Opps\xa1",detail:"Las contrase\xf1as no conciden",life:3e3}];else{this.submitBotton=!0;const t={id:this.userSelected.user,fullname:this.fullname,email:this.email,username:this.username,status:this.status,codusersap:this.codusersap};""!==this.password&&(t.password=this.password),this.adminService.updateUser(this.authService.getToken(),t).subscribe({next:s=>{this.messageForm=[{severity:"success",summary:"!Genial\xa1",detail:`Ha actualizado el usuario ${this.fullname}`,life:3e3}]},error:s=>{this.submitBotton=!1,console.error(s)}})}else this.messageForm=[{severity:"error",summary:"!Opps\xa1",detail:"Debe diligenciar los campos resaltados en rojo",life:3e3}]}getPerfiles(){this.adminService.getPerfilesUser(this.authService.getToken(),this.userSelected.user).subscribe({next:t=>{console.log(t),this.perfiles=t},error:t=>{this.submitBotton=!1,console.log(t)}})}setPerfilUser(t,s){console.log(t,s);let o={id_perfil:s,id_user:this.userSelected.user,valor:t};console.log(o),this.adminService.setPerfilUser(this.authService.getToken(),o).subscribe({next:n=>{console.log(n)},error:n=>{console.log(n)}})}getCompanies(){this.adminService.getCompaniesUser(this.authService.getToken(),this.userSelected.user).subscribe({next:t=>{this.companies=t},error:t=>{this.submitBotton=!1,console.error(t)}})}setAccess(t,s){let o={id_company:s,id_user:this.userSelected.user,valor:t};console.log(o),this.adminService.setAccess(this.authService.getToken(),o).subscribe({next:n=>{},error:n=>{console.error(n)}})}clear(){this.submitBotton=!1,this.fullname="",this.status="",this.email="",this.username="",this.codusersap="",this.password="",this.password2=""}}function E(i,t){if(1&i){const s=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e._uU(2),e.qZA(),e.TgZ(3,"div")(4,"p-selectButton",12),e.NdJ("ngModelChange",function(n){const l=e.CHM(s).$implicit;return e.KtG(l.company_access=n)})("onChange",function(){const a=e.CHM(s).$implicit,l=e.oxw();return e.KtG(l.setAccess(a.company_access,a.id))}),e.qZA()()()}if(2&i){const s=t.$implicit,o=e.oxw();e.xp6(2),e.Oqu(s.companyname),e.xp6(2),e.Q6J("options",o.estados)("ngModel",s.company_access)}}C.\u0275fac=function(t){return new(t||C)(e.Y36(c.gz),e.Y36(f.l),e.Y36(v.e))},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-editar-usuario"]],features:[e._Bn([d.ez])],decls:55,vars:30,consts:[[1,"grid"],[1,"col-12","md:col-12"],[1,"card","p-fluid"],[3,"value","valueChange"],[1,"field","col"],["htmlFor","fullname"],["pInputText","","id","fullname","name","fullname","type","text","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["htmlFor","email"],["pInputText","","id","email","name","email","type","email","required","",3,"ngModel","ngClass","ngModelChange"],["htmlFor","status"],["optionLabel","name","optionValue","code","id","status","name","status","placeholder","Seleccione el estado",3,"options","ngModel","required","ngClass","ngModelChange"],["htmlFor","codusersap"],["pInputText","","id","codusersap","name","codusersap","type","text","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["htmlFor","username"],["pInputText","","id","username","name","username","type","text","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["htmlFor","password"],["id","password","name","password",3,"ngModel","ngModelChange"],["htmlFor","password2"],["id","password2","name","password2",3,"ngModel","ngClass","ngModelChange"],[1,"col"],["pButton","","label","Guardar","icon","pi pi-save",1,"p-button-outlined","mb-2","p-button-success",3,"click"],["align","left"],[1,"inline-flex","align-items-center"],[1,"pi","pi-id-card","mr-2"],[1,"grid","text-center"],["class","col-4",4,"ngFor","ngForOf"],[1,"pi","pi-building","mr-2"],[1,"col-4"],[1,"font-bold"],["optionLabel","label","optionValue","value",3,"options","ngModel","ngModelChange","onChange"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-messages",3),e.NdJ("valueChange",function(n){return s.messageForm=n}),e.qZA(),e.TgZ(4,"h5"),e._uU(5,"Editar usuario"),e.qZA(),e.TgZ(6,"div",0)(7,"div",4)(8,"label",5),e._uU(9,"Nombre completo"),e.qZA(),e.TgZ(10,"input",6),e.NdJ("ngModelChange",function(n){return s.fullname=n}),e.qZA()(),e.TgZ(11,"div",4)(12,"label",7),e._uU(13,"Email"),e.qZA(),e.TgZ(14,"input",8),e.NdJ("ngModelChange",function(n){return s.email=n}),e.qZA()()(),e.TgZ(15,"div",0)(16,"div",4)(17,"label",9),e._uU(18,"Estado"),e.qZA(),e.TgZ(19,"p-dropdown",10),e.NdJ("ngModelChange",function(n){return s.status=n}),e.qZA()()(),e.TgZ(20,"div",0)(21,"div",4)(22,"label",11),e._uU(23,"Usuario SAP"),e.qZA(),e.TgZ(24,"input",12),e.NdJ("ngModelChange",function(n){return s.codusersap=n}),e.qZA()(),e.TgZ(25,"div",4)(26,"label",13),e._uU(27,"Usuario portal"),e.qZA(),e.TgZ(28,"input",14),e.NdJ("ngModelChange",function(n){return s.username=n}),e.qZA()()(),e.TgZ(29,"div",0)(30,"div",4)(31,"label",15),e._uU(32,"Contrase\xf1a"),e.qZA(),e.TgZ(33,"p-password",16),e.NdJ("ngModelChange",function(n){return s.password=n}),e.qZA()(),e.TgZ(34,"div",4)(35,"label",17),e._uU(36,"Repetir contrase\xf1a"),e.qZA(),e.TgZ(37,"p-password",18),e.NdJ("ngModelChange",function(n){return s.password2=n}),e.qZA()()(),e.TgZ(38,"div",0)(39,"div",19)(40,"button",20),e.NdJ("click",function(){return s.saveUser()}),e.qZA()()(),e.TgZ(41,"p-divider",21)(42,"div",22),e._UZ(43,"i",23),e.TgZ(44,"b"),e._uU(45,"Perfiles"),e.qZA()()(),e.TgZ(46,"div",24),e.YNc(47,x,5,3,"div",25),e.qZA(),e.TgZ(48,"p-divider",21)(49,"div",22),e._UZ(50,"i",26),e.TgZ(51,"b"),e._uU(52,"Empresas"),e.qZA()()(),e.TgZ(53,"div",24),e.YNc(54,B,5,3,"div",25),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("value",s.messageForm),e.xp6(7),e.Q6J("ngModel",s.fullname)("ngClass",e.VKq(18,g,s.submitted&&!s.fullname)),e.xp6(4),e.Q6J("ngModel",s.email)("ngClass",e.VKq(20,g,s.submitted&&!s.email)),e.xp6(5),e.Q6J("options",s.estados)("ngModel",s.status)("required",!0)("ngClass",e.VKq(22,g,s.submitted&&!s.status)),e.xp6(5),e.Q6J("ngModel",s.codusersap)("ngClass",e.VKq(24,g,s.submitted&&!s.codusersap)),e.xp6(4),e.Q6J("ngModel",s.username)("ngClass",e.VKq(26,g,s.submitted&&!s.username)),e.xp6(5),e.Q6J("ngModel",s.password),e.xp6(4),e.Q6J("ngModel",s.password2)("ngClass",e.VKq(28,g,s.submitted&&s.password&&!s.password2)),e.xp6(10),e.Q6J("ngForOf",s.perfiles),e.xp6(7),e.Q6J("ngForOf",s.companies))},dependencies:[m.mk,m.sg,u.Fj,u.JJ,u.Q7,u.On,A.Hq,q.i,J.Lt,M.V,y.o,N.ro,w.UN]});class U{constructor(t,s,o){this.rutaActiva=t,this.adminService=s,this.authService=o,this.fullnameUserSelected="",this.companies=[],this.submitted=!1,this.messageForm=[],this.submitBotton=!1,this.estado=0,this.estados=[]}ngOnInit(){this.estados=[{label:"No",value:0},{label:"Si",value:1}],this.userSelected=this.rutaActiva.snapshot.params,this.adminService.getUserById(this.authService.getToken(),this.userSelected.user).subscribe({next:t=>{this.fullnameUserSelected=t[0].fullname},error:t=>{console.error(t)}}),this.adminService.getCompaniesUser(this.authService.getToken(),this.userSelected.user).subscribe({next:t=>{this.companies=t},error:t=>{this.submitBotton=!1,console.error(t)}})}setAccess(t,s){let o={id_company:s,id_user:this.userSelected.user,valor:t};this.adminService.setAccess(this.authService.getToken(),o).subscribe({next:n=>{},error:n=>{console.error(n)}})}}U.\u0275fac=function(t){return new(t||U)(e.Y36(c.gz),e.Y36(f.l),e.Y36(v.e))},U.\u0275cmp=e.Xpm({type:U,selectors:[["app-empresas-usuario"]],features:[e._Bn([d.ez])],decls:15,vars:3,consts:[[1,"grid"],[1,"col-12","md:col-8","col-offset-2"],[1,"card","p-fluid"],[3,"value","valueChange"],[1,"grid","text-center"],[1,"col"],["align","center"],[1,"inline-flex","align-items-center"],[1,"pi","pi-user","mr-2"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],[1,"font-bold"],["optionLabel","label","optionValue","value",3,"options","ngModel","ngModelChange","onChange"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-messages",3),e.NdJ("valueChange",function(n){return s.messageForm=n}),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"h5"),e._uU(7,"Configuaci\xf3n de accesos a empresas"),e.qZA()()(),e.TgZ(8,"p-divider",6)(9,"div",7),e._UZ(10,"i",8),e.TgZ(11,"b"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",4),e.YNc(14,E,5,3,"div",9),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("value",s.messageForm),e.xp6(9),e.Oqu(s.fullnameUserSelected),e.xp6(2),e.Q6J("ngForOf",s.companies))},dependencies:[m.sg,u.JJ,u.On,q.i,M.V,w.UN]});const p=function(i){return{"ng-invalid ng-dirty":i}};class Z{constructor(t,s,o){this.messageService=t,this.adminService=s,this.authService=o,this.fullname="",this.email="",this.username="",this.codusersap="",this.password="",this.password2="",this.status="",this.submitted=!1,this.messageForm=[],this.submitBotton=!1,this.estados=[{name:"Activo",code:"A"},{name:"Inactivo",code:"I"}]}ngOnInit(){}saveUser(){if(this.submitted=!0,this.fullname&&this.email&&this.username&&this.codusersap&&this.password&&this.status)if(this.password!=this.password2)this.messageForm=[{severity:"error",summary:"!Opps\xa1",detail:"Las contrase\xf1as no conciden",life:3e3}];else{this.submitBotton=!0;const t={fullname:this.fullname,email:this.email,username:this.username,password:this.password,codusersap:this.codusersap,status:this.status};this.adminService.saveUser(this.authService.getToken(),t).subscribe({next:s=>{this.messageForm=[{severity:"success",summary:"!Genial\xa1",detail:`Ha registrado el usuario ${this.fullname}`,life:3e3}]},error:s=>{this.submitBotton=!1,console.error(s)}})}else this.messageForm=[{severity:"error",summary:"!Opps\xa1",detail:"Debe diligenciar los campos resaltados en rojo",life:3e3}]}clear(){this.submitBotton=!1,this.submitted=!1,this.fullname="",this.status="",this.email="",this.username="",this.password="",this.codusersap=""}}function Q(i,t){if(1&i){const s=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e._uU(2),e.qZA(),e.TgZ(3,"div")(4,"p-selectButton",12),e.NdJ("ngModelChange",function(n){const l=e.CHM(s).$implicit;return e.KtG(l.perfil_user=n)})("onChange",function(){const a=e.CHM(s).$implicit,l=e.oxw();return e.KtG(l.setPerfilUser(a.perfil_user,a.id))}),e.qZA()()()}if(2&i){const s=t.$implicit,o=e.oxw();e.xp6(2),e.Oqu(s.perfil),e.xp6(2),e.Q6J("options",o.estados)("ngModel",s.perfil_user)}}Z.\u0275fac=function(t){return new(t||Z)(e.Y36(d.ez),e.Y36(f.l),e.Y36(v.e))},Z.\u0275cmp=e.Xpm({type:Z,selectors:[["app-nuevo-usuario"]],features:[e._Bn([d.ez])],decls:39,vars:32,consts:[[1,"grid"],[1,"col-12","md:col-6","col-offset-3"],[1,"card","p-fluid"],[3,"value","valueChange"],[1,"field"],["htmlFor","fullname"],["pInputText","","id","fullname","name","fullname","type","text","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["htmlFor","email"],["pInputText","","id","email","name","email","type","email","required","",3,"ngModel","ngClass","ngModelChange"],["htmlFor","status"],["optionLabel","name","optionValue","code","id","status","name","status","placeholder","Seleccione el estado",3,"options","ngModel","required","ngClass","ngModelChange"],["htmlFor","codusersap"],["pInputText","","id","codusersap","name","codusersap","type","text","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["htmlFor","username"],["pInputText","","id","username","name","username","type","text","required","","autofocus","",3,"ngModel","ngClass","ngModelChange"],["htmlFor","password"],["id","password","name","password",3,"ngModel","ngClass","ngModelChange"],["htmlFor","password2"],["id","password2","name","password2",3,"ngModel","ngClass","ngModelChange"],[1,"col"],["pButton","","label","Guardar","icon","pi pi-save",1,"p-button-outlined","mb-2","p-button-success",3,"disabled","click"],["pButton","","label","Limpiar","icon","pi pi-list",1,"p-button-outlined","mb-2","p-button-primary",3,"click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-messages",3),e.NdJ("valueChange",function(n){return s.messageForm=n}),e.qZA(),e.TgZ(4,"h5"),e._uU(5,"Nuevo usuario"),e.qZA(),e.TgZ(6,"div",4)(7,"label",5),e._uU(8,"Nombre completo"),e.qZA(),e.TgZ(9,"input",6),e.NdJ("ngModelChange",function(n){return s.fullname=n}),e.qZA()(),e.TgZ(10,"div",4)(11,"label",7),e._uU(12,"Email"),e.qZA(),e.TgZ(13,"input",8),e.NdJ("ngModelChange",function(n){return s.email=n}),e.qZA()(),e.TgZ(14,"div",4)(15,"label",9),e._uU(16,"Estado"),e.qZA(),e.TgZ(17,"p-dropdown",10),e.NdJ("ngModelChange",function(n){return s.status=n}),e.qZA()(),e.TgZ(18,"div",4)(19,"label",11),e._uU(20,"Usuario SAP"),e.qZA(),e.TgZ(21,"input",12),e.NdJ("ngModelChange",function(n){return s.codusersap=n}),e.qZA()(),e.TgZ(22,"div",4)(23,"label",13),e._uU(24,"Usuario portal"),e.qZA(),e.TgZ(25,"input",14),e.NdJ("ngModelChange",function(n){return s.username=n}),e.qZA()(),e.TgZ(26,"div",4)(27,"label",15),e._uU(28,"Contrase\xf1a"),e.qZA(),e.TgZ(29,"p-password",16),e.NdJ("ngModelChange",function(n){return s.password=n}),e.qZA()(),e.TgZ(30,"div",4)(31,"label",17),e._uU(32,"Repetir contrase\xf1a"),e.qZA(),e.TgZ(33,"p-password",18),e.NdJ("ngModelChange",function(n){return s.password2=n}),e.qZA()(),e.TgZ(34,"div",0)(35,"div",19)(36,"button",20),e.NdJ("click",function(){return s.saveUser()}),e.qZA()(),e.TgZ(37,"div",19)(38,"button",21),e.NdJ("click",function(){return s.clear()}),e.qZA()()()()()()),2&t&&(e.xp6(3),e.Q6J("value",s.messageForm),e.xp6(6),e.Q6J("ngModel",s.fullname)("ngClass",e.VKq(18,p,s.submitted&&!s.fullname)),e.xp6(4),e.Q6J("ngModel",s.email)("ngClass",e.VKq(20,p,s.submitted&&!s.email)),e.xp6(4),e.Q6J("options",s.estados)("ngModel",s.status)("required",!0)("ngClass",e.VKq(22,p,s.submitted&&!s.status)),e.xp6(4),e.Q6J("ngModel",s.codusersap)("ngClass",e.VKq(24,p,s.submitted&&!s.codusersap)),e.xp6(4),e.Q6J("ngModel",s.username)("ngClass",e.VKq(26,p,s.submitted&&!s.username)),e.xp6(4),e.Q6J("ngModel",s.password)("ngClass",e.VKq(28,p,s.submitted&&!s.password)),e.xp6(4),e.Q6J("ngModel",s.password2)("ngClass",e.VKq(30,p,s.submitted&&!s.password2)),e.xp6(3),e.Q6J("disabled",s.submitBotton))},dependencies:[m.mk,u.Fj,u.JJ,u.Q7,u.On,A.Hq,J.Lt,M.V,y.o,N.ro],styles:["[_nghost-%COMP%]     .p-password input{width:100%}"]});class b{constructor(t,s,o){this.rutaActiva=t,this.adminService=s,this.authService=o,this.fullnameUserSelected="",this.perfiles=[],this.submitted=!1,this.messageForm=[],this.submitBotton=!1,this.estado=0,this.estados=[]}ngOnInit(){this.estados=[{label:"No",value:0},{label:"Si",value:1}],this.userSelected=this.rutaActiva.snapshot.params,console.log(this.userSelected.user),this.adminService.getUserById(this.authService.getToken(),this.userSelected.user).subscribe({next:t=>{console.log(t),this.fullnameUserSelected=t[0].fullname},error:t=>{console.log(t)}}),this.adminService.getPerfilesUser(this.authService.getToken(),this.userSelected.user).subscribe({next:t=>{console.log(t),this.perfiles=t},error:t=>{this.submitBotton=!1,console.log(t)}})}setPerfilUser(t,s){console.log(t,s);let o={id_perfil:s,id_user:this.userSelected.user,valor:t};console.log(o),this.adminService.setPerfilUser(this.authService.getToken(),o).subscribe({next:n=>{console.log(n)},error:n=>{console.log(n)}})}}b.\u0275fac=function(t){return new(t||b)(e.Y36(c.gz),e.Y36(f.l),e.Y36(v.e))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-perfiles-usuario"]],features:[e._Bn([d.ez])],decls:15,vars:3,consts:[[1,"grid"],[1,"col-12","md:col-8","col-offset-2"],[1,"card","p-fluid"],[3,"value","valueChange"],[1,"grid","text-center"],[1,"col"],["align","center"],[1,"inline-flex","align-items-center"],[1,"pi","pi-user","mr-2"],["class","col-4",4,"ngFor","ngForOf"],[1,"col-4"],[1,"font-bold"],["optionLabel","label","optionValue","value",3,"options","ngModel","ngModelChange","onChange"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-messages",3),e.NdJ("valueChange",function(n){return s.messageForm=n}),e.qZA(),e.TgZ(4,"div",4)(5,"div",5)(6,"h5"),e._uU(7,"Configuaci\xf3n de perfiles de usuario"),e.qZA()()(),e.TgZ(8,"p-divider",6)(9,"div",7),e._UZ(10,"i",8),e.TgZ(11,"b"),e._uU(12),e.qZA()()(),e.TgZ(13,"div",4),e.YNc(14,Q,5,3,"div",9),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("value",s.messageForm),e.xp6(9),e.Oqu(s.fullnameUserSelected),e.xp6(2),e.Q6J("ngForOf",s.perfiles))},dependencies:[m.sg,u.JJ,u.On,q.i,M.V,w.UN]});var S=r(99);const O=["filter"];function P(i,t){if(1&i){const s=e.EpF();e.TgZ(0,"div",10)(1,"div",0)(2,"button",11),e.NdJ("click",function(){e.CHM(s);const n=e.oxw(),a=e.MAs(4);return e.KtG(n.clear(a))}),e.qZA(),e.TgZ(3,"button",12),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.newUser())}),e.qZA(),e.TgZ(4,"button",13),e.NdJ("click",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.editUser())}),e.qZA()(),e.TgZ(5,"span",14),e._UZ(6,"i",15),e.TgZ(7,"input",16,17),e.NdJ("input",function(n){e.CHM(s);const a=e.oxw(),l=e.MAs(4);return e.KtG(a.onGlobalFilter(l,n))}),e.qZA()()()}if(2&i){const s=e.oxw();e.xp6(4),e.Q6J("disabled",!s.selectedUser||1!=s.selectedUser.length)}}function K(i,t){1&i&&(e.TgZ(0,"tr"),e._UZ(1,"th",18),e.TgZ(2,"th")(3,"div",19),e._uU(4," Nombre completo "),e._UZ(5,"p-columnFilter",20),e.qZA()(),e.TgZ(6,"th")(7,"div",19),e._uU(8," Email "),e._UZ(9,"p-columnFilter",21),e.qZA()(),e.TgZ(10,"th")(11,"div",19),e._uU(12," Nombre de usuario "),e._UZ(13,"p-columnFilter",22),e.qZA()(),e.TgZ(14,"th")(15,"div",19),e._uU(16," Usuario SAP "),e._UZ(17,"p-columnFilter",23),e.qZA()(),e.TgZ(18,"th")(19,"div",19),e._uU(20," Estado "),e._UZ(21,"p-columnFilter",24),e.qZA()()())}function Y(i,t){if(1&i&&(e.TgZ(0,"tr")(1,"td"),e._UZ(2,"p-tableCheckbox",25),e.qZA(),e.TgZ(3,"td",26),e._uU(4),e.qZA(),e.TgZ(5,"td",26),e._uU(6),e.qZA(),e.TgZ(7,"td",26),e._uU(8),e.qZA(),e.TgZ(9,"td",26),e._uU(10),e.qZA(),e.TgZ(11,"td",26),e._uU(12),e.qZA()()),2&i){const s=t.$implicit;e.xp6(2),e.Q6J("value",s),e.xp6(2),e.hij(" ",s.fullname," "),e.xp6(2),e.hij(" ",s.email," "),e.xp6(2),e.hij(" ",s.username," "),e.xp6(2),e.hij(" ",s.codusersap," "),e.xp6(2),e.hij(" ",s.status," ")}}function k(i,t){1&i&&(e.TgZ(0,"tr")(1,"td",27),e._uU(2,"No se econtraron usuarios."),e.qZA()())}function I(i,t){1&i&&(e.TgZ(0,"tr")(1,"td",27),e._uU(2,"Cargando usuarios. Por favor espere"),e.qZA()())}const V=function(){return["fullname","email","username","codusersap"]};class T{constructor(t,s,o){this.adminService=t,this.router=s,this.authService=o,this.users=[],this.loading=!0,this.selectedUser=[]}ngOnInit(){this.adminService.listUsuarios(this.authService.getToken()).subscribe({next:t=>{this.loading=!1,this.users=t},error:t=>{console.error(t)}})}newUser(){this.router.navigate(["/portal/admin/usuarios/nuevo"])}editUser(){this.router.navigate(["/portal/admin/usuarios/editar",this.selectedUser[0].id])}companyUser(){this.router.navigate(["/portal/admin/usuarios/empresas",this.selectedUser[0].id])}perfilUser(){this.router.navigate(["/portal/admin/usuarios/perfiles",this.selectedUser[0].id])}formatCurrency(t){return t.toLocaleString("en-US",{style:"currency",currency:"USD"})}onGlobalFilter(t,s){t.filterGlobal(s.target.value,"contains")}clear(t){t.clear(),this.filter.nativeElement.value=""}}T.\u0275fac=function(t){return new(t||T)(e.Y36(f.l),e.Y36(c.F0),e.Y36(v.e))},T.\u0275cmp=e.Xpm({type:T,selectors:[["app-usuarios"]],viewQuery:function(t,s){if(1&t&&e.Gf(O,5),2&t){let o;e.iGM(o=e.CRH())&&(s.filter=o.first)}},features:[e._Bn([d.ez,d.YP])],decls:10,vars:8,consts:[[1,"grid"],[1,"col-12"],[1,"card"],["dataKey","id","styleClass","p-datatable-gridlines","selectionMode","single","responsiveLayout","scroll",3,"value","rows","loading","rowHover","paginator","globalFilterFields","selection","selectionChange"],["dt1",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["pTemplate","loadingbody"],[1,"flex","justify-content-between","flex-column","sm:flex-row"],["pButton","","label","Limpiar","icon","pi pi-filter-slash",1,"p-button-outlined","mb-2","mr-2",3,"click"],["pButton","","label","Nuevo","icon","pi pi-plus",1,"p-button-outlined","mb-2","p-button-success","mr-2",3,"click"],["pButton","","label","Editar","icon","pi pi-pencil",1,"p-button-outlined","mb-2","p-button-secondary","mr-2",3,"disabled","click"],[1,"p-input-icon-left","mb-2"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Buscar por palabra clave",1,"w-full",3,"input"],["filter",""],[2,"width","3rem"],[1,"flex","justify-content-between","align-items-center"],["type","text","field","fullname","display","menu","placeholder","Buscar por nombre"],["type","text","field","email","display","menu","placeholder","Buscar por email"],["type","text","field","username","display","menu","placeholder","Buscar por nombre de usuario"],["type","text","field","codusersap","display","menu","placeholder","Buscar por usuario SAP"],["type","text","field","status","display","menu","placeholder","Buscar por estado"],[3,"value"],[2,"min-width","12rem"],["colspan","7"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p-table",3,4),e.NdJ("selectionChange",function(n){return s.selectedUser=n}),e.YNc(5,P,9,1,"ng-template",5),e.YNc(6,K,22,0,"ng-template",6),e.YNc(7,Y,13,6,"ng-template",7),e.YNc(8,k,3,0,"ng-template",8),e.YNc(9,I,3,0,"ng-template",9),e.qZA()()()()),2&t&&(e.xp6(3),e.Q6J("value",s.users)("rows",10)("loading",s.loading)("rowHover",!0)("paginator",!0)("globalFilterFields",e.DdM(7,V))("selection",s.selectedUser))},dependencies:[d.jx,A.Hq,y.o,S.iA,S.UA,S.xl],styles:["[_nghost-%COMP%]     .p-frozen-column{font-weight:700}[_nghost-%COMP%]     .p-datatable-frozen-tbody{font-weight:700}[_nghost-%COMP%]     .p-progressbar{height:.5rem}"]});class h{}h.\u0275fac=function(t){return new(t||h)},h.\u0275mod=e.oAB({type:h}),h.\u0275inj=e.cJS({imports:[c.Bz.forChild([{path:"",component:T},{path:"nuevo",component:Z},{path:"editar/:user",component:C},{path:"empresas/:user",component:U},{path:"perfiles/:user",component:b}]),c.Bz]});var G=r(931);class _{}_.\u0275fac=function(t){return new(t||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({imports:[m.ez,h,u.u5,G.W]})}}]);